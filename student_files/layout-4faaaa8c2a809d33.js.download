try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c91b3b73-9815-4b7e-b4fb-8fa1abc1bf9d",e._sentryDebugIdIdentifier="sentry-dbid-c91b3b73-9815-4b7e-b4fb-8fa1abc1bf9d")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8825],{49383:function(e,t,s){Promise.resolve().then(s.bind(s,47148))},81839:function(e,t,s){"use strict";s.d(t,{hO:function(){return d},j1:function(){return m},jZ:function(){return p},ls:function(){return c}});var a=s(99376),l=s(2265),n=s(64040),r=s(49131),i=s(21288),o=s(9568);let c="pending-collaboration-invite",d=()=>{let[e,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{try{let e=sessionStorage.getItem(c);if(e){let s=JSON.parse(e);t(s)}}catch(e){i.logging.error("Error reading pending collaboration invite:",{error:e})}},[]),{pendingInvite:e,clearPendingInvite:(0,l.useCallback)(()=>{sessionStorage.removeItem(c),t(null)},[])}},u=e=>{let t=new URL((null==e?void 0:e.get("redirect"))?decodeURIComponent(e.get("redirect")):"/",window.location.origin);return t.searchParams.set("should-refresh-credentials","1"),t},m=()=>{let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),{pendingInvite:s,clearPendingInvite:n}=d();return(0,l.useCallback)(a=>{if(s){let e="".concat(s.projectUrl,"?magic_link=").concat(s.magicLink);n(),window.location.href=e;return}let l=u(t),r=new URLSearchParams(t);a?(r.set("redirect",l.pathname+l.search),a.includes("?")?e.push(a+"&".concat(r.toString())):e.push(a+"?".concat(r.toString()))):e.push(l.pathname+l.search),e.refresh()},[e,t,s,n])},p=()=>{let{setIsSuccessfulReferral:e}=(0,o.l)();return(0,l.useCallback)(async(t,s)=>{if(!s)return;let a=(0,r.Tb)();try{let l=await t.getIdToken();await a.post("/user/referral-code/use",{referral_code:s},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}}),e()}catch(t){let e=(0,n.B8)(t);400===e.status&&(e.message=e.message||"Invalid referral code",e.details="Your sign-up will proceed without the referral bonus."),(0,n.Eo)(e)}},[e])}},76678:function(e,t,s){"use strict";s.d(t,{g:function(){return p},s:function(){return f}});var a=s(57437),l=s(2265),n=s(77755),r=s(54596),i=s(26110),o=s(41135),c=s(5103),d=s(52558),u=s(61922),m=s(71759);function p(e){var t;let{dialogDescription:s}=e,l=(0,u.aS)(e=>e.currentWorkspace),n=(0,u.aS)(e=>e.hasFetchedCurrentWorkspace),r=(0,u.aS)(e=>e.memberships),{authUser:i}=(0,d.Eu)(),o=null===(t=r.find(e=>e.user_id===(null==i?void 0:i.uid)))||void 0===t?void 0:t.role;return(0,m.MD)()?(0,a.jsx)(h,{dialogDescription:s}):(0,a.jsx)(x,{hasFetchedWorkspace:n,dialogDescription:s,myWorkspaceRole:o,workspace:l,isLoggedIn:!!i})}function h(e){var t;let{dialogDescription:s}=e,{authUser:l}=(0,d.Eu)(),{projectWorkspace:n,workspaceMemberships:r}=(0,c.f)(),i=null===(t=r.find(e=>e.user_id===(null==l?void 0:l.uid)))||void 0===t?void 0:t.role,o=(0,m.hO)(e=>e.hasFetchedProjectWorkspace);return(0,a.jsx)(x,{dialogDescription:s,myWorkspaceRole:i,workspace:n,hasFetchedWorkspace:o,isLoggedIn:!!l})}function x(e){let{dialogDescription:t,myWorkspaceRole:s,workspace:c,hasFetchedWorkspace:d,isLoggedIn:u}=e,m=!!c,{title:p,description:h}=(0,l.useMemo)(()=>d&&!m?{title:"Error",description:"Something went wrong."}:{title:"Upgrade required",description:t||"Upgrade to Pro and unlock more features & usage"},[d,m,t]);return(0,a.jsxs)(i.cZ,{className:"max-h-[90vh] overflow-y-auto md:max-w-3xl",size:"lg",children:[(0,a.jsxs)(i.fK,{children:[(0,a.jsx)(o.xx,{className:"mb-1 size-9 shrink-0"}),(0,a.jsx)(i.$N,{className:"text-2xl",children:u?p:"Upgrade required"}),(0,a.jsx)(i.Be,{className:"text-sm",children:u?h:t||"Upgrade to Pro and unlock more features & usage"})]}),u?d?c?(0,a.jsx)(n.om,{planCardContext:"outOfCredits",workspace:c,myWorkspaceRole:s,children:(0,a.jsx)(r.S,{showEnterprise:!1})}):(0,a.jsx)(f,{}):(0,a.jsx)(n._M,{}):(0,a.jsx)(n.om,{planCardContext:"loggedOut",myWorkspaceRole:void 0,children:(0,a.jsx)(r.S,{showEnterprise:!1})})]})}let f=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"We couldn't load the data needed to upgrade your workspace."}),(0,a.jsxs)("p",{children:["Please refresh the page and try again. If the problem continues, contact our"," ",(0,a.jsx)("a",{href:"/support",className:"underline",children:"Support"}),"."]})]})},60616:function(e,t,s){"use strict";s.d(t,{A:function(){return N}});var a=s(57437),l=s(92850),n=s(49852),r=s(33145),i=s(46214),o=s(2265),c=s(14438),d=s(61922),u=s(82176),m=s(62869),p=s(26110),h=s(57346),x=s(95186),f=s(93022),g=s(49284),v=s(10531),b=s(89668);let j=["This offer is for new Lovable users only (gotta share the magic with fresh eyes).","Rewards are unlocked once your invite actually publishes an app. No ghost referrals, please.","Each referral code can be used by a maximum of 5 new users. Once you reach this limit, your referral link will no longer accept new signups.","We reserve the right to change, pause, or end this program anytime. We're experimental like that.","Don't spam or post your link where it doesn't belong. Let's keep it classy.","If we suspect sketchy behavior, we may withhold rewards or deactivate your link.","One reward per new user invited. No stacking loopholes - we're nerds, we'll catch it."],y=e=>{let{back:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)(p.fK,{className:"flex flex-col gap-4",children:[(0,a.jsxs)(m.z,{onClick:t,variant:"ghost",className:"w-fit px-2",children:[(0,a.jsx)(h.Z,{name:"arrow_left_alt"}),"Back"]}),(0,a.jsx)(p.$N,{children:"Terms and conditions"})]}),(0,a.jsx)("div",{className:"pb-6",children:(0,a.jsx)("ul",{className:"flex max-h-[15rem] list-disc flex-col gap-2 overflow-auto px-5",children:j.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e})},t))})})]})},w=[{icon:"bolt",children:"Share your invite link"},{icon:"crown",children:(0,a.jsxs)(a.Fragment,{children:["They sign up and get ",(0,a.jsx)("b",{children:"extra 10 credits"})]})},{icon:"chat",children:(0,a.jsxs)(a.Fragment,{children:["You get ",(0,a.jsx)("b",{children:"10 credits"})," once they publish their first website"]})}],N=e=>{var t,s,j;let{onSuccess:N}=e,[E,k]=(0,o.useState)(!1),C=(0,d.aS)(e=>e.currentWorkspace),[_,S]=(0,o.useState)(!1),T=null!==(j=(0,u.dl)(v.P.ReferralCopyConfetti))&&void 0!==j&&j,R=(0,l.a)(b.t.referralCode({referralCode:null==C?void 0:C.referral_code,workspaceId:null==C?void 0:C.id})),I=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="10001",e.style.pointerEvents="none",document.body.appendChild(e),I.current=new n.Z({canvas:e}),()=>{document.body.removeChild(e)}},[]);let D=window.location.protocol+"//"+window.location.host,P="".concat(D,"/invite/").concat(null===(t=R.data)||void 0===t?void 0:t.referral_code),O=async()=>{if(!E)try{if(await navigator.clipboard.writeText(P),k(!0),T){var e;null===(e=I.current)||void 0===e||e.addConfetti({emojis:["❤️","\uD83D\uDC96","\uD83D\uDC9D","\uD83D\uDC97","\uD83D\uDC93"],emojiSize:58})}i.ZP.capture(g.PU.COPIED_LINK,{method:"button",did_confetti:T}),setTimeout(()=>{k(!1)},2e3)}catch(e){c.Am.error("Failed to copy link")}};return(0,a.jsxs)(p.cZ,{hideCloseButton:!0,className:"pointer-events-auto flex max-h-[95vh] flex-col gap-4 overflow-y-auto border-none bg-background outline-none",children:[(0,a.jsx)(p.$N,{className:"sr-only",children:"Refer & Earn"}),_?(0,a.jsx)(y,{back:()=>S(!1)}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.fK,{children:(0,a.jsxs)("div",{className:"relative h-fit overflow-hidden rounded-xl",children:[(0,a.jsx)("button",{onClick:N,className:"absolute right-4 top-4 z-10 bg-transparent",tabIndex:-1,children:(0,a.jsx)(h.Z,{name:"close",className:"h-5 w-5 cursor-pointer text-muted-foreground"})}),(0,a.jsx)(r.default,{src:"/img/referral/dark-spread.png",alt:"Referral",className:"hidden w-full object-contain dark:block",width:406,height:188,priority:!0}),(0,a.jsx)(r.default,{src:"/img/referral/light-spread.png",alt:"Lovable 2.0",className:"block w-full object-contain dark:hidden",width:406,height:188,priority:!0})]})}),(0,a.jsxs)("div",{className:"md:py-2",children:[(0,a.jsx)("div",{className:"mb-3 text-base font-normal text-muted-foreground",children:"How it works:"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:w.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.Z,{name:e.icon,className:"h-5 w-5"}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-base font-normal text-foreground",children:e.children})})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-3 text-base font-normal text-muted-foreground",children:"Your invite link:"}),R.isLoading?(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)(f.O,{className:"h-12 w-full rounded-xl"})}):(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2 rounded-xl bg-muted p-2 sm:flex-row sm:space-y-0",children:[(0,a.jsxs)("div",{className:"flex w-full flex-1 items-center px-2",children:[(0,a.jsx)(h.Z,{name:"link",className:"mr-2 h-5 w-5 text-muted-foreground"}),(0,a.jsx)(x.I,{onCopy:()=>{i.ZP.capture(g.PU.COPIED_LINK,{method:"input_copy",did_confetti:T})},value:R.error?"Error fetching the link, sorry":P,tabIndex:-1,readOnly:!0,className:"border-none shadow-none focus:outline-none focus:ring-0 focus-visible:ring-0"})]}),(0,a.jsx)(m.z,{onClick:O,className:"w-full rounded-xl sm:w-24",variant:"default",disabled:R.isLoading||!(null===(s=R.data)||void 0===s?void 0:s.referral_code),children:E?"Copied!":"Copy link"})]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(m.z,{variant:"link",className:"h-fit w-fit py-0 text-xs font-normal text-muted-foreground underline",onClick:()=>S(!0),children:"View Terms and Conditions"})})]})]})}},9568:function(e,t,s){"use strict";s.d(t,{l:function(){return a}});let a=(0,s(59625).Ue)(e=>({shouldShowReferralNotice:!1,setIsSuccessfulReferral:()=>e({shouldShowReferralNotice:!0})}))},47148:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return iE}});var a,l,n,r,i,o,c,d,u,m,p=s(57437),h=s(29827),x=s(21770),f=s(99376),g=s(2265),v=s(14438),b=s(52558),j=s(20958),y=s(27132),w=s(64040),N=s(49131),E=s(24032),k=s(22076),C=s(97318),_=s(2043),S=s(46214),T=s(21288),R=s(49284),I=s(74541),D=s(47176),P=s(74746),O=s(50126),A=s(37675),z=s(10867),L=s(51115),M=s(60256);let Z=()=>{let e=(0,g.useRef)({}),t=(0,g.useMemo)(()=>["click","mousemove","keydown","touchstart","touchmove","touchend"],[]),s=(0,g.useCallback)((s,a)=>{let l=new Date().getTime()-s;for(let s of(S.ZP.capture(R.SL.FIRST_INTERACT_AFTER_GEN,{plinged_feature:a,time_to_activity_ms:l}),t))document.removeEventListener(s,e.current[s])},[t]),a=(0,g.useCallback)(a=>{let l=new Date().getTime();for(let n of t){let t=()=>{s(l,a.didPling)};e.current[n]=t,document.addEventListener(n,t)}},[t,s]);return(0,g.useEffect)(()=>()=>{for(let s of t)e.current[s]&&document.removeEventListener(s,e.current[s])},[t]),{startTrackingUserActivity:a}},F=()=>{let{userData:e}=(0,M.SE)(),t=(0,g.useRef)(e);(0,g.useEffect)(()=>{t.current=e},[e]);let{startTrackingUserActivity:s}=Z();return{playAudioOnGenerationComplete:(0,g.useCallback)(e=>{var a;let l=t.current,n=null!==(a=null==l?void 0:l.sound_effect_active)&&void 0!==a?a:"firstgen",r=!e.isChatOnly&&"never"!==n&&("always"===n||"firstgen"===n&&!!e.isCreation),i=r;r&&new Audio("/audio/generation-complete.mp3").play().catch(()=>{i=!1}),s({didPling:i})},[s])}};var U=s(68904),K=s(81839),V=s(88391),W=s(65666);let B="lovable_collaboration_status",G=()=>{try{let e=localStorage.getItem(B);return e?JSON.parse(e):{}}catch(e){return{}}},H=(e,t)=>{let s=G()[e];return s&&s.userId===t?Date.now()-s.timestamp>3e5?null:s.isMember:null},q=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=G();n[e]={userId:t,isMember:s,joinedAt:a,accessLevel:l,timestamp:Date.now()},localStorage.setItem(B,JSON.stringify(n))},X=(e,t)=>{let s=G();s[e]&&s[e].userId===t&&(delete s[e],localStorage.setItem(B,JSON.stringify(s)))};var Y=s(7455),$=s(77113),J=s(62869),Q=s(26110),ee=s(57346),et=s(41135);let es=e=>{let{projectId:t,projectName:s,invitor:a,magicCodeId:l,done:n,onReject:r}=e,[i,o]=(0,g.useState)(!1),c=(0,h.NL)(),{authUser:d}=(0,b.Eu)(),u=(0,Y.c)(e=>e.collaborators).find(e=>e.id===(null==d?void 0:d.uid)),m=u&&!u.joined_at,x=async()=>{o(!0);try{if(l){n();return}let e=(0,N.SJ)();await e.put("/projects/".concat(t,"/collaborators/accept-invite")),v.Am.success("Invitation accepted!",{description:'You can now access "'.concat(s,'"')}),await c.invalidateQueries({queryKey:C.iZ.collaborators(t)}),await c.invalidateQueries({queryKey:C.iZ.detail(t)}),n()}catch(e){console.error("Error accepting invite:",e),(0,w.Eo)(e)}finally{o(!1)}},f=async()=>{o(!0);try{if(m){let e=(0,N.SJ)();await e.put("/projects/".concat(t,"/collaborators/reject-invite"))}await c.invalidateQueries({queryKey:C.iZ.collaborators(t)}),null==r||r()}catch(e){(0,w.Eo)(e)}finally{o(!1)}};return(0,p.jsxs)(Q.cZ,{className:"gap-4 outline-none focus:ring-0",size:"md",hideCloseButton:!0,blurOverlay:!0,onInteractOutside:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,p.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,p.jsx)(et.xx,{className:"h-9"}),(0,p.jsxs)(Q.fK,{children:[(0,p.jsx)(Q.$N,{className:"text-2xl md:text-3xl",children:"You've been invited!"}),(0,p.jsxs)(Q.Be,{children:["You've been invited to collaborate on \"",s,'"',a&&" by ".concat(a)]})]})]}),(0,p.jsxs)(Q.cN,{fullWidthButtons:!0,className:"flex-col gap-2",children:[(0,p.jsxs)(J.z,{onClick:e=>{e.preventDefault(),e.stopPropagation(),x()},disabled:i,className:"w-full",children:[(0,p.jsx)(ee.Z,{name:"check",size:"small",className:"mr-2"}),"Accept invitation"]}),(0,p.jsxs)(J.z,{onClick:e=>{e.preventDefault(),e.stopPropagation(),f()},disabled:i,className:"w-full",variant:"outline",children:[(0,p.jsx)(ee.Z,{name:"close",size:"small",className:"mr-2"}),"Decline invitation"]})]})]})},ea="magic_link",el=()=>{let{authUser:e}=(0,b.Eu)(),t=(0,f.useRouter)(),s=(0,f.usePathname)(),[a,l]=(0,g.useState)(!1),n=(0,f.useSearchParams)(),r=(0,h.NL)(),i=(0,W.D)(),o=n.get(ea),c=(0,V.z)(es),d=(0,Y.c)(e=>e.collaborators),u=(0,Y.c)(e=>e.hasFetchedCollaborators),m=d.find(t=>t.id===(null==e?void 0:e.uid)),p=(null==e?void 0:e.uid)?H(i,e.uid):null,j=m&&m.joined_at,y=null!==p?p:j;(0,g.useEffect)(()=>{if(u&&(null==e?void 0:e.uid)){let s=!!(null==m?void 0:m.joined_at),a=H(i,e.uid);if(null!==a&&a!==s&&X(i,e.uid),m){var t;q(i,e.uid,s,(null===(t=m.joined_at)||void 0===t?void 0:t.toString())||null,m.access_level||null)}else!0===a&&X(i,e.uid)}},[u,null==e?void 0:e.uid,m,i]);let{mutate:E}=(0,x.D)({mutationFn:async e=>{let{token:t}=e;return(0,N.SJ)().get("/projects/".concat(i,"/magic-codes/").concat(t,"/validate"))},onSuccess:e=>{c({childProps:{projectId:i,projectName:e.project_name,invitor:e.invitor_display_name,magicCodeId:o,done:()=>{k({token:o})},onReject:()=>{T({token:o})}}})},onError:e=>{(0,w.Eo)(e),t.push("/")}}),{mutate:k}=(0,x.D)({mutationFn:async e=>{let{token:t}=e;return(0,N.SJ)().post("/projects/".concat(i,"/magic-codes/").concat(t,"/accept"))},onSuccess:()=>{(null==e?void 0:e.uid)&&(X(i,e.uid),q(i,e.uid,!0)),i&&r.invalidateQueries({queryKey:C.iZ.collaborators(i)});let a=new URLSearchParams(n.toString());a.delete(ea),t.replace("".concat(s,"?").concat(a.toString())),v.Am.success("You've joined the project!")},onError:e=>{(0,w.Eo)(e)}}),[_,S]=(0,g.useState)(new Set),{mutate:T}=(0,x.D)({mutationFn:async e=>{let{token:t}=e;return(0,N.SJ)().post("/projects/".concat(i,"/magic-codes/").concat(t,"/reject"))},onSuccess:()=>{(null==e?void 0:e.uid)&&X(i,e.uid),o&&S(e=>new Set(e).add(o)),v.Am.info("Invitation declined",{description:"You've declined the invitation to the project"}),c(!1);let a=new URLSearchParams(n.toString());a.delete(ea),t.replace("".concat(s,"?").concat(a.toString()))},onError:e=>{(0,w.Eo)(e)}}),R=!!(o&&!e);(0,g.useEffect)(()=>{if(e&&o&&!a){if(_.has(o)){let e=new URLSearchParams(n.toString());e.delete(ea),t.replace("".concat(s,"?").concat(e.toString()));return}if(y){c(!1);let e=new URLSearchParams(n.toString());e.delete(ea),t.replace("".concat(s,"?").concat(e.toString()));return}E({token:o})}},[e,E,a,o,y,n,t,_,s]),(0,g.useEffect)(()=>{if(R){if(o&&i){let e={projectId:i,magicLink:o,timestamp:Date.now(),projectUrl:s};sessionStorage.setItem(K.ls,JSON.stringify(e))}(0,v.Am)("Log in",{description:"You have to log in to join this project"}),t.push("/login?redirect=".concat(s))}},[t,R,o,i,s]);let I=!o||o&&_.has(o)||!!y,{setHasHandledCollaborationInvite:D}=(0,$.d2)();return(0,g.useEffect)(()=>{D(I)},[I,D]),I};var en=s(44481),er=s(28667),ei=s(81103),eo=s(94508),ec=s(25658),ed=e=>{let{openSidebar:t}=e,s=(0,ec.z)(e=>e.showHistory),{setShowHistory:a}=(0,ec.VF)();return(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm",className:(0,eo.cn)("bg-transparent hover:bg-transparent md:hover:bg-accent-primary/75 md:hover:text-accent-primary-foreground",s&&"bg-accent-primary text-accent-primary-foreground hover:bg-accent-primary md:hover:bg-accent-primary/75"),onClick:()=>{s||(S.ZP.capture(R.SL.TABS.HISTORY_OPENED),t()),a(e=>!e)},children:(0,p.jsx)(ee.Z,{name:"history_2",size:"small"})})}),(0,p.jsx)(ei._v,{children:s?"Hide history":"View history"})]})},eu=s(60616),em=s(76678),ep=s(6812),eh=s(49968),ex=s(52055),ef=s(95670),eg=s(59702),ev=s(79117),eb=s(61011),ej=s(55157),ey=s(55721),ew=s(67817),eN=s(23866),eE=s(50968),ek=s(25057),eC=s(80733),e_=s(3813);function eS(){let{project_id:e}=(0,f.useParams)(),[t,s]=(0,g.useState)(!1),a=(0,$.iZ)(e=>e.project);if(!(0,e_.qT)())return null;let l=async()=>{if(!t)try{s(!0);let t=await eC.g.getValidToken(),l={};t&&(l.Authorization="Bearer ".concat(t));let n=(0,ek.t)(),r=await fetch("".concat(n,"/projects/").concat(e,"/download-zip"),{method:"GET",headers:l,credentials:"include"});if(!r.ok){let e=Error("Download failed: ".concat(r.status," ").concat(r.statusText));throw e.status=r.status,e}let i=await r.blob(),o=window.URL.createObjectURL(i),c=document.createElement("a");c.href=o;let d=r.headers.get("Content-Disposition"),u=null==d?void 0:d.match(/filename="(.+)"/),m=(null==a?void 0:a.name)||(null==a?void 0:a.github_repo_name),p=m?"".concat(m,".zip"):"project-".concat(e,".zip"),h=(null==u?void 0:u[1])||p;c.download=h,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}catch(e){console.error("Error downloading project:",e),403===e.status?v.Am.error("You don't have permission to download this project."):v.Am.error(e.message||e.details||"Download failed. Please try again or contact support if this issue persists.")}finally{s(!1)}};return(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"secondary",size:"icon-sm",onClick:l,disabled:t,children:(0,p.jsx)(ee.Z,{name:t?"refresh":"arrow_downward",size:"small",className:(0,eo.cn)(t&&"animate-spin")})})}),(0,p.jsx)(ei._v,{children:(0,p.jsx)("p",{children:"Download project as ZIP"})})]})}var eT=s(88746),eR=s(27410),eI=s(29328),eD=e=>{let{open:t,setOpen:s,projectId:a}=e,{authUser:l}=(0,b.Eu)(),n=(0,$.iZ)(e=>e.project),r=(0,ew.v)(),{setShowConsole:i}=(0,O.pE)(),{isEnabled:o,toggleStats:c}=(0,eE.V)(),{isEnabled:d,toggleReactScan:u}=(0,eN.u)(),{setIsOutOfCreditsDialogOpen:m}=(0,M.SE)(),h=(0,ep.Q)(e=>e.setShowCreateWorkspaceDialog),{openSettings:x}=(0,ej.r)(),f=(0,V.z)(em.g),v=(0,V.z)(eu.A),[j,y]=(0,g.useState)(!1),{setSelectedImageUrl:w}=(0,P.mx)(),{showErrorDialog:N}=(0,eT.t)(),E=(0,V.z)(eb.Z),k=(0,V.z)(eg.p),C=(0,V.z)(ev.i);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(ey.h_,{open:t,onOpenChange:s,children:[(0,p.jsx)(ey.$F,{asChild:!0,children:(0,p.jsx)("button",{className:"pointer-events-none absolute inset-x-0 select-none bg-transparent text-transparent"})}),(0,p.jsxs)(ey.AW,{className:"z-[1001] flex max-h-[80vh] min-w-[200px] max-w-[250px] flex-col gap-3 overflow-y-auto rounded-md border bg-background p-4",alignOffset:2,collisionPadding:8,sideOffset:18,children:[(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("h3",{className:"",children:"Advanced Settings"}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Developer & debug options."})]}),(0,p.jsx)(ef.Z,{iconName:"bolt",title:"Toggle Stats.js (".concat(o?"ON":"OFF",")"),onClick:c},"toggle-stats"),(0,p.jsx)(ef.Z,{iconName:"scan",title:"Toggle React Scan (".concat(d?"ON":"OFF",")"),onClick:u},"toggle-react-scan"),r&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ef.Z,{iconName:"person",title:"Impersonate User",externalHref:"/lovable-admin"},"impersonate-user"),(0,p.jsx)(ey.VD,{}),(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("h3",{className:"text-sm font-medium",children:"Dialog Triggers"}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:"Open any dialog for testing"})]}),(0,p.jsxs)(ey.Ph,{children:[(0,p.jsxs)(ey.kt,{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)(ee.Z,{name:"visibility",size:"small"}),"Show Dialogs"]}),(0,p.jsx)(ey.TG,{className:"z-[1002] max-h-[70vh] min-w-[200px] max-w-[250px] overflow-y-auto p-2",sideOffset:8,children:(0,p.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,p.jsx)(ef.Z,{iconName:"warning",title:"Open Out of Credits Dialog",onClick:()=>m(!0)},"open-out-of-credits"),(0,p.jsx)(ef.Z,{iconName:"payments",title:"Open Subscriptions Dialog",onClick:()=>f({childProps:{}})},"open-subscriptions"),(0,p.jsx)(ef.Z,{iconName:"add",title:"Open Create Workspace Dialog",onClick:()=>h(!0)},"open-create-workspace"),(0,p.jsx)(ef.Z,{iconName:"featured_seasonal_and_gifts",title:"Open Referral Dialog",onClick:()=>v({childProps:{}})},"open-referral"),(0,p.jsx)(ef.Z,{iconName:"security",title:"Open Auth Dialog",onClick:()=>y(!0)},"open-auth"),(0,p.jsx)(ef.Z,{iconName:"settings",title:"Open Settings Dialog",onClick:()=>x()},"open-settings"),(0,p.jsx)(ef.Z,{iconName:"image",title:"Open Image Preview Dialog",onClick:()=>w("https://images.unsplash.com/photo-1636955779321-819753cd1741?w=800")},"open-image-preview"),(0,p.jsx)(ef.Z,{iconName:"error",title:"Open Error Alert Dialog",onClick:()=>N("This is a test error message for debugging purposes.",!0,"trace-id-12345")},"open-error-dialog"),(0,p.jsx)(ef.Z,{iconName:"delete",title:"Open Remove Confirm Dialog",onClick:()=>E({childProps:{title:"Remove Test Item",targetName:"Test User",descriptionTemplate:"Are you sure you want to remove {name}? This action cannot be undone.",onConfirm:async()=>{console.log("Remove confirmed"),E(!1)},onCancel:()=>E(!1)}})},"open-remove-confirm"),n&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ef.Z,{iconName:"delete",title:"Open Delete Project Dialog",onClick:()=>k({childProps:{project:{id:"test-project-id-do-not-delete",name:"Test Project",github_owner:{name:"test-user"},github_repo_name:"test-repo-name"},isOpen:!0,onClose:()=>k(!1)}})},"open-delete-project"),(0,p.jsx)(ef.Z,{iconName:"edit",title:"Open Rename Project Dialog",onClick:()=>C({childProps:{project:{id:"test-project-id-do-not-rename",name:"Test Project",github_owner:{name:"test-user"},github_repo_name:"test-repo-name"},isOpen:!0,onClose:()=>C(!1)}})},"open-rename-project")]})]})})]})]}),(r||!1)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ey.VD,{}),(0,p.jsx)(ef.Z,{externalHref:(0,eh.U1)(a),iconName:"language",title:"Firestore: Project"},"preview"),(null==n?void 0:n.user_id)&&(null==l?void 0:l.uid)!==(null==n?void 0:n.user_id)&&(0,p.jsx)(ef.Z,{externalHref:(0,eh.fA)(null==n?void 0:n.user_id),iconName:"language",title:"Firestore: User that created this project"},"firestore-user"),(null==l?void 0:l.uid)&&(0,p.jsx)(ef.Z,{externalHref:(0,eh.fA)(null==l?void 0:l.uid),iconName:"language",title:"Firestore: This user"},"firestore-current-user"),(null==n?void 0:n.workspace_id)&&(0,p.jsx)(ef.Z,{externalHref:(0,eh.Ny)(n.workspace_id),iconName:"language",title:"Firestore: Workspace"},"firestore-workspace")]}),!1,r&&(0,p.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)(eS,{}),(0,p.jsx)("p",{children:"Download Project as Zip"})]}),r&&(0,p.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)(J.z,{variant:"secondary",size:"icon-sm",onClick:()=>i("debug"),children:(0,p.jsx)(ee.Z,{name:"bug_report",size:"small"})}),(0,p.jsx)("p",{children:"Open Debug Console"})]})]})]}),(0,p.jsx)(ex.o,{open:j,onOpenChange:y})]})},eP=s(76642),eO=s(47483),eA=s(12285),ez=s(99153),eL=s(35354),eM=s(71759),eZ=s(48614),eF=s(1188),eU=s(93022);let eK=e=>{let{project:t}=e,s=null==t?void 0:t.visibility,a=(0,eI.f6)(e=>"live"===e.visibleMode),l=(0,eI.f6)(e=>"live"!==e.visibleMode&&("live"===e.activeMode||"starting"===e._sandboxState)),n=(0,O.Sl)(e=>e.activeEditId);return t?(0,p.jsx)("div",{className:"flex w-full min-w-0 flex-col items-start gap-0 truncate",children:(0,p.jsxs)(eZ.M,{mode:"popLayout",initial:!1,children:[(0,p.jsxs)(eF.E.div,{className:"flex min-w-0 items-center gap-1 truncate",layout:"position",transition:{duration:.25,bounce:.1,type:"spring"},layoutDependency:a||n,children:[t&&t.name?(0,p.jsx)("p",{className:"hidden min-w-0 truncate text-sm font-medium leading-none md:block",children:null==t?void 0:t.name}):(0,p.jsx)(eU.O,{className:"hidden h-3 w-[150px] md:flex"}),"public"===s&&(0,p.jsx)(ee.Z,{name:"globe",size:"xsmall",className:"hidden md:flex"}),"private"===s&&(0,p.jsx)(ee.Z,{name:"lock",size:"xsmall",className:"hidden md:flex"}),(0,p.jsx)(ee.Z,{size:"small",name:"keyboard_arrow_down",className:"text-foreground/50 group-data-[state=open]:text-primary"})]},"project-name"),!a&&!n&&(0,p.jsx)(eF.E.div,{layout:!0,transition:{duration:.3,bounce:0,type:"spring"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,p.jsx)(eZ.M,{mode:"wait",initial:!1,children:(0,p.jsx)(eF.E.p,{className:"hidden w-full min-w-0 truncate text-left text-xs text-muted-foreground md:flex",initial:{y:5,opacity:0},animate:{y:0,opacity:t?1:0},exit:{y:-5,opacity:0},transition:{duration:.15,bounce:0,type:"spring"},children:l?"Loading Live Preview...":"Previewing last saved version"},l?"loading":"saved")})},"status")]})}):(0,p.jsxs)("div",{className:"hidden w-full min-w-0 flex-col items-start gap-1 md:flex",children:[(0,p.jsx)(eU.O,{className:"flex h-3 w-[150px]"}),(0,p.jsx)(eU.O,{className:"flex h-3 w-[125px]"})]})};var eV=e=>{let{}=e,{openSettings:t}=(0,ej.r)(),{authUser:s}=(0,b.Eu)(),a=(0,$.iZ)(e=>e.project),l=(0,eM.hO)(e=>e.projectWorkspace),{isMac:n}=(0,eL.Z)(),[r,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(!1),d=(0,ew.v)(),{canEdit:u}=(0,_.t)(),[m,h]=(0,g.useState)(!1),x=!!(s&&l&&(null==s?void 0:s.uid)===(null==l?void 0:l.owner_id));return(0,p.jsxs)("div",{id:"main-menu",className:"relative flex md:min-w-0 md:shrink",children:[(0,p.jsxs)(ey.h_,{children:[(0,p.jsx)(ey.$F,{asChild:!0,onPointerDown:e=>{e.altKey&&(e.preventDefault(),e.stopPropagation(),i(!0),S.ZP.capture(R.SL.HEADER.SETTINGS_OPENED,{project_id:null==a?void 0:a.id}))},children:(0,p.jsxs)("button",{className:"group flex items-center gap-2 border-none text-foreground outline-none duration-150 ease-in-out hover:opacity-80 focus:outline-none md:min-w-0 md:shrink",children:[(0,p.jsx)(et.xx,{className:"h-[18px] w-[18px] shrink-0"}),a&&(0,p.jsx)(eK,{project:a})]})}),(0,p.jsxs)(ey.AW,{className:"min-w-[200px] border md:min-w-[275px]",align:"start",sideOffset:10,children:[(0,p.jsx)(ef.Z,{title:"Go to Dashboard",iconName:"chevron_left",internalHref:"/"},"dashboard"),l&&(0,p.jsx)(ey.VD,{}),l&&(0,p.jsxs)("div",{className:"flex flex-col gap-1.5 px-2 py-1.5",children:[(0,p.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:l.name}),(0,p.jsx)(eP.H,{workspace:l,isOwnerOfWorkspace:x})]}),(0,p.jsx)(ey.VD,{}),(0,p.jsx)(eO.r,{}),u&&(0,p.jsx)(ey.VD,{}),u&&(0,p.jsxs)(ey.Xi,{onClick:()=>t("project"),children:[(0,p.jsx)(ee.Z,{name:"settings"}),(0,p.jsx)("p",{children:"Settings"}),n?(0,p.jsx)(ey.KM,{className:"hidden sm:flex",children:"⌘."}):(0,p.jsx)(ey.KM,{className:"hidden sm:flex",children:"Ctrl."})]}),u&&(0,p.jsx)(ef.Z,{title:"Rename project",iconName:"edit_square",onClick:()=>h(!0)},"rename-project"),(0,p.jsx)(ey.VD,{}),(0,p.jsx)(ez.O,{}),(0,p.jsx)(ef.Z,{title:"Help",iconName:"help",externalHref:"/support"},"help")]})]}),a&&d&&(0,p.jsx)(eD,{open:r,setOpen:i,projectId:a.id}),(0,p.jsx)(eA.O,{projectId:null==a?void 0:a.id,projectName:null==a?void 0:a.name,currentWorkspaceId:null==a?void 0:a.workspace_id,open:o,setOpen:c,isRootDialog:!0}),a&&(0,p.jsx)(ev.i,{project:a,isOpen:m,onClose:()=>h(!1)})]})},eW=s(56613),eB=s(33699),eG=g.memo(e=>{let{children:t,showScrollButtonsInitially:s=!1,className:a}=e,[l,n]=(0,g.useState)(!1),[r,i]=(0,g.useState)(s),[o,c]=(0,g.useState)(s),d=r||o,u=(0,g.useRef)(null),m=()=>{if(!u.current)return;let{scrollLeft:e,scrollWidth:t,clientWidth:s}=u.current;i(e>0),c(e<t-s)};return(0,g.useEffect)(()=>{n(!0),m()},[t]),(0,g.useEffect)(()=>(window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}),[]),(0,p.jsxs)("div",{className:(0,eo.cn)("relative flex max-w-full gap-1",a),children:[d&&(0,p.jsx)(J.z,{variant:"ghost",size:"sm",className:(0,eo.cn)("absolute left-0 z-10 bg-background px-1 opacity-100 transition-opacity duration-200",{"!opacity-0":!l||!r,"pointer-events-none":!l||!r}),onClick:e=>{e.preventDefault(),u.current&&u.current.scrollTo({behavior:"smooth",left:u.current.scrollLeft-.8*u.current.clientWidth})},children:(0,p.jsx)(ee.Z,{name:"chevron_left",size:"small"})}),(0,p.jsx)("div",{ref:u,onScroll:m,className:"w-full overflow-x-auto whitespace-nowrap scrollbar-hide md:overflow-visible",children:t}),d&&(0,p.jsx)(J.z,{variant:"ghost",size:"sm",className:"px-1",disabled:!o,onClick:e=>{e.preventDefault(),u.current&&u.current.scrollTo({behavior:"smooth",left:u.current.scrollLeft+.8*u.current.clientWidth})},children:(0,p.jsx)(ee.Z,{name:"chevron_right",size:"small"})})]})}),eH=s(78099);let eq=(0,g.memo)(e=>{let{isSidebarOpen:t,toggleSidebar:s}=e;return(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(J.z,{size:"icon-sm",variant:"ghost",onClick:()=>{S.ZP.capture(R.SL.HEADER.SIDEBAR_TOGGLED),s()},className:(0,eo.cn)("hover:bg-muted-hover"),children:(0,p.jsx)(ee.Z,{name:t?"dock_to_right-fill":"dock_to_right",size:"small"})})}),(0,p.jsx)(ei._v,{children:t?"Hide sidebar":"View sidebar"})]})});eq.displayName="SidebarToggle";var eX=s(27613);let eY=e=>{let{className:t}=e,{setDevice:s}=(0,eI.My)(),a=(0,eI.f6)(e=>e.device),l=eX.H[a];return(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(J.z,{className:(0,eo.cn)(t),variant:"ghost",size:"icon-sm",onClick:()=>{switch(a){case"desktop":s("tablet");break;case"tablet":s("mobile");break;case"mobile":s("desktop")}S.ZP.capture(R.SL.PREVIEW.DEVICE_CHANGED)},children:(0,p.jsx)(ee.Z,{name:l.icon,size:"small"})})}),(0,p.jsx)(ei._v,{side:"bottom",children:l.tooltip})]})};var e$=s(23518),eJ=s(95186),eQ=s(57054),e0=s(2925);let e1=()=>{let e=(0,P.IE)();return{pages:e?e.filter(e=>"*"!==e.path):null}};var e2=s(50273);let e5=()=>{let{pages:e}=e1(),t=(0,e0.u)(e=>e.setCurrentPage),s=(0,eI.My)().refreshPreview,a=(0,eI.f6)(e=>e.currentPath),l=(0,g.useRef)(null),[n,r]=(0,g.useState)(""),[i,o]=(0,g.useState)(!1),[c,d]=(0,g.useState)(""),[u,m]=(0,g.useState)(!1),{closeVisualEditsPanel:h}=(0,e2.S9)(),x=()=>{o(!1),r(e6(a)),m(!1)},f=function(e){let{onClickOutside:t,enabled:s=!0}=e,a=(0,g.useRef)(null);return(0,g.useEffect)(()=>{if(!s)return;let e=e=>{a.current&&e.target&&!a.current.contains(e.target)&&t()},l=()=>{a.current&&t()};return document.addEventListener("mousedown",e),window.addEventListener("blur",l),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("blur",l)}},[t,s]),a}({onClickOutside:x,enabled:i});(0,g.useEffect)(()=>{t(a||"/")},[a,t]),(0,g.useEffect)(()=>{r(e6(a))},[a]);let v=e6(a),b=e=>{if(!e)return"/";let t=e.replace(/\s+/g,"");return t.startsWith("/")?t:"/".concat(t)},j=(0,g.useMemo)(()=>Array.from(new Set((e||[]).map(e=>e.path))).map(e=>({value:e,label:e})),[e]),y=e=>{e&&(s(e===a?void 0:e),t(e),h(),o(!1))},w=n===a,N=j.some(e=>e.value===n);return(0,p.jsx)("div",{className:"relative min-w-0 flex-1 flex-grow",children:(0,p.jsxs)(eQ.J2,{open:i,onOpenChange:o,children:[(0,p.jsx)(eJ.I,{ref:l,value:n,onFocus:()=>o(!0),className:"h-auto rounded-none border-none p-0 shadow-none focus-visible:outline-none focus-visible:ring-0",placeholder:v,onKeyDown:e=>{if("Enter"===e.key)e.preventDefault(),y(b(c||n.trim()||"/")),x(),e.target.blur();else if("Escape"===e.key)x(),e.target.blur();else if("ArrowDown"===e.key||"ArrowUp"===e.key){var t;if(e.preventDefault(),0===j.length)return;let s=(j.findIndex(e=>e.value===c)+("ArrowDown"===e.key?1:-1)+j.length)%j.length;d((null===(t=j[s])||void 0===t?void 0:t.value)||"")}},onChange:e=>{i||o(!0);let t=e.target.value;r(t);let s=t!==e6(a);!u&&s&&m(!0)}}),(0,p.jsx)(eQ.xo,{className:"sr-only w-full"}),(0,p.jsx)(eQ.yk,{className:(0,eo.cn)("bg-popover p-0",!i&&"hidden"),onOpenAutoFocus:e=>e.preventDefault(),ref:f,sideOffset:8,style:{width:"calc(var(--radix-popover-trigger-width) + 32px)"},align:"start",alignOffset:-12,children:(0,p.jsxs)(e$.mY,{value:c,onValueChange:d,children:[(0,p.jsx)("div",{tabIndex:-1,className:"pointer-events-none hidden",inert:!0,children:(0,p.jsx)(e$.sZ,{value:u?n:""})}),(0,p.jsx)(e$.e8,{children:j.length>0&&(0,p.jsxs)(e$.fu,{children:[!w&&!N&&""!==n&&(0,p.jsx)(e$.di,{value:n,onSelect:y,keywords:[n],className:"w-full overflow-hidden",children:(0,p.jsx)("span",{className:"min-w-0 max-w-full overflow-hidden pr-2",children:n})}),j.map(e=>{let t=a===e.value,s=e4(a,e.value);return(0,p.jsxs)(e$.di,{value:e.value,onSelect:y,keywords:[e.label],children:[e.label,(0,p.jsx)(ee.Z,{name:"check",className:(0,eo.cn)("ml-auto",t||s?"opacity-100":"opacity-0")})]},e.value)})]})})]})})]})})};function e4(e,t){e.endsWith("/")&&(e=e.slice(0,-1)),t.endsWith("/")&&(t=t.slice(0,-1));let s=e.split("/"),a=t.split("/");if(s.length!==a.length)return!1;for(let e=0;e<s.length;e++){let t=s[e],l=a[e];if(t!==l&&!l.startsWith(":"))return!1}return!0}function e6(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new URL(e,"https://lovable.dev").pathname;return t&&"/"!==t?(t.endsWith("/")&&(t=t.slice(0,-1)),t):"/"}var e3=s(61922),e8=s(76906);let e7=()=>{let e=(0,$.iZ)(e=>e.project),t=(0,e3.aS)(e=>e.currentWorkspace),s=(null==t?void 0:t.disable_named_previews)?(0,e8.t)({projectId:null==e?void 0:e.id}):(null==e?void 0:e.name)?(0,e8.t)({projectName:null==e?void 0:e.name}):"#",a=!(null==e?void 0:e.preview_build_commit_sha),{buildFullPreviewUrl:l}=(0,eI.My)(),n=l({baseUrl:s,path:(0,eI.f6)(e=>e.currentPath)}),r=a?void 0:n;return{openPreview:e=>{if(a){e.preventDefault();return}e.altKey&&r&&(e.preventDefault(),window.open(r,"_blank"))},disabledState:a?{disabled:!0,reason:"There is no preview build to open yet"}:void 0,previewUrl:null!=r?r:void 0}},e9=e=>{let{openPreview:t,disabledState:s,previewUrl:a}=e7(),l=(0,y.Z)("md");return s?(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)("span",{children:(0,p.jsx)(J.z,{disabled:s.disabled,...e,children:(0,p.jsx)(ee.Z,{name:"arrow_outward",size:"small"})})})}),(0,p.jsx)(ei._v,{side:"bottom",align:"center",children:s.reason})]}):l?(0,p.jsx)(J.z,{...e,asChild:!0,children:(0,p.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",onClick:t,children:(0,p.jsx)(ee.Z,{name:"arrow_outward"})})}):(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(J.z,{...e,asChild:!0,children:(0,p.jsx)("a",{href:a,target:"_blank",rel:"noreferrer",onClick:t,children:(0,p.jsx)(ee.Z,{name:"arrow_outward",size:"small"})})})}),(0,p.jsx)(ei._v,{side:"bottom",align:"center",children:"Open preview in new tab"})]})},te=()=>{let{refreshPreview:e}=(0,eI.My)(),[t,s]=(0,g.useState)(!1);return(0,p.jsx)("div",{id:"preview-url-bar",className:"relative flex min-w-0 flex-1 flex-grow flex-row-reverse items-center gap-2 md:flex-auto md:flex-row",children:(0,p.jsxs)("div",{className:"relative flex h-8 min-w-[150px] flex-grow items-center justify-between gap-2 rounded-lg border border-input px-1 text-sm @xl:min-w-[250px]",children:[(0,p.jsx)(eY,{className:"hidden h-6 w-6 p-1 hover:bg-muted md:flex"}),(0,p.jsx)("div",{className:"flex-grow",children:(0,p.jsx)(e5,{})}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(e9,{variant:"ghost",size:"icon-xs",className:"h-6 w-6 p-1 hover:bg-muted"}),(0,p.jsx)(eR.Z,{label:"Refresh page",children:(0,p.jsx)(J.z,{variant:"ghost",size:"icon-xs",className:"h-6 w-6 p-1 hover:bg-muted",onClick:()=>{s(!0),e(),setTimeout(()=>{s(!1)},1e3)},disabled:t,children:(0,p.jsx)(ee.Z,{name:"refresh",size:"small",className:t?"animate-spin":""})})})]})]})})};var tt=s(1266),ts=s(92850),ta=s(76003),tl=s(78298),tn=s(60254),tr=s(12339),ti=s(33187),to=s(63420),tc=s(90962),td=s(15345),tu=s.n(td),tm=s(36512);function tp(e){var t;let{node:s,setCurrentFile:a,currentFile:l,level:n}=e,[r,i]=(0,g.useState)(n<1),{store:o}=(0,E.WR)(),c=o(e=>e.setMessage),d=o(e=>e.message),u=null===(t=s.children)||void 0===t?void 0:t.sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:"directory"!==e.type&&"directory"===t.type?1:e.name.localeCompare(t.name));return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:(0,eo.cn)("group flex cursor-pointer items-center px-2 py-1 text-sm hover:bg-primary/25",l===s.path&&"!bg-accent/50"),onClick:()=>{"directory"===s.type?i(!r):a(s.path)},role:"button",tabIndex:0,children:[(0,p.jsx)("div",{className:"mr-1 flex-shrink-0",style:{marginLeft:16*n},children:"directory"===s.type?(0,p.jsx)(ee.Z,{name:"chevron_right",size:"default",className:(0,eo.cn)("transition-transform duration-200",{"rotate-90":r})}):null}),"directory"!==s.type&&(0,p.jsx)("div",{className:"mr-1 h-4 w-4 flex-shrink-0",children:(0,p.jsx)(ee.Z,{name:"docs",size:"small"})}),(0,p.jsx)("span",{className:"flex-1 truncate",children:s.name}),(0,p.jsx)(J.z,{variant:"ghost",size:"icon",className:"ml-auto h-6 w-6 opacity-0 transition-opacity group-hover:opacity-100",onClick:e=>{e.stopPropagation(),c(d?"".concat(d," ").concat(s.path):s.path)},title:"Reference ".concat(s.type," in chat"),children:(0,p.jsx)(ee.Z,{name:"chat_paste_go",size:"xsmall"})})]}),"directory"===s.type&&r&&u&&(0,p.jsx)("div",{children:u.map(e=>(0,p.jsx)(tp,{node:e,setCurrentFile:a,currentFile:l,level:n+1},e.path))})]})}function th(e){let{setCurrentFile:t,code:s,currentFile:a}=e,l=(function(e){let t=[];return e.forEach(e=>{let[s]=e,a=s.split("/"),l=t;a.forEach((e,t)=>{let s=t===a.length-1,n=l.find(t=>t.name===e),r=a.slice(0,t+1).join("/");if(n)s||(l=n.children);else{let t={name:e,path:r,type:s?"file":"directory",...s?{}:{children:[]}};l.push(t),s||(l=t.children)}})}),t})(s).sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:"directory"!==e.type&&"directory"===t.type?1:e.name.localeCompare(t.name));return(0,p.jsx)("div",{className:"overflow-x-auto p-2",children:l.map(e=>(0,p.jsx)(tp,{node:e,setCurrentFile:t,currentFile:a,level:0},e.path))})}let tx=["package-lock.json","yarn.lock","pnpm-lock.yaml",".map",".min.js",".min.css","tailwind.config.lov.json","bun.lockb"];function tf(e){let{code:t,onSelectResult:s}=e,a=(0,tn.A7)(e=>e.searchQuery),l=(0,tn.A7)(e=>e.setSearchQuery),n=(0,tn.A7)(e=>e.expandedSearchFiles),r=(0,tn.A7)(e=>e.setExpandedSearchFiles),i=function(e,t){let[s,a]=(0,g.useState)(e);return(0,g.useEffect)(()=>{let t=setTimeout(()=>{a(e)},300);return()=>{clearTimeout(t)}},[e,300]),s}(a,0),o=(0,g.useMemo)(()=>{if(!i||i.length<2)return[];let e=[],s=i.toLowerCase(),a=0;for(let[l,n]of t){if("string"!=typeof n||tx.some(e=>l.includes(e))||n.length>1048576)continue;if(a>=500)break;let t=n.split("\n"),r=[];for(let e=0;e<t.length;e++){let l=t[e],n=l.toLowerCase(),o=0;for(;o<n.length&&r.length<50;){let t=n.indexOf(s,o);if(-1===t)break;let c=Math.max(0,t-40),d=Math.min(l.length,t+i.length+40),u=l.substring(c,d),m=u.trim(),p=u.indexOf(m);r.push({line:e+1,column:t+1,lineContent:m,matchStart:t-c-p,matchEnd:t-c+i.length-p}),a++,o=t+i.length}}r.length>0&&e.push({path:l,matches:r})}return e},[t,i]);(0,g.useEffect)(()=>{o.length>0&&o.length<=5&&r(new Set(o.map(e=>e.path)))},[o,r]);let c=(0,g.useCallback)(e=>{let t=new Set(n);t.has(e)?t.delete(e):t.add(e),r(t)},[n,r]),d=o.reduce((e,t)=>e+t.matches.length,0);return(0,p.jsxs)("div",{className:"flex h-full flex-col",children:[(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)(eJ.I,{placeholder:"Search in files...",value:a,onChange:e=>l(e.target.value),className:"h-9",autoFocus:!0}),a&&i&&(0,p.jsxs)("div",{className:"mt-2 px-2 text-xs text-muted-foreground",children:[d," result",1!==d?"s":""," in"," ",o.length," file",1!==o.length?"s":"",d>=500&&" (limited)"]})]}),(0,p.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[a!==i&&a.length>=2&&(0,p.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Searching..."}),0===o.length&&i.length>=2&&a===i&&(0,p.jsxs)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:['No results found for "',i,'"']}),o.map(e=>{let t=n.has(e.path);return(0,p.jsxs)("div",{className:"border-b",children:[(0,p.jsxs)("button",{className:"flex w-full items-center gap-1 px-3 py-2 text-left hover:bg-accent",onClick:()=>c(e.path),children:[(0,p.jsx)(ee.Z,{name:"chevron_right",size:"small",className:(0,eo.cn)("transition-transform duration-100 ease-in-out",t&&"rotate-90")}),(0,p.jsx)("span",{className:"flex-1 truncate text-sm font-medium",children:e.path}),(0,p.jsx)("span",{className:"text-xs text-muted-foreground",children:e.matches.length})]}),t&&(0,p.jsx)("div",{className:"pb-1",children:e.matches.map((t,a)=>(0,p.jsxs)("button",{className:"flex w-full items-start gap-2 px-6 py-1 text-left hover:bg-accent",onClick:()=>s(e.path,t.line),children:[(0,p.jsx)("span",{className:"min-w-[3ch] text-right text-xs text-muted-foreground",children:t.line}),(0,p.jsx)("span",{className:"flex-1 truncate font-mono text-xs",children:(0,p.jsx)(tg,{text:t.lineContent,start:t.matchStart,end:t.matchEnd})})]},"".concat(t.line,"-").concat(t.column,"-").concat(a)))})]},e.path)})]})]})}function tg(e){let{text:t,start:s,end:a}=e,l=t.substring(0,s),n=t.substring(s,a),r=t.substring(a);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:l}),(0,p.jsx)("span",{className:"bg-yellow-300 dark:bg-yellow-700",children:n}),(0,p.jsx)("span",{children:r})]})}var tv=s(46170);function tb(){let e=(0,eM.hO)(e=>{var t;return null===(t=e.projectWorkspace)||void 0===t?void 0:t.plan});return(0,tv.XB)(e)}var tj=s(74494);let ty=e=>{let{editorViewRef:t,targetFileAndLineRange:s,currentFile:a}=e,l=(0,g.useRef)(null),n=(0,g.useCallback)(()=>{if(!t.current||!l.current)return;let e=t.current,s=l.current;e.state.doc.lines>0&&s.startLine<=e.state.doc.lines&&((0,tj.P)(e,s.startLine,s.endLine),l.current=null)},[t]);return(0,g.useEffect)(()=>{if(!s||s.filePath!==a){l.current=null;return}l.current=s,t.current&&n()},[s,a,n,t]),{performHighlight:n}};function tw(e){let{}=e,[t,s]=(0,g.useState)(!1),{setActiveView:a}=(0,O.pE)(),l=(0,W.D)(),{syncCode:n,hasUnsavedChanges:r,enableServer:i}=(0,to.v)(),o=(0,tn.A7)(e=>e.clearPendingChanges),{snapshot:c}=(0,tn.ag)(),{openSettings:d}=(0,ej.r)(),u=tb(),m=(0,g.useCallback)(async()=>{s(!0);try{let e=c.getPendingChanges();S.ZP.capture(R.SL.CODE_EDITOR.SAVED,{projectId:l,editedFiles:e}),await n(e,{commitMessage:"Code edited in Lovable Code Editor"}),o(),v.Am.success("Changes saved"),a("preview")}finally{s(!1)}i()},[o,i,l,a,c,n]),h=(0,g.useCallback)(()=>{S.ZP.capture(R.SL.CODE_EDITOR.DISCARDED,{projectId:l}),o()},[o,l]);return u?(0,p.jsx)(eZ.M,{children:r&&(0,p.jsxs)(eF.E.div,{initial:{y:"150%"},animate:{y:0},exit:{y:"150%"},transition:{type:"spring",duration:.15,bounce:.25},className:"flex w-full items-center justify-end gap-2",children:[(0,p.jsx)("div",{className:"text-sm text-foreground",children:"You have unsaved changes"}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(J.z,{variant:"secondary",size:"sm",onClick:h,disabled:t,children:"Discard"}),(0,p.jsx)(J.z,{variant:"affirmative",size:"sm",onClick:m,loading:t,disabled:t,children:"Save"})]})]})}):(0,p.jsxs)("div",{className:"flex items-center gap-1 text-center text-sm text-muted-foreground",children:[(0,p.jsx)("span",{children:"Read Only. To use the code editor, "}),(0,p.jsx)("span",{className:"cursor-pointer font-medium text-affirmative-primary hover:text-affirmative-primary/80",onClick:()=>d("billing"),children:"upgrade to a paid plan."})]})}let tN={history:tt.cE},tE=["tailwind.config.lov.json","package-lock.json","bun.lockb","vite-env.d.ts"],tk=(e,t)=>e.filter(e=>{let[s]=e;return!tE.some(e=>s.includes(e))&&(!t||s.toLowerCase().includes(t.toLowerCase()))}),tC=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=(0,P.aK)(e=>Object.keys(e.edits||{}).length),{data:a,isFetching:l,refetch:n}=(0,ts.a)(ti.W.sourceCode({projectId:e,enabled:t}));return(0,g.useEffect)(()=>{s>0&&!l&&n().catch(t=>{T.logging.error("Error refetching source code",{error:t,projectId:e})})},[s,n]),(0,g.useMemo)(()=>{var e;return null==a?void 0:null===(e=a.files)||void 0===e?void 0:e.filter(e=>{let{binary:t}=e;return!t}).map(e=>{let{name:t,contents:s}=e;return[t,s]})},[a])};function t_(e){let{projectId:t}=e,{code:s,hasInitialCode:a,addPendingChange:l}=(0,to.v)(),{currentFile:n,setCurrentFile:r,states:i,setStates:o,openTabs:c,setOpenTabs:d,targetFileAndLineRange:u}=(0,tm.r)(),m=(0,tn.A7)(e=>e.pendingChanges),h=(0,g.useRef)(null),x=tC(t,!a),f=(0,g.useMemo)(()=>a?s:x,[x,a,s]),v=null==f?void 0:f.length;(0,g.useEffect)(()=>{if(!u||!(null==f?void 0:f.length))return;let e=f.find(e=>{let[t]=e;return t===u.filePath});e&&r(e[0])},[u,f,r]),(0,g.useEffect)(()=>{if(n||!v||u)return;let e=null==f?void 0:f.find(e=>{let[t,s]=e;return t.endsWith("pages/Index.tsx")});e&&r(e[0])},[v,n,u,f,r]);let{performHighlight:b}=ty({editorViewRef:h,targetFileAndLineRange:u,currentFile:n}),j=tb(),y=(0,g.useMemo)(()=>{var e;if(n)return n in m?m[n]:null==f?void 0:null===(e=f.find(e=>{let[t,s]=e;return t===n}))||void 0===e?void 0:e[1]},[f,n,m]),[w,N]=(0,g.useState)(""),E=(0,tn.A7)(e=>e.sidebarTab),k=(0,tn.A7)(e=>e.setSidebarTab),[C,_]=(0,g.useState)(null),[S,T]=(0,g.useState)(null),R=(0,g.useMemo)(()=>tk(null!=f?f:[],w),[f,w]),{startLiveMode:I}=(0,eI.My)();(0,g.useEffect)(()=>{n&&!c.includes(n)&&d([...c,n])},[n,c,d]);let D=(0,g.useCallback)((e,t)=>{e&&(l({path:e,content:t}),I())},[l,I]),P=(0,g.useCallback)((e,t)=>{r(e),_(t)},[r]);(0,g.useEffect)(()=>{if(S&&null!==C&&n){let e=()=>{let e=S.state.doc;if(e.length>0){let t=e.line(Math.min(C,e.lines));return S.dispatch({scrollIntoView:!0,selection:{anchor:t.from}}),_(null),!0}return!1};if(e())return;let t=0,s=setInterval(()=>{t++,(e()||t>=10)&&clearInterval(s)},100);return()=>clearInterval(s)}},[S,C,n]),(0,g.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&e.shiftKey&&"f"===e.key&&(e.preventDefault(),k("search"))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let{resolvedTheme:O}=(0,tl.F)(),A="dark"===O?tc.Lm:tc.C0,z=(0,e_.qT)();return(0,p.jsxs)("div",{className:"relative flex h-full w-full",children:[(0,p.jsxs)("div",{className:"relative flex h-full w-64 flex-shrink-0 flex-grow-0 flex-col border-r border-border",children:[(0,p.jsxs)(tr.mQ,{value:E,onValueChange:e=>{("files"===e||"search"===e)&&k(e)},className:"flex h-full flex-col",children:[(0,p.jsxs)(tr.dr,{className:"m-2 grid w-[calc(100%-1rem)] grid-cols-2",children:[(0,p.jsxs)(tr.SP,{value:"files",className:"gap-1",children:[(0,p.jsx)(ee.Z,{name:"document_search",size:"small"}),"Files"]}),(0,p.jsxs)(tr.SP,{value:"search",className:"gap-1",children:[(0,p.jsx)(ee.Z,{name:"search",size:"small"}),"Search"]})]}),(0,p.jsxs)(tr.nU,{value:"files",className:"mt-0 flex-1 overflow-y-auto pb-12",children:[(0,p.jsx)("div",{className:"p-2",children:(0,p.jsx)(eJ.I,{placeholder:"Search files",value:w,onChange:e=>N(e.target.value)})}),v?(0,p.jsx)(th,{setCurrentFile:r,currentFile:n,code:R}):(0,p.jsx)("div",{className:"flex items-center justify-center pb-16",children:(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Starting Live Preview..."})})]}),(0,p.jsx)(tr.nU,{value:"search",className:"mt-0 flex-1 overflow-y-auto",children:(0,p.jsx)(tf,{code:null!=f?f:[],onSelectResult:P})})]}),z&&(0,p.jsxs)("div",{className:"absolute bottom-0 flex min-h-12 w-full flex-shrink-0 items-center gap-2 border-t border-border bg-background p-2",children:[(0,p.jsx)(eS,{}),(0,p.jsx)("span",{className:"text-sm text-muted-foreground",children:"Download codebase"})]})]}),(0,p.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden bg-muted p-0",children:[(0,p.jsx)(tr.mQ,{value:n||"",onValueChange:r,className:(0,eo.cn)({hidden:!n}),children:(0,p.jsx)(tr.dr,{className:"h-auto w-full justify-start overflow-x-auto rounded-none bg-background p-0 scrollbar-hide",children:c.map(e=>(0,p.jsxs)(tr.SP,{value:e,className:"group relative rounded-none border-r px-2 pl-3 data-[state=active]:!bg-muted-active data-[state=active]:text-foreground hover:bg-muted/50","data-state":n===e?"active":"inactive",children:[(0,p.jsx)("span",{children:e}),(0,p.jsx)("button",{onClick:t=>{t.stopPropagation(),t.preventDefault(),d(c.filter(t=>t!==e)),n===e&&r(c.find(t=>t!==e)||null)},className:"ml-2 opacity-0 transition-opacity group-hover:opacity-100 group-data-[state=active]:opacity-100",children:(0,p.jsx)(ee.Z,{name:"close",className:"size-4"})})]},e))})}),(0,p.jsx)("div",{className:(0,eo.cn)("flex w-full flex-1 overflow-y-auto bg-muted",tu().editor),children:n&&(0,p.jsx)(ta.ZP,{readOnly:!j,initialState:i[n]?{json:i[n],fields:tN}:void 0,onChange:(e,t)=>{if(n){let e=t.state.toJSON(tN);o(t=>({...t,[n]:e}))}D(n,e)},onCreateEditor:e=>{T(e),h.current=e;let t=()=>{e.state.doc.lines>0?b():requestAnimationFrame(t)};t()},value:y,className:"flex-1 overflow-y-auto",theme:A,extensions:[...tc.A4,ta.tk.editable.of(!!j)]},n)})]})]})}let tS=()=>"dev-mode"===(0,O.Sl)(e=>e.activeView)?(0,p.jsx)(tw,{}):(0,p.jsx)(te,{});var tT=()=>{let e=(0,O.Sl)(e=>e.activeView),{setConsoleContentType:t,setActiveView:s}=(0,O.pE)(),{hasUnsavedChanges:a}=(0,to.v)(),l=(0,e2.UC)(e=>e.isVisualEditingActive),n=(0,e_.ty)(),r=a&&"seo"===e||l,i="seo"===e;return n?(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{className:r?"cursor-default":"cursor-pointer",children:(0,p.jsx)(J.z,{type:"button",variant:"outline",size:"icon-sm",onClick:()=>{s(i?"preview":"seo"),t(null),i||S.ZP.capture(R.Md.OPEN_TOP_MENU)},"aria-label":"Page Speed Insights",disabled:r,className:(0,eo.cn)("hidden bg-background shadow-none md:flex",{"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/90":i}),children:(0,p.jsx)(ee.Z,{name:"trending_up",className:"h-4 w-4"})})}),(0,p.jsx)(ei._v,{children:"Page Speed Insights"})]}):null},tR=()=>{let e=(0,O.Sl)(e=>e.activeView),{setConsoleContentType:t,setActiveView:s}=(0,O.pE)(),{hasUnsavedChanges:a}=(0,to.v)(),l=tb()?"Code mode":"Code viewer",n=(0,e2.UC)(e=>e.isVisualEditingActive),r="dev-mode"===e,i=a&&r||n&&!r;return(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{className:i?"cursor-default":"cursor-pointer",children:(0,p.jsx)(J.z,{type:"button",variant:"outline",size:"icon-sm",onClick:()=>{s(r?"preview":"dev-mode"),t(null),S.ZP.capture(R.SL.CODE_EDITOR.DEV_MODE_TOGGLE_PRESSED,{devModeIsActive:r,new_tab:r?"code":"preview"})},"aria-label":l,disabled:i,className:(0,eo.cn)("hidden bg-background shadow-none md:flex",{"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/90":r}),children:(0,p.jsx)(ee.Z,{name:"code",className:"h-4 w-4"})})}),(0,p.jsx)(ei._v,{children:n&&!r?"Exit visual editor to use code mode":a&&r?"Please save or discard your changes":l})]})};let tI=()=>{let e=(0,e_.ty)();return(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[(0,p.jsx)(tR,{}),e&&(0,p.jsx)(tT,{})]})};var tD=s(62380),tP=s(38343),tO=s(6809);let tA=e=>{let{title:t,description:s,badge:a}=e;return(0,p.jsxs)("div",{className:"flex flex-col gap-1 p-4 pb-2",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,p.jsx)("h3",{className:"mt-0 leading-none",children:t}),a]}),s&&(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:s})]})},tz=e=>{let{href:t}=e;return(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm",asChild:!0,children:(0,p.jsx)("a",{href:t,target:"_blank",className:"text-muted-foreground",children:(0,p.jsx)(ee.Z,{name:"help",size:"small"})})})},tL=e=>[{name:"Manage Users",href:"https://supabase.com/dashboard/project/".concat(e,"/auth/users"),icon:"group"},{name:"SQL Editor",href:"https://supabase.com/dashboard/project/".concat(e,"/editor"),icon:"database"},{name:"Edge Functions",href:"https://supabase.com/dashboard/project/".concat(e,"/functions"),icon:"cloud"},{name:"Manage Secrets",href:"https://supabase.com/dashboard/project/".concat(e,"/settings/functions"),icon:"key"}];var tM=e=>{var t;let{disabled:s=!1}=e,[a,l]=(0,g.useState)(!1),{openSettings:n}=(0,ej.r)(),r=(0,tO.N)(),i=tL(null!==(t=null==r?void 0:r.id)&&void 0!==t?t:""),o=(0,$.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.enabled_integrations}),c=null==o?void 0:o.includes("supabase_exp");return c?(0,p.jsx)(tZ,{disabled:s,onClick:()=>{n("supabase"),l(!1)}}):(0,p.jsxs)(ey.h_,{open:a,onOpenChange:l,children:[(0,p.jsx)(ey.$F,{disabled:s,children:(0,p.jsx)(tZ,{disabled:s})}),(0,p.jsx)(ey.AW,{collisionPadding:8,className:"z-[1001] min-w-[300px] max-w-[300px] border border-border bg-background p-0",children:r?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tA,{title:"Supabase",badge:(0,p.jsx)(tP.n,{status:r.status})}),(0,p.jsx)(ey.VD,{}),(0,p.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:(0,p.jsx)(ey.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:"https://supabase.com/dashboard/project/".concat(r.id),target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(et.xR.Supabase,{className:"h-4 w-4"}),(0,p.jsx)("span",{children:r.name}),(0,p.jsx)(ee.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})})}),(0,p.jsx)(ey.VD,{}),(0,p.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:i.map(e=>(0,p.jsx)(ey.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:e.href,target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(ee.Z,{name:e.icon,className:"h-4 w-4"}),(0,p.jsx)("span",{children:e.name}),(0,p.jsx)(ee.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})},e.name))}),(0,p.jsx)(ey.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tz,{href:"https://docs.lovable.dev/integrations/supabase"}),(0,p.jsx)(J.z,{variant:"default",size:"sm",onClick:()=>{n("supabase"),l(!1)},children:"Configure"})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tA,{title:c?"Backend":"Supabase",description:"Integrate user authentication, data storage, and backend capabilities."}),(0,p.jsx)(ey.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tz,{href:"https://docs.lovable.dev/integrations/supabase"}),(0,p.jsxs)(J.z,{onClick:()=>{n("supabase"),l(!1)},size:"sm",children:[(0,p.jsx)(et.xR.Supabase,{className:"h-4 w-4"}),"Connect Supabase"]})]})]})})]})};let tZ=e=>{let{onClick:t,disabled:s=!1}=e;return(0,p.jsx)(eR.Z,{label:"Manage Supabase",children:(0,p.jsx)(J.z,{id:"supabase-dropdown",className:"",variant:"secondary",size:"icon-sm",onClick:t,disabled:s,children:(0,p.jsx)(tD.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"})})})};var tF=s(32129),tU=s(23590),tK=s(4310),tV=s(27058),tW=e=>{var t,s,a,l;let{disabled:n=!1}=e,r=(0,$.iZ)(e=>e.project),i=(null==r?void 0:r.name)?(0,tK.c_)(r.github_repo_name,null==r?void 0:null===(t=r.github_owner)||void 0===t?void 0:t.name):"#",o=(null==r?void 0:null===(s=r.github_owner)||void 0===s?void 0:s.name)+"/"+(null==r?void 0:r.github_repo_name),{openSettings:c}=(0,ej.r)(),d=(null==r?void 0:null===(a=r.github_owner)||void 0===a?void 0:a.name)&&r.github_owner.name!==tK.aR,[u,m]=(0,g.useState)(!1);return(0,p.jsxs)(ey.h_,{open:u,onOpenChange:m,children:[(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(ey.$F,{asChild:!0,disabled:n,children:(0,p.jsxs)(J.z,{variant:"secondary",size:"icon-sm",className:"gap-1.5",children:[(0,p.jsx)(et.xR.GitHub,{className:"size-4"}),(0,p.jsx)("span",{className:"hidden",children:(null==r?void 0:null===(l=r.github_owner)||void 0===l?void 0:l.name)&&!(r.github_owner.name!==tK.aR)?"Sync with GitHub":"Manage GitHub"})]})})}),(0,p.jsx)(ei._v,{children:"Sync your project to GitHub"})]}),(0,p.jsx)(ey.AW,{className:"z-[1001] min-w-[300px] max-w-[300px] border border-border bg-background p-0",collisionPadding:8,onCloseAutoFocus:e=>e.preventDefault(),children:r&&!d?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tA,{title:"GitHub",description:"Sync your project 2-way with GitHub to collaborate at source."}),(0,p.jsx)(ey.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tz,{href:"https://docs.lovable.dev/integrations/git-integration"}),(0,p.jsxs)(J.z,{variant:"default",size:"sm",onClick:()=>c("github"),children:[(0,p.jsx)(et.xR.GitHub,{className:"size-4"}),(0,p.jsx)("span",{children:"Connect GitHub"})]})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tA,{title:"GitHub",badge:(0,p.jsx)(tV.H,{status:"connected"})}),(0,p.jsx)(ey.VD,{}),(0,p.jsx)("div",{className:"px-2 py-0.5",children:(0,p.jsx)(ey.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:i,target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(et.xR.GitHub,{className:"h-4 w-4"}),(0,p.jsx)("span",{children:o}),(0,p.jsx)(ee.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})})}),(0,p.jsx)(ey.VD,{}),(0,p.jsx)("div",{className:"px-2 py-0.5",children:(0,p.jsx)(ey.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:"https://github.dev/".concat(o,"?").concat((null==r?void 0:r.main_branch)?"tree/".concat(null==r?void 0:r.main_branch):""),target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(ee.Z,{name:"code",size:"small"}),(0,p.jsx)("span",{children:"Edit in VS Code"}),(0,p.jsx)(ee.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})})}),(0,p.jsx)(ey.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tz,{href:"https://docs.lovable.dev/integrations/git-integration"}),(0,p.jsx)(J.z,{variant:"default",size:"sm",onClick:()=>{c("github"),m(!1)},children:"Configure"})]})]})})]})},tB=s(63391),tG=s(27648),tH=e=>{let{children:t}=e;return(0,p.jsx)("div",{className:"avatars group flex flex-row items-center -space-x-3 md:-space-x-2",children:t})},tq=s(70335),tX=s(17292),tY=s(59625);let t$=()=>(0,tY.Ue)(()=>({userPresences:{}})),tJ=(0,g.createContext)(null),tQ=e=>{let{children:t,projectId:s}=e,{canRead:a}=(0,_.t)(),l=(0,g.useRef)();l.current||(l.current=t$());let{authUser:n,authState:r}=(0,b.Eu)(),{isSuccess:i}=(0,ts.a)(ti.W.presence({projectId:s,authUser:n,enablePresence:a}));(0,g.useEffect)(()=>{if(!s||!n||!i||!a)return;let e=l.current,t=(0,tX.iH)(eH.Fs,"status/".concat(s)),r=(0,tX.jM)(t,t=>{let s=t.val();if(s){let t={};Object.entries(s).filter(e=>{let[t,s]=e;return s.lastSeen&&s.id!==n.uid}).forEach(e=>{let[s,{lastSeen:a,username:l,displayName:n,photoURL:r,id:i,email:o}]=e,c=new Date(a);t[s]={lastSeen:c,id:i,username:l,displayName:n||"",photoURL:r,email:o}}),e.setState({userPresences:t})}else e.setState({userPresences:{}})},e=>{T.logging.error("Error listening to presence updates",{projectId:s,error:e})});return()=>{r()}},[s,n,r,i,a]);let o={store:l.current};return(0,p.jsx)(tJ.Provider,{value:o,children:t})};var t0=s(32800),t1=s(6512),t2=s(45659);let t5={ADD_EDITOR:"claim.add_editor",ADD_ADMIN:"claim.add_admin",REMOVE_EDITOR:"claim.remove_editor",REMOVE_ADMIN:"claim.remove_admin",MANAGE_MAGIC_LINK:"claim.manage_magic_link",INVITE:"claim.invite"};class t4{generateClaims(){let e=new Set;return this.isFreeWorkspace?(e.add(t5.ADD_EDITOR),e.add(t5.REMOVE_EDITOR),e.add(t5.MANAGE_MAGIC_LINK),e.add(t5.INVITE)):this.currentUserIsProjectOwner?(e.add(t5.ADD_EDITOR),e.add(t5.ADD_ADMIN),e.add(t5.REMOVE_EDITOR),e.add(t5.REMOVE_ADMIN),e.add(t5.MANAGE_MAGIC_LINK),e.add(t5.INVITE)):this.isProjectAdmin&&(e.add(t5.ADD_EDITOR),e.add(t5.REMOVE_EDITOR),e.add(t5.MANAGE_MAGIC_LINK),e.add(t5.INVITE)),e}hasClaim(e){return this.claims.has(e)}canInvite(){return this.hasClaim(t5.INVITE)}canManageMagicLink(){return this.hasClaim(t5.MANAGE_MAGIC_LINK)}canEditRole(){var e;return!this.isFreeWorkspace&&((null===(e=this.collaborator)||void 0===e?void 0:e.access_level)==="admin"?this.hasClaim(t5.ADD_ADMIN):this.hasClaim(t5.ADD_EDITOR))}canRemoveRole(){var e;return this.isCurrentUser?!this.isCollaboratorProjectOwner:(null===(e=this.collaborator)||void 0===e?void 0:e.access_level)==="admin"?this.hasClaim(t5.REMOVE_ADMIN):this.hasClaim(t5.REMOVE_EDITOR)}isOwner(){return this.isCollaboratorProjectOwner}canManageCollaborator(){return!this.isCollaboratorProjectOwner&&(this.canEditRole()||this.canRemoveRole())}constructor(e){var t,s;this.context=e;let{collaborator:a,currentUserId:l,projectOwnerId:n}=e;this.isCurrentUser=(null==a?void 0:a.id)===l,this.isCollaboratorProjectOwner=n===(null==a?void 0:a.id),this.currentUserIsProjectOwner=l===n,this.isFreeWorkspace=null!==(t=e.isFreeWorkspace)&&void 0!==t&&t,this.isProjectAdmin=null!==(s=e.isProjectAdmin)&&void 0!==s&&s,this.collaborator=a,this.claims=this.generateClaims()}}let t6=e=>new t4(e),t3=e=>(0,g.useMemo)(()=>t6(e),[e.collaborator,e.currentUserId,e.projectOwnerId,e.isFreeWorkspace,e.isProjectAdmin]);var t8=s(82157),t7=s(20984);let t9={owner:"Owner",admin:"Admin",write:"Editor",read:"Viewer"};var se=e=>{let{collaborator:t,onRoleChange:s,onRemove:a,permissions:l}=e,n=!t.joined_at,r=l.canManageCollaborator(),i=l.isOwner()?"owner":t.access_level,o=n?"Pending":t9[i],c=e=>{e!==t.access_level&&s(t.id,e)};return r?(0,p.jsxs)(ey.h_,{children:[(0,p.jsx)(ey.$F,{asChild:!0,children:(0,p.jsxs)(J.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",children:[o," ",(0,p.jsx)(ee.Z,{name:"keyboard_arrow_down",size:"small"})]})}),(0,p.jsxs)(ey.AW,{align:"end",children:[n&&(0,p.jsx)(t8.w,{label:"Pending",isSelected:!0,disabled:!0}),l.canEditRole()&&!n&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t8.w,{label:t9.admin,onClick:()=>c(t7.u.ADMIN),isSelected:i===t7.u.ADMIN}),(0,p.jsx)(t8.w,{label:t9.write,onClick:()=>c(t7.u.WRITE),isSelected:i===t7.u.WRITE})]}),l.canRemoveRole()&&(0,p.jsx)(t8.w,{label:"Remove",destructive:!0,onClick:()=>{a(t)}})]})]}):(0,p.jsx)(J.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",disabled:!0,children:o})},st=e=>{let{collaborator:t,onRoleChange:s,onRemove:a,permissionsContext:l}=e,{authUser:n}=(0,b.Eu)(),r=t.id===(null==n?void 0:n.uid),i=t3({...l,collaborator:t}),o=(0,p.jsx)(se,{collaborator:t,onRoleChange:s,onRemove:a,permissions:i});return(0,p.jsx)(t2.Q,{id:t.id||"",username:t.username||"",displayName:t.display_name,email:t.email||"",isCurrentUser:r,avatarClassName:"h-6 w-6",actionComponent:o,isInvited:!t.joined_at,showBadge:!1})};let ss=function(){let{copiedText:e="Copied!",resetDelay:t=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[s,a]=(0,g.useState)(!1),[l,n]=(0,g.useState)();return{copy:(0,g.useCallback)(async(s,l)=>{if(s)try{await navigator.clipboard.writeText(s),a(!0),l?(n(l),n(e),setTimeout(()=>{n(l),a(!1)},t)):setTimeout(()=>{a(!1)},t)}catch(e){(0,w.Eo)(e)}},[e,t]),isCopied:s,buttonText:l}},sa=e=>{let{projectId:t}=e,{createSecretLink:s,isCreatingSecretLink:a}=function(){let e=(0,h.NL)(),{mutate:t,isPending:s}=(0,x.D)({mutationFn:async e=>{let{projectId:t}=e;return(0,N.SJ)().post("/projects/".concat(t,"/magic-codes"),{access_level:"write"})},onSuccess:async(t,s)=>{let a=ti.W.magicCode({projectId:s.projectId}).queryKey;t.id&&e.setQueryData(a,{id:t.id}),v.Am.success("Secret link created")},onError:e=>{(0,w.Eo)(e)},onSettled:(t,s,a)=>{e.invalidateQueries({queryKey:ti.W.magicCode({projectId:a.projectId}).queryKey})}});return{createSecretLink:t,isCreatingSecretLink:s}}(),{deactivateSecretLink:l,isDeactivatingSecretLink:n}=function(){let e=(0,h.NL)(),{mutate:t,isPending:s}=(0,x.D)({mutationFn:async e=>{let{projectId:t,magicCodeId:s}=e;return(0,N.SJ)().delete("/projects/".concat(t,"/magic-codes/").concat(s))},onSuccess:async(t,s)=>{let a=ti.W.magicCode({projectId:s.projectId}).queryKey,l=e.getQueryData(a);(null==l?void 0:l.id)===s.magicCodeId&&e.setQueryData(a,{id:null})},onError:e=>{(0,w.Eo)(e)},onSettled:(t,s,a)=>{e.invalidateQueries({queryKey:ti.W.magicCode({projectId:a.projectId}).queryKey})}});return{deactivateSecretLink:t,isDeactivatingSecretLink:s}}(),{copy:r,buttonText:i}=ss({copiedText:"Copied!",resetDelay:1500}),{data:o,isLoading:c}=(0,ts.a)(ti.W.magicCode({projectId:t})),d=(0,g.useMemo)(()=>(null==o?void 0:o.id)?"".concat(window.location.origin,"/projects/").concat(t,"?magic_link=").concat(o.id):null,[t,o]),u=async()=>{try{S.ZP.capture(R.SL.COLLABORATION.SECRET_LINK_CREATED),s({projectId:t})}catch(e){(0,w.Eo)(e)}},m=(0,g.useCallback)(()=>{d&&(S.ZP.capture(R.SL.COLLABORATION.SECRET_LINK_COPIED),r(d,"Copy"))},[r,d]);if(c)return(0,p.jsxs)("div",{className:"flex animate-pulse gap-5",children:[(0,p.jsx)("div",{className:"h-5 w-5 rounded bg-muted"}),(0,p.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,p.jsx)("div",{className:"h-4 w-2/3 rounded bg-muted"}),(0,p.jsx)("div",{className:"h-3 w-full rounded bg-muted"})]}),(0,p.jsx)("div",{className:"h-9 w-24 rounded bg-muted"})]});if(null==o?void 0:o.id){let e=async()=>{try{S.ZP.capture(R.SL.COLLABORATION.SECRET_LINK_REMOVED),l({projectId:t,magicCodeId:o.id})}catch(e){(0,w.Eo)(e)}};return(0,p.jsxs)("div",{className:"align-start flex gap-5",children:[(0,p.jsx)(ee.Z,{name:"link",size:"small"}),(0,p.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1",children:[(0,p.jsx)("div",{className:"text-sm font-medium leading-none",children:"Share invite link"}),(0,p.jsx)("div",{className:"text-xs leading-none text-muted-foreground",children:"Anyone with this link can edit"})]}),(0,p.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,p.jsx)(J.z,{variant:"link",onClick:e,disabled:n,children:"Remove"}),(0,p.jsx)(J.z,{variant:"secondary",onClick:m,children:i||"Copy"})]})]})}return(0,p.jsxs)("div",{className:"flex gap-5",children:[(0,p.jsx)(ee.Z,{name:"link",size:"small"}),(0,p.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1",children:[(0,p.jsx)("div",{className:"text-sm font-medium leading-none",children:"Create invite link"}),(0,p.jsx)("div",{className:"text-xs leading-none text-muted-foreground",children:"Anyone with this link can edit"})]}),(0,p.jsx)(J.z,{className:"ml-auto",variant:"outline",size:"sm",onClick:u,disabled:a,children:"Create"})]})};var sl=e=>{let{collaboratorName:t,onConfirm:s,onCancel:a}=e,l=async()=>{S.ZP.capture(R.SL.COLLABORATION.REMOVE_DIALOG_CONFIRMED),await s()};return(0,p.jsx)(eb.Z,{title:"Remove collaborator",targetName:t,descriptionTemplate:"Are you sure you want to remove ".concat(t," from this project? They will no longer have access to this project."),onConfirm:l,onCancel:()=>{S.ZP.capture(R.SL.COLLABORATION.REMOVE_DIALOG_CANCELLED),a()}})},sn=s(30438);let sr=e=>{let{workspace:t}=e,s=(0,tv.Ll)(null==t?void 0:t.plan);if(!(0,sn.c)())return null;let a={title:"",message:"",showContactUs:!1};switch(s){case"enterprise":case"biz":return null;case"pro":a.title="Upgrade to Enterprise",a.message="For more than 20 collaborators",a.showContactUs=!0;break;default:a.title="Upgrade to Pro",a.message="Permission control & more"}return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t1.Separator,{}),(0,p.jsxs)("div",{className:"mt-1 flex w-full flex-row items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[(0,p.jsx)("p",{className:"text-sm font-medium",children:a.title}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:a.message})]}),a.showContactUs?(0,p.jsx)(J.z,{asChild:!0,className:"font-medium",variant:"muted",size:"sm",children:(0,p.jsx)(tG.default,{href:"https://enterpriseform.lovable.app/",target:"_blank",children:"Contact Us"})}):(0,p.jsx)(tF.Z,{plan:null==t?void 0:t.plan,size:"sm",variant:"muted",className:"font-medium",children:"Upgrade"})]})]})};var si=s(69084);let so=e=>{let{onDialogClose:t}=e,s=(0,f.usePathname)(),{projectWorkspace:a,memberships:l}=(0,eM.hO)(e=>({projectWorkspace:e.projectWorkspace,memberships:e.memberships})),n=(0,eM.hO)(e=>!0===e.permissions.read);if(!a)return null;let r=l.length;return(0,p.jsxs)("div",{className:"flex flex-wrap items-center gap-3 py-1 md:flex-nowrap",children:[(0,p.jsx)(si.z,{workspace:a,className:"h-6 w-6"}),(0,p.jsx)("div",{className:"flex flex-shrink items-center gap-2 md:w-full",children:(0,p.jsx)("div",{className:"max-w-[200px] flex-shrink truncate text-sm font-medium",children:a.name})}),(0,p.jsx)("div",{className:"ml-auto flex items-center gap-1",children:n?(0,p.jsxs)(ey.h_,{children:[(0,p.jsx)(ey.$F,{asChild:!0,children:(0,p.jsxs)(J.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",children:[1===r?"1 member":"".concat(r," members"),(0,p.jsx)(ee.Z,{name:"keyboard_arrow_down",size:"small"})]})}),(0,p.jsx)(ey.AW,{align:"end",children:(0,p.jsx)(ey.Xi,{asChild:!0,children:(0,p.jsxs)(tG.default,{href:"".concat(s,"?settings=people"),onClick:t,className:"hover:bg-accent",children:[(0,p.jsx)(ee.Z,{name:"group",size:"small"}),"Manage Workspace Access"]})})})]}):(0,p.jsxs)(J.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",disabled:!0,children:["Workspace Access",(0,p.jsx)(ee.Z,{name:"lock",size:"small",className:"ml-1"})]})})]})},sc=e=>{var t,s,a,l;let{disabled:n=!1}=e,r=(0,V.z)(sl),[i,o]=(0,g.useState)(!1),{authUser:c}=(0,b.Eu)(),d=(0,eM.hO)(e=>e.projectWorkspace),u=(0,$.iZ)(e=>e.project),m=(0,Y.c)(e=>e.collaborators),f=(0,Y.c)(e=>e.hasFetchedCollaborators),{isProjectAdmin:v,isProjectOwner:j}=(0,_.t)(),y=!!j,E=(0,tv.XB)(null==d?void 0:d.plan),k=d&&(null==d?void 0:d.plan)=="free"||null==d,T={collaborator:void 0,currentUserId:null==c?void 0:c.uid,projectOwnerId:null!==(t=null==u?void 0:u.user_id)&&void 0!==t?t:"",isFreeWorkspace:!!k,isProjectAdmin:v},I=t3(T),D=(0,g.useMemo)(()=>({write:"Editor",admin:"Admin",owner:"Owner"}),[]),P=(0,g.useMemo)(()=>[{value:"admin",label:D.admin},{value:"write",label:D.write}],[D]),{inviteCollaborator:O,isInvitingCollaborator:A}=function(e){let{projectId:t}=e,s=(0,h.NL)(),{mutateAsync:a,isPending:l}=(0,x.D)({mutationFn:async e=>{let{email:s,inviteRole:a,projectOwnerId:l}=e;return(0,N.SJ)().post("/projects/".concat(t,"/collaborators"),{email:s,access_level:a})},onSuccess:(e,a)=>{let{projectOwnerId:l}=a,n=ti.W.collaborators({projectId:t,projectOwnerId:l}).queryKey,r=s.getQueryData(n)||[];r.some(t=>t.id===e.id)||s.setQueryData(n,(0,ti.b)({collaborators:[...r,e],projectOwnerId:l})),s.invalidateQueries({queryKey:C.iZ.collaborators(t)})},onError:e=>{(0,w.Eo)(e)}});return{inviteCollaborator:a,isInvitingCollaborator:l}}({projectId:null!==(s=null==u?void 0:u.id)&&void 0!==s?s:""}),{deleteCollaborator:z}=function(e){let{projectId:t}=e,s=(0,h.NL)(),{mutateAsync:a}=(0,x.D)({mutationFn:async e=>{let{collaboratorId:s}=e,a=(0,N.SJ)();await a.delete("/projects/".concat(t,"/collaborators/").concat(s))},onSuccess:(e,a)=>{let{projectOwnerId:l,collaboratorId:n}=a;X(t,n);let r=s.getQueryData(ti.W.collaborators({projectId:t,projectOwnerId:l}).queryKey);r&&s.setQueryData(C.iZ.collaborators(t),r.filter(e=>e.id!==n))},onError:e=>{(0,w.Eo)(e)},onSettled:(e,s,a)=>{X(t,a.collaboratorId)}});return{deleteCollaborator:a}}({projectId:null!==(a=null==u?void 0:u.id)&&void 0!==a?a:""}),{updateCollaboratorRole:L}=function(e){let{projectId:t}=e,s=(0,h.NL)(),{mutateAsync:a}=(0,x.D)({mutationFn:async e=>{let{collaboratorId:s,role:a,projectOwnerId:l}=e,n=(0,N.SJ)();await n.put("/projects/".concat(t,"/collaborators/").concat(s),{access_level:a})},onMutate:async e=>{await s.cancelQueries({queryKey:ti.W.collaborators({projectId:t,projectOwnerId:e.projectOwnerId}).queryKey});let a=s.getQueryData(ti.W.collaborators({projectId:t,projectOwnerId:e.projectOwnerId}).queryKey);return s.setQueryData(ti.W.collaborators({projectId:t,projectOwnerId:e.projectOwnerId}).queryKey,t=>{if(!t)return[];let s=t.map(t=>t.id===e.collaboratorId?{...t,access_level:e.role}:t);return(0,ti.b)({collaborators:s,projectOwnerId:e.projectOwnerId})}),{previousCollaborators:a,projectOwnerId:e.projectOwnerId}},onError:(e,a,l)=>{(0,w.Eo)(e),(null==l?void 0:l.previousCollaborators)&&s.setQueryData(ti.W.collaborators({projectId:t,projectOwnerId:l.projectOwnerId}).queryKey,l.previousCollaborators)},onSettled:(e,a,l)=>{X(t,l.collaboratorId),s.invalidateQueries({queryKey:ti.W.collaborators({projectId:t,projectOwnerId:l.projectOwnerId}).queryKey})}});return{updateCollaboratorRole:a}}({projectId:null!==(l=null==u?void 0:u.id)&&void 0!==l?l:""}),M=async e=>{let{emails:t,role:s}=e;if(!u)return{success:!1};let a=v&&!y?"write":s,l=0;for(let e of t)await O({email:e,inviteRole:a,projectOwnerId:u.user_id}),l++;return l>0&&S.ZP.capture(R.SL.COLLABORATION.COLLABORATOR_INVITED,{role:a,emailCount:l}),{success:l>0}},Z=async(e,t)=>{(null==u?void 0:u.id)&&(null==u?void 0:u.user_id)&&(S.ZP.capture(R.SL.COLLABORATION.COLLABORATOR_ROLE_CHANGED),await L({collaboratorId:e,role:t,projectOwnerId:u.user_id}))},F=e=>{u&&(S.ZP.capture(R.SL.COLLABORATION.COLLABORATOR_REMOVE_INITIATED),r({childProps:{collaboratorName:e.display_name,onConfirm:async()=>{await z({collaboratorId:e.id,projectOwnerId:u.user_id}),r(!1)},onCancel:()=>r(!1)}}))},U="Collaborators will use credits from the project owner's workspace (".concat(null==d?void 0:d.name,")"),K=(0,p.jsxs)(p.Fragment,{children:["Collaborators will use credits from the project owner's workspace (",null==d?void 0:d.name,"). If you need more than 20 collaborators,"," ",(0,p.jsx)(tG.default,{className:"underline",target:"_blank",href:"https://enterpriseform.lovable.app/",children:"contact us"}),"."]}),W=I.canInvite(),B=I.canManageMagicLink(),G=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,p.jsx)("p",{className:"text-lg font-medium",children:"Invite"}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:k?U:K})]}),W?(0,p.jsx)(t0.s,{onInvite:e=>{let{emails:t,role:s}=e;return M({emails:t,role:s})},isInviting:A,roleOptions:P,defaultRole:"write",canSelectRoles:!k,placeholder:"Invite by email"}):(0,p.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,p.jsx)(eJ.I,{disabled:!0,className:"h-8",placeholder:"Invite by email"}),(0,p.jsx)(J.z,{variant:"secondary",disabled:!0,children:"Invite"})]}),(0,p.jsxs)("div",{className:"flex flex-col gap-1",children:[E&&(0,p.jsx)(so,{onDialogClose:()=>o(!1)}),f?m.map(e=>(0,p.jsx)(st,{collaborator:e,onRoleChange:Z,onRemove:F,permissionsContext:T},e.id)):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(sd,{}),(0,p.jsx)(sd,{})]})]}),(null==u?void 0:u.id)&&B&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t1.Separator,{}),(0,p.jsx)(sa,{projectId:u.id})]}),(0,p.jsx)(sr,{workspace:null!=d?d:void 0})]});return(0,p.jsxs)(ey.h_,{open:i,onOpenChange:e=>{e&&S.ZP.capture(R.SL.COLLABORATION.DROPDOWN_OPENED),o(e)},children:[(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(ey.$F,{asChild:!0,disabled:n,children:(0,p.jsxs)(J.z,{variant:"secondary",size:"sm",className:(0,eo.cn)("relative flex h-[34px] w-[34px] shrink-0 rounded-full border bg-secondary p-0 shadow-none group-[.avatars]:border-background @2xl:w-auto @2xl:px-2.5 disabled:opacity-100 md:h-[30px] md:w-[30px] md:@2xl:w-auto"),children:[(0,p.jsx)(ee.Z,{name:"add",size:"small",className:"flex @2xl:hidden"}),(0,p.jsx)("span",{className:"hidden @2xl:flex",children:"Invite"})]})})}),(0,p.jsx)(ei._v,{children:"Invite collaborators"})]}),(0,p.jsx)(ey.AW,{className:"z-[1001] flex w-full max-w-[325px] flex-col gap-4 border border-border p-4 shadow-md md:max-w-[400px]",collisionPadding:8,onCloseAutoFocus:e=>e.preventDefault(),children:G})]})},sd=()=>(0,p.jsx)("div",{className:"flex flex-col gap-2",children:(0,p.jsxs)("div",{className:"flex items-center gap-3.5",children:[(0,p.jsx)("div",{className:"h-6 w-6 shrink-0 rounded-full bg-muted"}),(0,p.jsx)("div",{className:"h-4 w-20 rounded-sm bg-muted"}),(0,p.jsx)("div",{className:"h-4 w-32 rounded-sm bg-muted"})]})}),su=e=>e>new Date(Date.now()-3e5),sm=e=>{var t,s,a;let{hasUnsavedChanges:l}=e,{userPresences:n}=function(e){let{store:t}=function(){let e=(0,g.useContext)(tJ);if(!e)throw Error("usePresenceContext must be used within a PresenceProvider");return e}();return t(e)}(e=>e),r=(0,Y.c)(e=>e.collaborators),{userData:i}=(0,M.SE)(),{authUser:o}=(0,b.Eu)(),c=(0,y.Z)("md"),d=(0,g.useMemo)(()=>Object.values(n).filter(e=>e.lastSeen>new Date(Date.now()-864e5)).filter(e=>r.some(t=>t.id===e.id)).sort((e,t)=>e.lastSeen.getTime()-t.lastSeen.getTime()).slice(0,c?3:5),[n,c,r]),u=null!==(a=null!==(s=null==i?void 0:null===(t=i.attributes)||void 0===t?void 0:t.display_name)&&void 0!==s?s:null==o?void 0:o.email)&&void 0!==a?a:null==i?void 0:i.id;return(0,p.jsxs)(tH,{children:[i&&(0,p.jsx)(tG.default,{href:"/@".concat(i.id),target:"_blank",children:(0,p.jsx)(tq.Y,{user:i,isInteractive:!0,className:(0,eo.cn)("h-[34px] w-[34px] md:h-[26px] md:w-[26px]"),tooltipContent:(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsxs)("p",{className:"text-xs font-medium",children:[u," ",(0,p.jsx)("span",{className:"font-normal",children:"(You)"})]})})})},i.id),d.length>0&&(0,p.jsx)(p.Fragment,{children:d.map(e=>{var t;return(0,p.jsx)(tG.default,{href:"/@".concat(e.username||e.id),target:"_blank",children:(0,p.jsx)(tq.Y,{user:{id:e.id,username:null!==(t=e.username)&&void 0!==t?t:e.email},className:(0,eo.cn)("h-[34px] w-[34px] md:h-[26px] md:w-[26px]"),photoURL:e.photoURL,isInteractive:!0,tooltipContent:(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("p",{className:"text-xs font-medium",children:e.displayName||e.email||e.username}),(0,p.jsx)("p",{className:"text-xs text-muted",children:su(e.lastSeen)?"Now":(0,tB.Q)(e.lastSeen,{addSuffix:!0})})]})})},e.id)})}),(0,p.jsx)(sc,{disabled:l})]})};var sp=s(5978),sh=s(61062),sx=s(91576);let sf=e=>{let t=(0,W.D)(),[s,a]=(0,g.useState)(!1),{onClick:l,isPending:n}=(0,sx.hw)({projectId:t,errors:[{id:(0,z.Fd)(),type:sh.N.BUILD,error_message:"Production build error: ".concat(e||""),occurred_at:new Date().toISOString(),created_at:sp.EK.now()}]}),r=(0,A.bk)(e=>e.isSendChatMessageMutationPending);return{handleFix:(0,g.useCallback)(async()=>{if(!s)try{a(!0),await l(),v.Am.success("Fix attempt initiated successfully")}catch(e){console.error("Failed to initiate fix:",e),v.Am.error("Failed to initiate fix. Please try again.")}finally{a(!1)}},[l,s]),isFixing:n||r||s}},sg=e=>{let{open:t,onOpenChange:s,errorMessage:a,isBuildError:l=!1}=e,{handleFix:n,isFixing:r}=sf(a||""),i=(0,g.useCallback)(async()=>{await n(),s(!1)},[n,s]);return(0,p.jsx)(Q.Vq,{open:t,onOpenChange:s,children:(0,p.jsxs)(Q.cZ,{className:"text-center",children:[(0,p.jsxs)(Q.fK,{className:"flex flex-col gap-2 space-y-0",children:[(0,p.jsx)(Q.$N,{className:"text-2xl",children:"Oops! \uD83D\uDE22"}),(0,p.jsx)("p",{className:"",children:l?"We couldn't publish your site due to build errors.":"Something went wrong and we couldn't publish your site."}),a&&(0,p.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,p.jsx)("p",{className:"",children:l?"The build failed with the following errors:":"The error message:"}),(0,p.jsx)("p",{className:"font-medium text-destructive-primary",children:a})]})]}),(0,p.jsxs)(Q.cN,{className:"",children:[(0,p.jsx)(J.z,{variant:"outline",onClick:()=>s(!1),children:"Close"}),l&&(0,p.jsxs)(J.z,{onClick:i,variant:"default",size:"default",disabled:r,className:"flex items-center gap-2",children:[(0,p.jsx)(ee.Z,{name:"build",size:"small"}),r?"Fixing...":"Try to fix"]})]})]})})};function sv(e){let{projectUrl:t="",projectTitle:s="Embedded Project",projectId:a}=e,[l,n]=(0,g.useState)(t),[r,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{t&&(n(t),i(!0))},[t]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(Q.fK,{children:[(0,p.jsx)(Q.$N,{children:"Embed Project"}),(0,p.jsx)(Q.Be,{children:"Copy and paste the HTML code below to embed your project iframe."})]}),(0,p.jsx)("div",{className:"space-y-4",children:r&&l&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"space-y-2",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("pre",{className:"overflow-x-auto rounded-lg bg-muted p-4 text-sm",children:(0,p.jsx)("code",{children:'<iframe\n  style="width: 100%;"\n  height="569"\n  src="'.concat(l,'"\n  title="').concat(s,'"\n  frameBorder="0">\n</iframe>')})}),(0,p.jsx)(J.z,{onClick:()=>{let e='<iframe\n  style="width: 100%;"\n  height="569"\n  src="'.concat(l,'"\n  title="').concat(s,'"\n  frameBorder="0">\n</iframe>');navigator.clipboard.writeText(e),c(!0),S.LJ.capture(R.SL.EMBED.CODE_COPIED,{projectId:a,embedType:"iframe"}),setTimeout(()=>{c(!1)},2e3)},size:"sm",className:"absolute right-2 top-2",variant:"outline",children:o?"Copied!":"Copy"})]})})})})]})}let sb=e=>{var t;let{project:s,variant:a="dropdown",onActionComplete:l}=e,{setConsoleContentType:n,setActiveView:r}=(0,O.pE)(),{hasUnsavedChanges:i}=(0,to.v)(),o=(0,e2.UC)(e=>e.isVisualEditingActive),c=(0,e_.ty)(),d=(null==s?void 0:s.latest_commit_sha)===(null==s?void 0:null===(t=s.published_deployment)||void 0===t?void 0:t.commit_sha),u=!!(null==s?void 0:s.url),m=!u||i||o||!d,h=()=>{if(m)return;null==l||l();let e="dialog"===a?R.Md.OPEN_PUBLISH:R.Md.OPEN_TOP_MENU;S.ZP.capture(e,{hasProjectUrl:u,isLastEditPublished:d,hasUnsavedChanges:i,isVisualEditingActive:o,context:a}),r("seo"),n(null)};return c?"dropdown"===a?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ey.VD,{}),(0,p.jsx)("div",{className:"px-4 py-2",children:(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("span",{className:"text-sm text-foreground",children:"Page Speed Analysis"}),m&&(0,p.jsx)("span",{className:"text-xs text-muted-foreground",children:u?d?i?"Update first to run analysis on latest version":o?"Exit visual editor first":null:"Publish latest version first to run analysis":"Publish first to run analysis"})]}),(0,p.jsxs)(J.z,{variant:"secondary",size:"sm",disabled:m,onClick:h,children:[(0,p.jsx)(ee.Z,{name:"trending_up",size:"small"}),"Review"]})]})})]}):(0,p.jsxs)("div",{className:"flex items-center gap-3",children:[(0,p.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:(0,p.jsx)(ee.Z,{name:"trending_up",size:"small",className:"text-muted-foreground"})}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"text-sm font-medium",children:"Optimize for Search Engines"}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:"Check your SEO performance and get tips to improve visibility"})]}),(0,p.jsx)(J.z,{variant:"outline",size:"sm",onClick:h,disabled:m,className:"text-xs",children:"Review SEO"})]}):null},sj=e=>{let{projectUrl:t,projectTitle:s,projectId:a}=e;return(0,p.jsx)(Q.cZ,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,p.jsx)(sv,{projectUrl:t,projectTitle:s,projectId:a})})},sy=e=>{let{open:t,onOpenChange:s,project:a}=e,[l,n]=(0,g.useState)(!1),r=(0,e_.ty)(),i=(0,e_.X4)(),o=(0,V.z)(sj),c=null==a?void 0:a.url,d=async()=>{if(!l&&c)try{await navigator.clipboard.writeText(c),n(!0),setTimeout(()=>n(!1),2e3)}catch(e){v.Am.error("Failed to copy link")}},u=e=>{if(!c)return;let t="Check out what I just built with Lovable!",s=encodeURIComponent(c),a=encodeURIComponent(t),l={twitter:"https://twitter.com/intent/tweet?text=".concat(a,"&url=").concat(s),linkedin:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(s),reddit:"https://reddit.com/submit?url=".concat(s,"&title=").concat(a),discord:"https://discord.com/channels/@me"};if("discord"===e){navigator.clipboard.writeText("".concat(t," ").concat(c)),v.Am.success("Copied to clipboard! Paste it in your Discord channel.");return}let n=l[e];n&&window.open(n,"_blank","noopener,noreferrer")};return(0,p.jsx)(Q.Vq,{open:t,onOpenChange:s,children:(0,p.jsxs)(Q.cZ,{className:"max-w-sm",children:[(0,p.jsx)(Q.fK,{children:(0,p.jsx)(Q.$N,{className:"sr-only",children:"Project Published Successfully"})}),(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsx)("div",{className:"flex justify-start",children:(0,p.jsx)(et.xx,{className:"h-12"})}),(0,p.jsxs)("div",{className:"space-y-2",children:[(0,p.jsx)("h2",{className:"text-2xl font-medium",children:"You just shipped!"}),(0,p.jsx)("p",{className:"text-muted-foreground",children:"Let's share your work with the world"})]}),(0,p.jsx)("div",{className:"rounded-lg bg-muted px-3 py-1",children:(0,p.jsxs)("div",{className:"flex items-center gap-3",children:[(0,p.jsx)(ee.Z,{name:"link",size:"small",className:"text-muted-foreground"}),(0,p.jsx)(eJ.I,{value:c||"",readOnly:!0,className:"flex-1 border-none bg-transparent p-0 shadow-none focus-visible:ring-0",onFocus:e=>e.target.select()}),(0,p.jsx)(J.z,{variant:"outline",size:"sm",onClick:d,children:l?"Copied!":"Copy Link"})]})}),(0,p.jsxs)("div",{className:"space-y-3",children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Share with your loved ones:"}),(0,p.jsxs)("div",{className:"justify-left flex gap-4",children:[(0,p.jsx)("button",{onClick:()=>u("twitter"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on X (Twitter)",children:(0,p.jsx)(et.xR.X,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>u("linkedin"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on LinkedIn",children:(0,p.jsx)(et.xR.Linkedin,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>u("reddit"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on Reddit",children:(0,p.jsx)(et.xR.Reddit,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>u("discord"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on Discord",children:(0,p.jsx)(et.xR.Discord,{className:"h-4 w-4"})}),i&&(0,p.jsx)("button",{onClick:()=>{var e,t,l;S.LJ.capture(R.SL.EMBED.SUCCESS_DIALOG_CLICKED,{projectId:null==a?void 0:a.id,source:"publish_success_dialog"}),o({childProps:{projectUrl:null!==(e=null==a?void 0:a.url)&&void 0!==e?e:void 0,projectTitle:null!==(t=null==a?void 0:a.name)&&void 0!==t?t:void 0,projectId:null!==(l=null==a?void 0:a.id)&&void 0!==l?l:void 0}}),s(!1)},className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Get Embed Code",children:(0,p.jsx)(ee.Z,{name:"code",size:"small",className:"h-4 w-4"})})]})]}),r&&(0,p.jsx)("div",{className:"space-y-3 border-t pt-6",children:(0,p.jsx)(sb,{project:a,variant:"dialog",onActionComplete:()=>s(!1)})})]})]})})};var sw=s(78276);let sN=e=>{let{open:t,onOpenChange:s,onPublishAnyway:a,onReviewIssues:l,isReviewDisabled:n=!1,isReviewLoading:r=!1,reviewDisabledReason:i}=e;return(0,p.jsx)(Q.Vq,{open:t,onOpenChange:s,children:(0,p.jsxs)(Q.cZ,{children:[(0,p.jsxs)(Q.fK,{children:[(0,p.jsx)(Q.$N,{children:"Security Issues Found"}),(0,p.jsx)(Q.Be,{children:"Critical vulnerabilities in Supabase integration detected. Review them now to not risk leaking sensitive data or your secret keys."})]}),(0,p.jsxs)(Q.cN,{children:[(0,p.jsx)(J.z,{variant:"secondary",onClick:()=>{a(),s(!1)},children:"Publish anyway"}),(0,p.jsx)(sw.b,{showTooltip:!!i,tooltipContent:i,children:(0,p.jsx)(J.z,{variant:"affirmative",onClick:()=>{l(),s(!1)},disabled:n,loading:r,children:"Review Issues"})})]})]})})};var sE=s(9144),sk=s(95565);let sC=e=>{let{project:t}=e,{data:s,isLoading:a}=(0,sk.W)({projectId:null==t?void 0:t.id});return(null==t?void 0:t.id)&&(a||(null==s?void 0:s.is_used))?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ey.VD,{}),(0,p.jsx)("div",{className:"pb-2",children:a?(0,p.jsxs)("div",{className:(0,eo.cn)("mx-0 flex h-10 items-center gap-2 rounded-lg bg-muted px-2 md:mx-2 md:h-8"),children:[(0,p.jsx)("div",{className:"flex w-4 items-center justify-center",children:(0,p.jsx)(eU.O,{className:"h-1.5 w-1.5 rounded-full"})}),(0,p.jsx)(eU.O,{className:"h-3 max-w-48 flex-grow"})]}):(0,p.jsxs)("div",{className:"flex min-h-7 items-center gap-2 px-4 py-2",children:[(0,p.jsx)(ee.Z,{name:"smart_toy",size:"small",className:"text-green-600"}),(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[(0,p.jsx)("p",{className:"text-sm font-medium",children:"AI Gateway: Active"}),(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)("button",{type:"button",className:"inline-flex items-center justify-center rounded-sm p-0.5 text-muted-foreground hover:text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:(0,p.jsx)(ee.Z,{name:"help",size:"small"})})}),(0,p.jsx)(ei._v,{className:"max-w-xs",children:(0,p.jsx)("p",{children:"Lovable's AI Gateway provides secure API endpoints for your project to communicate with AI services. It handles authentication and rate limiting automatically."})})]})]}),(0,p.jsx)("div",{className:"ml-auto flex items-center",children:(0,p.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"})})]})})]}):null};var s_=s(93261),sS=s(74225),sT=s(10441);let sR=e=>{let{projectId:t,enabled:s}=e,{data:a,...l}=(0,ts.a)(sT.c.domains({projectId:null!=t?t:"",enabled:s&&!!t}));return{customDomains:a,...l}};var sI=s(24613),sD=s(10123);let sP=e=>{let{projectId:t}=e,s=(0,g.useMemo)(()=>(0,sD.HX)(),[]),{data:a,isLoading:l}=(0,ts.a)(ti.W.analytics({projectId:t,timePeriod:s})),n=null==a?void 0:a.timeSeries.visitors.total,{openSettings:r}=(0,ej.r)(),i=1===n?"Visitor":"Visitors",o=void 0!==n?(0,sI.ZI)(n):"0";return(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsxs)("div",{className:"flex cursor-pointer items-center gap-1 transition-opacity duration-150 ease-in-out hover:opacity-75",onClick:()=>r("analytics"),children:[(0,p.jsx)(ee.Z,{name:"bid_landscape",size:"small"}),l?(0,p.jsx)(eU.O,{className:"h-4 w-16"}):(0,p.jsxs)("p",{className:"text-sm",children:[(0,p.jsx)("span",{children:o})," ",(0,p.jsx)("span",{children:i})]})]})}),(0,p.jsx)(ei._v,{className:"max-w-[30ch]",children:"How many people visited your published project in the last 7 days."})]})},sO=e=>{let{project:t,onRenameClick:s}=e,{openSettings:a}=(0,ej.r)(),{customDomains:l}=sR({projectId:null==t?void 0:t.id,enabled:!0});return(0,p.jsxs)("div",{className:"my-2 flex flex-col gap-0 pt-1",children:[(0,p.jsxs)("div",{className:"flex w-full items-center justify-between px-4",children:[(0,p.jsx)("p",{className:"text-sm font-medium",children:"Published site"}),(null==t?void 0:t.id)&&t.url&&(0,p.jsx)(sP,{projectId:t.id})]}),(null==t?void 0:t.url)?(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(J.z,{asChild:!0,variant:"link",className:"mx-0 h-auto min-h-8 w-full text-wrap px-4 font-normal",children:(0,p.jsxs)("a",{href:null==t?void 0:t.url,target:"_blank",rel:"noreferrer",children:[(0,p.jsx)(ee.Z,{name:"language",size:"small"}),(0,p.jsx)("span",{className:"min-w-0 truncate",children:(0,sS.P)(t.url)}),(0,p.jsx)(ee.Z,{name:"arrow_outward",size:"small",className:"ml-auto text-muted-foreground"})]})})}),(0,p.jsx)(ei._v,{sideOffset:-4,children:(0,sS.P)(t.url)})]}):(0,p.jsxs)("div",{className:"flex h-auto min-h-8 items-center gap-2 px-4 py-2",children:[(0,p.jsx)(ee.Z,{name:"language",size:"small"}),(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsxs)("p",{className:"truncate text-sm font-normal",children:[null==t?void 0:t.name,".lovable.app"]})}),(0,p.jsxs)(ei._v,{children:[null==t?void 0:t.name,".lovable.app"]})]}),s&&(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm",onClick:s,className:"ml-auto h-6 w-6 opacity-70 hover:opacity-100",children:(0,p.jsx)(ee.Z,{name:"edit",size:"small"})})]}),null==l?void 0:l.map((e,t)=>(0,p.jsx)("div",{className:"flex min-h-8 items-center px-4",children:(0,p.jsx)(s_.Z,{domain:e,showRemove:!1,showIcon:!0},t)},t)),(0,p.jsx)("div",{className:"flex items-center gap-2 px-4 py-0.5",children:(0,p.jsxs)(J.z,{variant:"link",size:"sm",className:"pl-0 font-normal text-muted-foreground",onClick:()=>a("domains"),children:[(0,p.jsx)(ee.Z,{name:"add",size:"small"}),"Custom domains"]})})]})};var sA=s(5460);let sz=e=>{let{projectId:t,securityWarnings:s,setShowPublishConfirmDialog:a,projectUrl:l}=e,[n,r]=(0,g.useState)(),[i,o]=(0,g.useState)(!1),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),p=(0,x.D)({mutationFn:async()=>{let e=(0,N.SJ)(),s=await e.post("/projects/".concat(t,"/deployments"),{});try{await (0,sA.G)({projectId:t})}catch(e){T.logging.error("Error updating deployment ID: ".concat(e))}return{request:s,wasFirstTime:!l}},onSuccess:e=>{let{wasFirstTime:t}=e;t?m(!0):v.Am.success("Project updated!",{description:"Published project updated"})},onError:e=>{if(422===e.status){var t;r((null===(t=e.data)||void 0===t?void 0:t.detail)||null),o(!0)}else r(e.message||e.details||"Unidentified error. Please contact support if this issue persists."),o(!1);d(!0)}});return{errorMessage:n,isBuildError:i,failedDialogOpen:c,successDialogOpen:u,setFailedDialogOpen:d,setSuccessDialogOpen:m,handlePublish:async()=>{if(!t){T.logging.error("project id is missing, can't deploy");return}s&&s.supabase.errors>0?a(!0):p.mutate()},handlePublishAnyway:()=>{a(!1),p.mutate()},publishMutation:p}};var sL=s(58292);let sM=e=>{let{projectId:t,projectName:s}=e,a=(0,eM.hO)(e=>e.projectWorkspace),l=(null==a?void 0:a.disable_named_previews)?(0,e8.t)({projectId:t}):(0,e8.t)({projectName:s}),n=(0,sS.P)(l).replace(/\/$/,"");return(0,p.jsxs)("div",{className:"flex flex-col gap-0 pb-0.5 pt-1",children:[(0,p.jsx)("div",{className:"flex w-full items-center justify-between px-4",children:(0,p.jsx)("p",{className:"text-sm font-medium",children:"Preview"})}),(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(J.z,{asChild:!0,variant:"link",className:"mx-0 h-auto min-h-8 w-full text-wrap px-4 font-normal",children:(0,p.jsxs)("a",{href:l,target:"_blank",rel:"noreferrer",children:[(0,p.jsx)(ee.Z,{name:"language",size:"small"}),(0,p.jsx)("span",{className:"truncate",children:n}),(0,p.jsx)(ee.Z,{name:"arrow_outward",size:"small",className:"ml-auto text-muted-foreground"})]})})}),(0,p.jsx)(ei._v,{sideOffset:-4,children:n})]})]})};var sZ=s(35974);let sF=e=>{let t,{errors:s,warnings:a,supabaseProjectId:l}=e,n=(0,y.Z)("md"),r=s>0,i=a>0,o=r||i;t=o?r?"".concat(s," Error").concat(s>1?"s":""):"".concat(a," Warning").concat(a>1?"s":""):"No issues detected";let c="https://supabase.com/dashboard/project/".concat(l,"/advisors/security").concat(!r&&i?"?preset=WARN&id=":"");return(0,p.jsxs)("a",{href:c,target:"_blank",rel:"noopener noreferrer","aria-label":"View security issues on Supabase",className:(0,eo.cn)("mx-0 flex h-10 items-center gap-2 rounded-lg px-0 text-base transition-colors duration-100 ease-in-out md:mx-2 md:h-8 md:px-2 md:text-sm",o&&"hover:bg-muted-hover"),children:[(0,p.jsx)(ee.Z,{name:"security",size:n?"default":"small",className:"text-muted-foreground"}),(0,p.jsxs)("p",{className:(0,eo.cn)("flex flex-grow items-center gap-2 text-base font-normal leading-none text-primary md:text-sm"),children:["Supabase Security",(0,p.jsx)(sZ.C,{className:"h-5",variant:r?"destructive":"warning",children:t})]}),o&&(0,p.jsx)(ee.Z,{name:"arrow_outward",size:n?"default":"small",className:"text-muted-foreground"})]})},sU=e=>{var t;let{isLoadingSecurityWarnings:s,securityWarnings:a,project:l}=e;return(null==l?void 0:null===(t=l.supabase_project_config)||void 0===t?void 0:t.supabase_project_id)?(0,p.jsx)("div",{className:"pb-2",children:s||!a?(0,p.jsxs)("div",{className:(0,eo.cn)("mx-0 flex h-10 items-center gap-2 px-0 md:mx-2 md:h-8 md:px-2"),children:[(0,p.jsx)("div",{className:"flex w-4 items-center justify-center",children:(0,p.jsx)(eU.O,{className:"h-1.5 w-1.5 rounded-full"})}),(0,p.jsx)(eU.O,{className:"h-3 max-w-48 flex-grow"})]}):(0,p.jsx)(sF,{errors:a.supabase.errors,warnings:a.supabase.warnings,supabaseProjectId:l.supabase_project_config.supabase_project_id})}):null},sK=e=>{var t,s;let{disabled:a=!1}=e,[l,n]=(0,g.useState)(!1),[r,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(!1),d=(0,e_.ty)(),u=(0,e_.wf)(),m=(0,$.iZ)(e=>e.project),x=(0,h.NL)(),{securityWarnings:f,isLoadingWarnings:v,hasSecurityIssues:b,hasSupabaseErrors:j,handleSecurityReview:y,isSendingSecurityReview:w,isSecurityReviewDisabled:N,securityReviewDisabledReason:E}=(0,sL.N)({projectId:null==m?void 0:m.id,supabaseProjectId:null==m?void 0:null===(t=m.supabase_project_config)||void 0===t?void 0:t.supabase_project_id,setIsOpen:n,setShowPublishConfirmDialog:i,shouldFetchSecurityWarnings:l}),{errorMessage:k,isBuildError:C,failedDialogOpen:_,successDialogOpen:S,setFailedDialogOpen:T,setSuccessDialogOpen:R,handlePublish:I,handlePublishAnyway:D,publishMutation:P}=sz({projectId:null==m?void 0:m.id,securityWarnings:f,setShowPublishConfirmDialog:i,projectUrl:(null==m?void 0:m.url)||void 0}),O=!!(null==m?void 0:null===(s=m.supabase_project_config)||void 0===s?void 0:s.supabase_project_id);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(ey.h_,{onOpenChange:n,open:l,children:[(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(ey.$F,{asChild:!0,disabled:a,children:(0,p.jsxs)(J.z,{id:"publish-menu",variant:"affirmative",size:"sm",className:"gap-1.5",onMouseEnter:()=>{(null==m?void 0:m.id)&&x.prefetchQuery(ti.W.securityWarnings({projectId:m.id,enabled:!!m.id&&O}))},children:[(0,p.jsx)(ee.Z,{name:"language",size:"small",className:"flex @2xl:hidden"}),(0,p.jsx)("span",{className:"hidden @2xl:flex",children:"Publish"})]})})}),(0,p.jsx)(ei._v,{children:"Publish your project"})]}),(0,p.jsxs)(ey.AW,{className:"z-[1001] min-w-[300px] max-w-[300px] border border-border bg-background p-0 md:max-w-[350px]",align:"end",collisionPadding:8,children:[(0,p.jsx)(tA,{title:(null==m?void 0:m.url)?"Update":"Publish",description:(null==m?void 0:m.url)?"":"Make your project live and track its performance."}),(0,p.jsx)(ey.VD,{}),(null==m?void 0:m.id)&&m.name&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(sM,{projectId:m.id,projectName:m.name}),(0,p.jsx)(ey.VD,{})]}),(0,p.jsx)(sO,{project:m,onRenameClick:()=>c(!0)}),O&&b&&(0,p.jsx)(sU,{isLoadingSecurityWarnings:v,securityWarnings:f,project:m}),d&&(0,p.jsx)(sb,{project:m,onActionComplete:()=>n(!1)}),u&&(0,p.jsx)(sC,{project:m}),(0,p.jsx)(ey.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(tz,{href:"https://docs.lovable.dev/features/deploy"}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[!j&&(0,p.jsx)(sw.b,{showTooltip:!!E,tooltipContent:E,children:(0,p.jsxs)(J.z,{variant:"secondary",size:"sm",onClick:y,disabled:N,loading:w,className:"relative gap-1",children:["Review Security",(0,p.jsx)(sE.L,{})]})}),(0,p.jsx)(J.z,{variant:j?"secondary":"affirmative",size:"sm",onClick:I,disabled:v,loading:P.isPending,children:(null==m?void 0:m.url)?"Update":"Publish"}),j&&(0,p.jsx)(sw.b,{showTooltip:!!E,tooltipContent:E,children:(0,p.jsxs)(J.z,{variant:"affirmative",size:"sm",onClick:y,disabled:N,loading:w,className:"relative gap-1",children:["Review Security",(0,p.jsx)(sE.L,{})]})})]})]})]})]}),(0,p.jsx)(sg,{open:_,onOpenChange:T,errorMessage:k,isBuildError:C}),(0,p.jsx)(sy,{open:S,onOpenChange:R,project:m}),(0,p.jsx)(sN,{open:r,onOpenChange:i,onPublishAnyway:D,onReviewIssues:y,isReviewDisabled:N,isReviewLoading:w,reviewDisabledReason:E}),m&&(0,p.jsx)(ev.i,{project:m,isOpen:o,onClose:()=>c(!1)})]})},sV=(0,g.memo)(function(){let e=(0,tU.G)(),t=(0,eM.hO)(e=>e.projectWorkspace),{hasUnsavedChanges:s}=(0,to.v)(),a=null==t?void 0:t.disable_publish;return(0,p.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,p.jsx)(sm,{hasUnsavedChanges:s}),e&&(0,p.jsx)(tM,{disabled:s}),e&&(0,p.jsx)(tW,{disabled:s}),(0,p.jsx)(tF.Z,{plan:null==t?void 0:t.plan,onClick:()=>{S.ZP.capture(R.VL.UPGRADE.BUTTON_CLICKED.NAV_BAR,{context:R.VL.UPGRADE.CONTEXT.BILLING})}}),(0,p.jsx)(sK,{disabled:s||!!a})]})}),sW={Left:()=>(0,p.jsx)("div",{className:"flex items-center space-x-2",children:(0,p.jsx)(eU.O,{className:"h-6 w-20 md:h-7"})}),Center:()=>(0,p.jsx)("div",{className:"flex items-center justify-center space-x-2",children:(0,p.jsx)(eU.O,{className:"h-6 w-48 md:h-7"})}),Right:()=>(0,p.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,p.jsx)(eU.O,{className:"h-6 w-20 md:h-7"})})},sB=(0,g.memo)(function(e){let{commitMessage:t}=e;return(0,p.jsxs)("div",{className:"flex h-full min-w-0 items-center gap-2",children:[(0,p.jsx)("span",{className:"text-sm text-muted-foreground",children:"Previewing"}),(0,p.jsx)("div",{className:"flex h-7 min-w-0 items-center rounded-full border border-input px-3 text-sm",children:(0,p.jsx)("p",{className:"min-w-0 max-w-[250px] truncate",children:t})})]})}),sG=()=>{let[e,t]=(0,g.useState)(!1),s=()=>t(!1),{openSettings:a}=(0,ej.r)();return{GithubRequiredDialog:()=>(0,p.jsx)(Q.Vq,{open:e,onOpenChange:t,children:(0,p.jsxs)(Q.cZ,{size:"sm",children:[(0,p.jsxs)(Q.fK,{children:[(0,p.jsx)(Q.$N,{children:"GitHub Access Required"}),(0,p.jsx)(Q.Be,{children:"This action requires GitHub access. Please connect your GitHub account by clicking the button below."})]}),(0,p.jsxs)(Q.cN,{children:[(0,p.jsx)(Q.GG,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"secondary",children:"Cancel"})}),(0,p.jsxs)(J.z,{variant:"default",onClick:()=>{s(),a("github")},children:[(0,p.jsx)(et.xR.GitHub,{className:"h-4 w-4"}),"Connect GitHub"]})]})]})}),isOpen:e,open:()=>t(!0),close:s}},sH=e=>{let{activeEdit:t,project:s}=e,{open:a,GithubRequiredDialog:l}=sG();return(null==t?void 0:t.commit_sha)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(J.z,{variant:"secondary",size:"sm",className:"shadow-none",onClick:()=>{var e,l,n;let r=(0,tK._J)((null==s?void 0:s.github_repo_name)||"",t.commit_sha||"",null==s?void 0:null===(e=s.github_owner)||void 0===e?void 0:e.name);if(S.ZP.capture(R.SL.CONSOLE.GITHUB_LINK_CLICKED,{hasCustomGithubOwner:(null==s?void 0:null===(l=s.github_owner)||void 0===l?void 0:l.name)!==tK.aR,context:"nav_bar"}),(null==s?void 0:null===(n=s.github_owner)||void 0===n?void 0:n.name)===tK.aR){a();return}r&&window.open(r,"_blank")},children:[(0,p.jsx)(et.xR.GitHub,{className:"h-3.5 w-3.5"}),(0,p.jsx)("span",{className:"hidden sm:flex",children:"View on GitHub"})]}),(0,p.jsx)(l,{})]}):null},sq=e=>{let{projectId:t}=e,{exitConsole:s}=(0,O.pE)(),a=(0,f.useRouter)();return(0,p.jsx)(J.z,{size:"sm",variant:"secondary",type:"button",onClick:()=>{S.ZP.capture(R.SL.CONSOLE.EXITED_VIA_BUTTON,{context:"previewing_view"}),t&&a.replace("/projects/".concat(t)),s()},className:"shadow-none",children:"Exit"})};var sX=s(26237),sY=s(79396);let s$=(0,g.memo)(function(e){let{activeEdit:t}=e,{exitConsole:s}=(0,O.pE)(),a=(0,sX.C)(),l=(0,A.bk)(e=>e.isSomeRevertMutationPending),{mutate:n,isPending:r}=(0,sY.I)({onSuccess:s}),{disabled:i,disabledTooltip:o}=(0,g.useMemo)(()=>t?l||a?{disabled:!0,disabledTooltip:(0,p.jsx)("p",{className:"max-w-sm",children:"Cannot revert while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete."})}:{disabled:!1,disabledTooltip:void 0}:{disabled:!0,disabledTooltip:(0,p.jsx)("p",{className:"max-w-sm",children:"There is no selected edit to revert to."})},[t,l,a]);return(0,p.jsx)(sw.b,{showTooltip:i,tooltipContent:o,children:(0,p.jsx)(J.z,{variant:"affirmative",className:"gap-1",size:"sm",loading:r,disabled:!t||l||a,type:"button",onClick:()=>{S.ZP.capture(R.SL.CONSOLE.RESTORE_VERSION_CLICKED,{context:"previewing_view"}),n({edit:t})},children:r?(0,p.jsx)("span",{children:"Restoring..."}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"Restore"}),(0,p.jsx)("span",{className:"hidden sm:flex",children:"this version"})]})})})});s$.displayName="RestoreCommitButton";let sJ=(0,g.memo)(function(e){let{activeEdit:t}=e;return(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)(sq,{}),(0,p.jsx)(s$,{activeEdit:t})]})}),sQ=(0,g.memo)(function(e){let{projectName:t,createdBy:s}=e;return(0,p.jsxs)("div",{className:"flex h-full items-center truncate",children:[(0,p.jsx)("p",{className:"font-medium",children:t}),"\xa0by\xa0",(0,p.jsx)(tG.default,{href:"/@".concat(s),children:(0,p.jsx)("p",{className:"font-medium",children:s})})]})}),s0=(0,g.memo)(function(){let{setIsRemixDialogOpen:e}=(0,$.d2)(),{canEdit:t}=(0,_.t)(),s=(0,$.iZ)(e=>e.project),{isAuthenticated:a}=(0,b.Eu)(),l=(0,f.useRouter)(),n=!!(null==s?void 0:s.is_supabase_enabled)||!!(null==s?void 0:s.supabase_project_config),r=t||!n,i=(0,g.useCallback)(()=>{if(!a){l.push("/login?redirect=".concat(window.location.pathname));return}e(!0)},[a,l,e]);return(0,p.jsxs)(ei.u,{instant:!0,children:[(0,p.jsx)(ei.aJ,{className:"cursor-default",children:(0,p.jsxs)(J.z,{className:"flex items-center gap-1",onClick:i,disabled:!r,size:"sm",children:[(0,p.jsx)(ee.Z,{name:"shuffle",size:"small"}),"Remix"]})}),(0,p.jsx)(ei._v,{className:"max-w-xs",children:r?(0,p.jsx)("p",{children:"Remix this project"}):(0,p.jsx)("p",{children:"This project is connected to Supabase. To remix, you must be a collaborator or member of this workspace."})})]})}),s1=()=>{let{canEdit:e,isLoading:t}=(0,_.t)(),s=(0,$.iZ)(e=>e.project),{isAuthenticated:a}=(0,b.Eu)(),l=(0,P.aK)(e=>e.edits),n=(0,O.Sl)(e=>e.activeEditId),r=n?l[n]:null,i=(0,O.Sl)(e=>e.consoleContentType),o=(0,Y.c)(e=>e.hasFetchedCollaborators);return(0,g.useMemo)(()=>s?t||a&&!o?{center:(0,p.jsx)(sW.Center,{}),right:(0,p.jsx)(sW.Right,{}),left:(0,p.jsx)(sW.Left,{})}:r&&"snapshot-preview"===i?{center:(0,p.jsx)(sB,{commitMessage:r.commit_message}),right:(0,p.jsx)(sJ,{activeEdit:r}),left:(0,p.jsx)(sH,{activeEdit:r,project:s})}:e?{center:(0,p.jsx)(tS,{}),right:(0,p.jsx)(sV,{}),left:(0,p.jsx)(tI,{})}:{center:(0,p.jsx)(sQ,{projectName:s.name,createdBy:s.created_by}),right:(0,p.jsx)(s0,{}),left:null}:{center:null,right:null,left:null},[s,t,a,o,r,i,e])},s2=(0,g.memo)(e=>{let{isSidebarOpen:t,toggleSidebar:s,openSidebar:a,hideButtons:l}=e,[n,r]=(0,er.QJ)(eH.I8),{left:i,center:o,right:c}=s1(),d=(0,eW.SE)(e=>e.panelSizes)[0],u=(0,y.Z)("md");return(0,p.jsxs)("nav",{className:(0,eo.cn)("relative hidden min-h-12 w-full shrink-0 flex-col items-center gap-2 px-4 py-2 md:flex md:h-12 md:flex-row md:gap-0 md:py-0"),children:[(0,p.jsx)(eG,{className:"flex w-full shrink-0 items-center",children:(0,p.jsxs)("div",{className:"relative flex w-full flex-shrink-0 items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex-basis-0 flex-grow-1 flex flex-shrink-0 items-center gap-2",style:{width:u||0===d?"auto":"".concat(d||eB.DEFAULT_SIDEBAR_SIZE,"%")},children:[(0,p.jsx)(eV,{}),!l&&(0,p.jsxs)("div",{className:"flex flex-row-reverse gap-2 sm:ml-auto sm:mr-4 md:flex-row",children:[(0,p.jsx)(ed,{openSidebar:a}),(0,p.jsx)(eq,{isSidebarOpen:t,toggleSidebar:s})]})]}),(0,p.jsxs)("div",{className:"relative flex flex-shrink flex-grow justify-between gap-1 overflow-x-auto pl-2 @container md:ml-1 md:gap-2.5 md:pl-0",children:[(0,p.jsx)("div",{className:"hidden w-full md:flex",children:i}),t&&(0,p.jsx)("div",{className:"hidden md:flex",children:o}),(0,p.jsx)("div",{className:"ml-auto flex w-full justify-end md:ml-0",children:c})]})]})}),(0,p.jsxs)("div",{className:"flex min-h-8 w-full justify-between gap-2 md:hidden",children:[(0,p.jsx)("div",{className:"flex min-w-0 flex-1 items-center",children:o}),(0,p.jsx)("div",{className:"flex items-center",children:i})]}),!t&&(0,p.jsx)("div",{className:"absolute left-1/2 top-1/2 hidden -translate-x-1/2 -translate-y-1/2 md:flex",children:o})]})});s2.displayName="EditorNav";var s5=()=>{let e=(0,$.iZ)(e=>e.project),t=(0,A.bk)(e=>e.isSendChatMessageMutationPending),s=null==e?void 0:e.available_project_migrations;return(0,g.useMemo)(()=>null!=s&&!!s.length&&s.length>0&&!t,[s,t])},s4=s(72384),s6=s(78079);let s3=()=>{let e=(0,$.iZ)(e=>e.project),t=(0,W.D)(),s=(0,A.bk)(e=>e.isSendChatMessageMutationPending),a=(0,A.pY)(),l=null==e?void 0:e.available_project_migrations,[n,r]=(0,g.useState)(!(null==l?void 0:l.length));(0,g.useEffect)(()=>{(null==l?void 0:l.length)||r(!1),(null==l?void 0:l.length)&&!s&&r(!0)},[null==l?void 0:l.length,s]);let{mutateAsync:i,isPending:o}=(0,s6.mo)({projectId:t,onSuccess:async()=>{v.Am.success("Project Updated")},onSubmit:()=>{}}),c=async()=>{try{var s;await i({body:{id:(0,z.Fd)(),message:"Please update the project template to the latest Lovable version to enable new features.",mode:s4.S.INSTANT,contains_error:!1,project_migration_ids:null==e?void 0:null===(s=e.available_project_migrations)||void 0===s?void 0:s.map(e=>e.id)},projectId:t})}catch(e){T.logging.error(e),v.Am.error("Error",{description:"There was an error sending the project update request."})}};return e&&n?(0,p.jsxs)(Q.cZ,{children:[(0,p.jsx)(Q.fK,{children:(0,p.jsx)(Q.$N,{className:"text-xl font-medium",children:"Project out of date"})}),(0,p.jsxs)(Q.Be,{className:"max-h-[80vh] overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]",children:[l&&(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("h3",{className:"text-lg font-medium",children:"Available Updates"}),(0,p.jsx)("ul",{className:"space-y-3",children:l.map((e,t)=>(0,p.jsxs)("li",{className:"border-l-2 border-primary/20 pl-4",children:[(0,p.jsx)("h4",{className:"font-medium",children:e.name}),(0,p.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:e.description})]},t))})]}),(0,p.jsx)("p",{className:"mt-4 text-sm first-of-type:mt-0",children:"The AI assistant will guide you through the necessary steps to complete the migration."})]}),(0,p.jsxs)(Q.cN,{children:[(0,p.jsx)(Q.GG,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"outline",children:"Close"})}),(0,p.jsx)(J.z,{disabled:a,loading:o,onClick:c,children:"Update Project"})]})]}):null};var s8=s(96027),s7=s(23374);let s9=e=>{let{className:t,...s}=e;return(0,p.jsx)(s7.eh,{className:(0,eo.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s})},ae=s7.s_,at=e=>{let{tooltip:t,className:s,...a}=e,[l,n]=(0,g.useState)(!1),[r,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(0);return(0,g.useEffect)(()=>{var e;let t;let s=(e=e=>{c(e.clientY)},function(){for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];clearTimeout(t),t=setTimeout(()=>e.apply(this,a),100)});return window.addEventListener("mousemove",s),()=>{window.removeEventListener("mousemove",s)}},[]),(0,p.jsx)(s7.OT,{className:(0,eo.cn)("relative -mr-px mb-[20px] mt-[12px] flex w-[2px] cursor-col-resize items-center justify-center rounded-full transition-colors duration-300 ease-in-out after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 hover:bg-accent-primary focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90",s,l?"bg-accent-primary":""),onDragging:e=>{n(e)},...a,children:t&&(0,p.jsxs)(ei.u,{disableHoverableContent:!0,open:!l&&r,onOpenChange:e=>{i(e),e&&u(o)},children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)("div",{className:"absolute -left-[2px] -right-[2px] bottom-0 top-0 z-[12000]"})}),(0,p.jsx)(ei._v,{side:"right",align:"start",alignOffset:d>0?d-68:0,children:t})]})})};function as(){let e=(0,eI.f6)(e=>e.activeMode);return(0,g.useCallback)(t=>{let s=(0,eI.XE)(e);document.querySelectorAll("iframe#".concat(s)).forEach(e=>{e.contentWindow&&e.contentWindow.postMessage(t,"*")})},[e])}(a=c||(c={})).ELEMENT_CLICKED="ELEMENT_CLICKED",a.TOGGLE_SELECTOR="TOGGLE_SELECTOR",a.UPDATE_SELECTED_ELEMENTS="UPDATE_SELECTED_ELEMENTS",a.SELECTOR_STATE_RESPONSE="SELECTOR_STATE_RESPONSE",a.TOGGLE_PICK_AND_EDIT_REQUESTED="TOGGLE_PICK_AND_EDIT_REQUESTED",a.REQUEST_PICKER_STATE="REQUEST_PICKER_STATE",a.SELECTOR_SCRIPT_LOADED="SELECTOR_SCRIPT_LOADED",a.GET_SELECTOR_STATE="GET_SELECTOR_STATE",a.REQUEST_SELECTED_ELEMENTS="REQUEST_SELECTED_ELEMENTS",a.SET_ELEMENT_CONTENT="SET_ELEMENT_CONTENT",a.SET_ELEMENT_ATTRS="SET_ELEMENT_ATTRS",a.SET_STYLESHEET="SET_STYLESHEET",a.EDIT_TEXT_REQUESTED="EDIT_TEXT_REQUESTED",a.ELEMENT_DOUBLE_CLICKED="ELEMENT_DOUBLE_CLICKED",a.ELEMENT_TEXT_UPDATED="ELEMENT_TEXT_UPDATED",a.COMPONENT_TREE="COMPONENT_TREE",a.REQUEST_COMPONENT_TREE="REQUEST_COMPONENT_TREE",a.HOVER_ELEMENT_REQUESTED="HOVER_ELEMENT_REQUESTED",a.UNHOVER_ELEMENT_REQUESTED="UNHOVER_ELEMENT_REQUESTED",a.KEYBIND="KEYBIND",a.DUPLICATE_ELEMENT_REQUESTED="DUPLICATE_ELEMENT_REQUESTED",a.GET_PARENT_ELEMENT="GET_PARENT_ELEMENT",a.PARENT_ELEMENT="PARENT_ELEMENT",a.SCROLL_HAPPENED="SCROLL_HAPPENED";var aa=s(32582),al=s(9078),an=s(76624);let ar=()=>{let{ast:e}=(0,to.v)(),t=(0,tn.A7)(e=>e.addPendingChange);return(0,g.useCallback)((s,a)=>{var l,n;let r=e.find(e=>e.filePath===s.filePath);if(!r){T.logging.error("Node not found",{element:s}),v.Am.error("Node not found",{description:"Node not found"});return}let i=!1;if((0,an.default)(r.ast,{JSXElement(e){var t;(null===(t=e.node.loc)||void 0===t?void 0:t.start.line)===s.lineNumber&&(a(e.node,e),i=!0,e.stop())}}),!i)return;let o=(l=r.ast,n={sourceMaps:!0,sourceFileName:r.filePath},(0,al.default)(l,n,void 0).code);t({path:r.filePath,content:o})},[t,e,v.Am])};var ai=s(21399);(l=d||(d={})).TEXT_CHANGE="TEXT_CHANGE",l.IMAGE_CHANGE="IMAGE_CHANGE",l.REMOVE_NODE="REMOVE_NODE",l.CLASS_NAME_UPDATE="CLASS_NAME_UPDATE",l.CLASS_NAME_SET="CLASS_NAME_SET",l.DUPLICATE_NODE="DUPLICATE_NODE";let ao=e=>{let{visibleMode:t}=e,s=(0,eI.XE)(t);return document.querySelector("iframe#".concat(s))},ac=e=>{let{elementBounds:t,iframe:s,elementSpacing:a,elementHeight:l}=e,n=t.y+t.height+a;if(n+l+16<=s.offsetHeight)return n;let r=t.y-l-a;return r>=16?r:t.y+8},ad=e=>{let{elementBounds:t,iframe:s,elementWidth:a}=e,l=t.x+t.width/2-a/2;return l+a>s.offsetWidth-16?s.offsetWidth-a-16:l<16?16:l},au=e=>{let{iframeRect:t,x:s,y:a}=e;return{x:t.x+s,y:t.y+a}},am=e=>{let{elementBounds:t,visibleMode:s,showVisualEditsPanel:a}=e,l=ao({visibleMode:s});if(!l)return;let n=l.getBoundingClientRect(),r=ac({elementBounds:t,iframe:l,elementHeight:40,elementSpacing:8});a(au({iframeRect:n,x:ad({elementBounds:t,iframe:l,elementWidth:400}),y:r}))},ap={current:!1},ah=e=>{let{isLocked:t,elementType:s,payload:a,ast:l}=e;return!t&&"button"!==s&&(0,aa.H2)({...a,content:null},l)},ax=e=>{let{payload:t,sendIframeMessage:s}=e;s({type:c.EDIT_TEXT_REQUESTED,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col}}})};function af(){let{isLocked:e}=(0,ai.i)(),{ast:t,setHistory:s}=(0,to.v)(),a=(0,e2.UC)(e=>e.isPickAndEditActive),{setIsPickAndEditActive:l,showFloatingInput:n,showVisualEditsPanel:r}=(0,e2.S9)(),{store:i}=(0,eI.My)(),o=(0,e2.UC)(e=>e.selectedElements),{setSelectedElements:u,setCustomPromptValue:m,closeVisualEditsPanel:p}=(0,e2.S9)(),h=as(),x=(0,g.useCallback)(e=>{let{isPickAndEditActive:t,selectedElements:s}=e;h({type:c.TOGGLE_SELECTOR,payload:{isActive:t}}),h({type:c.UPDATE_SELECTED_ELEMENTS,payload:s})},[h]),f=(0,g.useCallback)(()=>{x({isPickAndEditActive:a,selectedElements:o})},[a,o,x]),b=(0,g.useCallback)(()=>{l(!0),x({isPickAndEditActive:!0,selectedElements:o})},[l,x,o]),j=(0,g.useCallback)(()=>{l(!1),x({isPickAndEditActive:!1,selectedElements:o})},[l,x,o]),y=(0,g.useCallback)(()=>{a?j():b()},[a,b,j]),w=ar();(0,g.useEffect)(()=>{h({type:c.TOGGLE_SELECTOR,payload:{isActive:a}})},[h,a]);let N=(0,g.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,s=e.data.lineNumber,a=e.data.col;t&&s&&a&&h({type:c.HOVER_ELEMENT_REQUESTED,payload:{id:{filePath:t,lineNumber:s,col:a}}})},[h]),E=(0,g.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,s=e.data.lineNumber,a=e.data.col;t&&s&&a&&h({type:c.UNHOVER_ELEMENT_REQUESTED,payload:{id:{filePath:t,lineNumber:s,col:a}}})},[h]),{setActiveEditContent:k}=(0,e2.S9)(),C=(0,g.useCallback)(e=>{if(!e){v.Am.error("Failed to select element");return}S.ZP.capture("visual_edits:element_selected",{type:e.elementType});try{var t;let s=e=>e?JSON.parse(decodeURIComponent(e.toString())):null,a={...e,content:s(e.content),children:null===(t=e.children)||void 0===t?void 0:t.map(e=>({...e,content:s(e.content)}))};k(null),u([a]),h({type:c.UPDATE_SELECTED_ELEMENTS,payload:[a]})}catch(t){v.Am.error("Error processing element data",{description:t instanceof Error?t.message:"Unknown error"}),T.logging.error("Error in handleElementClick",{error:t,elementData:e})}},[u,h]),_=(0,g.useRef)();return(0,g.useEffect)(()=>{_.current=n=>{switch(n.data.type){case"ELEMENT_CLICKED":{let s=n.data.payload,a=n.data.rect,l=i.getState().visibleMode;a&&(m(""),am({elementBounds:a,visibleMode:l,showVisualEditsPanel:r})),ah({isLocked:e,elementType:s.elementType,payload:s,ast:t})&&ax({payload:s,sendIframeMessage:h}),C(n.data.payload)}break;case"TOGGLE_PICK_AND_EDIT_REQUESTED":case"ELEMENT_DOUBLE_CLICKED":break;case"REQUEST_PICKER_STATE":case"REQUEST_SELECTED_ELEMENTS":h({type:c.UPDATE_SELECTED_ELEMENTS,payload:o});break;case"SELECTOR_SCRIPT_LOADED":f();break;case"GET_SELECTOR_STATE":h({type:c.SELECTOR_STATE_RESPONSE,payload:{isActive:a}});break;case"ELEMENT_TEXT_UPDATED":{S.ZP.capture("visual_edits:element_text_updated");let e=n.data.payload,t=o.find(t=>t.filePath===e.id.filePath&&t.lineNumber===e.id.lineNumber);if(!t)return;let a={...t,textContent:e.content};u([a,...o.filter(e=>e.filePath!==t.filePath||e.lineNumber!==t.lineNumber)]),w(a,t=>(0,aa.Rw)(t,e.content)),s(s=>[...s,{type:d.TEXT_CHANGE,element:a,oldText:t.textContent||"",newText:e.content}]);break}case"SELECTOR_SCRIPT_LOADED":h({type:c.TOGGLE_SELECTOR,payload:{isActive:!0}}),l(!0);break;case"PARENT_ELEMENT":{S.ZP.capture("visual_edits:get_parent_element");let e=n.data.payload;e&&C(e);break}case c.SCROLL_HAPPENED:p()}}},[t,b,j,C,f,e,a,w,o,h,s,l,u,n,i,m,r,p]),(0,g.useEffect)(()=>{if(!ap.current){let e=e=>{var t;null===(t=_.current)||void 0===t||t.call(_,e)};return window.addEventListener("message",e),ap.current=!0,()=>{window.removeEventListener("message",e),ap.current=!1}}},[]),(0,en.y1)("esc",e=>{e.preventDefault(),e.stopPropagation()},{enableOnFormTags:!0},[]),(0,g.useEffect)(()=>{h({type:c.UPDATE_SELECTED_ELEMENTS,payload:o}),f()},[f,o,h,x]),{isPickAndEditActive:a,togglePickAndEdit:y,handleDeactivatePickAndEdit:j,selectedElements:o,hoverElement:N,unhoverElement:E,canEdit:!e}}let ag=()=>{let e=(0,O.Sl)(e=>e.activeView),t=(0,g.useRef)(e),s=(0,e2.UC)(e=>e.isVisualEditingActive),a=(0,e2.UC)(e=>e.selectedElements),l=(0,e2.UC)(e=>e.visualEditsPanelState),n=(0,e2.UC)(e=>e.lastPanelPosition),{showVisualEditsPanel:r}=(0,e2.S9)(),i=as();(0,g.useEffect)(()=>{"dev-mode"===t.current&&("preview"===e||"console"===e)&&(i({type:c.UPDATE_SELECTED_ELEMENTS,payload:a}),s&&a.length>0&&!l.isOpen&&n&&r(n)),t.current=e},[e,s,a,l.isOpen,n,i,r])};var av=s(22287),ab=s(53647),aj=s(4478),ay=s.n(aj),aw=s(88108),aN=s.n(aw),aE=s(50676),ak=s(13735),aC=s.n(ak);class a_ extends Error{constructor(e){super("Unable to identify the plugin based on ".concat(e,". This could be due to a misspelling, an invalid plugin, or the plugin is not yet included in the supported plugins list.")),this.name="PluginNotFoundException"}}let aS=new Map([["w",[{scaleKey:"width",ns:"width",class:["width"],type:"length"}]],["min-w",[{scaleKey:"minWidth",ns:"minWidth",class:["min-width"],type:"length"}]],["max-w",[{scaleKey:"maxWidth",ns:"maxWidth",class:["max-width"],type:"length"}]],["h",[{scaleKey:"height",ns:"height",class:["height"],type:"length"}]],["min-h",[{scaleKey:"minHeight",ns:"minHeight",class:["min-height"],type:"length"}]],["max-h",[{scaleKey:"maxHeight",ns:"maxHeight",class:["max-height"],type:"length"}]],["size",[{scaleKey:"size",ns:"size",class:["width","height"],type:"length"}]],["m",[{scaleKey:"margin",ns:"margin",class:["margin"],type:"length",supportNegative:!0}]],["mx",[{scaleKey:"margin",ns:"marginX",class:["margin-left","margin-right"],type:"length",supportNegative:!0}]],["my",[{scaleKey:"margin",ns:"marginY",class:["margin-top","margin-bottom"],type:"length",supportNegative:!0}]],["mt",[{scaleKey:"margin",ns:"marginTop",class:["margin-top"],type:"length",supportNegative:!0}]],["mr",[{scaleKey:"margin",ns:"marginRight",class:["margin-right"],type:"length",supportNegative:!0}]],["mb",[{scaleKey:"margin",ns:"marginBottom",class:["margin-bottom"],type:"length",supportNegative:!0}]],["ml",[{scaleKey:"margin",ns:"marginLeft",class:["margin-left"],type:"length",supportNegative:!0}]],["p",[{scaleKey:"padding",ns:"padding",class:["padding"],type:"length"}]],["px",[{scaleKey:"padding",ns:"paddingX",class:["padding-left","padding-right"],type:"length"}]],["py",[{scaleKey:"padding",ns:"paddingY",class:["padding-top","padding-bottom"],type:"length"}]],["pt",[{scaleKey:"padding",ns:"paddingTop",class:["padding-top"],type:"length"}]],["pr",[{scaleKey:"padding",ns:"paddingRight",class:["padding-right"],type:"length"}]],["pb",[{scaleKey:"padding",ns:"paddingBottom",class:["padding-bottom"],type:"length"}]],["pl",[{scaleKey:"padding",ns:"paddingLeft",class:["padding-left"],type:"length"}]],["text",[{scaleKey:"fontSize",ns:"fontSize",class:["font-size"],type:"length"},{scaleKey:"textColor",ns:"textColor",class:["color"],type:"color"}]],["indent",[{scaleKey:"textIndent",ns:"textIndent",class:["text-indent"],type:"length",supportNegative:!0}]],["underline-offset",[{scaleKey:"textUnderlineOffset",ns:"textUnderlineOffset",class:["text-underline-offset"],type:"number"}]],["decoration",[{scaleKey:"textDecorationThickness",ns:"textDecorationThickness",class:["text-decoration-thickness"],type:"number"},{scaleKey:"textDecorationColor",ns:"textDecorationColor",class:["text-decoration-color"],type:"color"}]],["font",[{scaleKey:"fontWeight",ns:"fontWeight",class:["font-weight"],type:"number"},{scaleKey:"fontFamily",ns:"fontFamily",class:["font-family"],type:"family-name"}]],["leading",[{scaleKey:"lineHeight",ns:"lineHeight",class:["line-height"],type:"number"}]],["tracking",[{scaleKey:"letterSpacing",ns:"letterSpacing",class:["letter-spacing"],type:"length",supportNegative:!0}]],["bg",[{scaleKey:"backgroundImage",ns:"backgroundImage",class:["background-image"],type:"image"},{scaleKey:"backgroundPosition",ns:"backgroundPosition",class:["background-position"],type:"position"},{scaleKey:"backgroundSize",ns:"backgroundSize",class:["background-size"],type:"bg-size"},{scaleKey:"backgroundColor",ns:"backgroundColor",class:["background-color"],type:"color"}]],["from",[{scaleKey:"gradientColorStops",ns:"gradientStopsFrom",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsFromPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["to",[{scaleKey:"gradientColorStops",ns:"gradientStopsTo",class:["--tw-gradient-to","--tw-gradient-to-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsToPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["via",[{scaleKey:"gradientColorStops",ns:"gradientStopsVia",class:["--tw-gradient-from"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsViaPositions",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["fill",[{scaleKey:"fill",ns:"fillColor",class:["fill"],type:"color"}]],["stroke",[{scaleKey:"strokeWidth",ns:"strokeWidth",class:["stroke-width"],type:"line-width"},{scaleKey:"stroke",ns:"strokeColor",class:["border-color"],type:"color"}]],["border",[{scaleKey:"borderWidth",ns:"borderWidth",class:["border-width"],type:"line-width"},{scaleKey:"borderColor",ns:"borderColor",class:["border-color"],type:"color"}]],["ring",[{scaleKey:"ringWidth",ns:"ringWidth",class:["box-shadow"],type:"line-width"},{scaleKey:"ringColor",ns:"ringColor",class:["--tw-ring-color"],type:"color"}]],["ring-offset",[{scaleKey:"ringOffsetWidth",ns:"ringOffsetWidth",class:["--tw-ring-offset-width"],type:"line-width"},{scaleKey:"ringOffsetColor",ns:"ringOffsetColor",class:["--tw-ring-offset-color"],type:"color"}]],["rounded",[{scaleKey:"borderRadius",ns:"borderRadius",class:["border-radius"],type:"length"}]],["rounded-tl",[{scaleKey:"borderRadius",ns:"borderTopLeftRadius",class:["border-top-left-radius"],type:"length"}]],["rounded-tr",[{scaleKey:"borderRadius",ns:"borderTopRightRadius",class:["border-top-right-radius"],type:"length"}]],["rounded-br",[{scaleKey:"borderRadius",ns:"borderBottomRightRadius",class:["border-bottom-right-radius"],type:"length"}]],["rounded-bl",[{scaleKey:"borderRadius",ns:"borderBottomLeftRadius",class:["border-bottom-left-radius"],type:"length"}]],["flex",[{scaleKey:"flex",ns:"flex",class:["flex"],type:"number"}]],["basis",[{scaleKey:"flexBasis",ns:"flexBasis",class:["flex-basis"],type:"length"}]],["grid-cols",[{scaleKey:"gridTemplateColumns",ns:"gridTemplateColumns",class:["grid-template-columns"],type:"number"}]],["grid-rows",[{scaleKey:"gridTemplateRows",ns:"gridTemplateRows",class:["grid-template-rows"],type:"number"}]],["gap",[{scaleKey:"gap",ns:"gap",class:["gap"],type:"length"}]],["gap-x",[{scaleKey:"gap",ns:"gapX",class:["gap"],type:"length"}]],["gap-y",[{scaleKey:"gap",ns:"gapY",class:["gap"],type:"length"}]],["divide-x",[{scaleKey:"divideWidth",ns:"divideX",class:["border-left-width","border-right-width"],type:"length"}]],["divide-y",[{scaleKey:"divideWidth",ns:"divideY",class:["border-top-width","border-bottom-width"],type:"length"}]],["divide",[{scaleKey:"divideColor",ns:"divideColor",class:["--tw-divide-color"],type:"color"}]],["divide-opacity",[{scaleKey:"divideOpacity",ns:"divideOpacity",class:["--tw-divide-opacity"],type:"number"}]],["col",[{scaleKey:"gridColumn",ns:"gridColumn",class:["grid-column"],type:"number"}]],["row",[{scaleKey:"gridRow",ns:"gridRow",class:["grid-row"],type:"number"}]],["space-x",[{scaleKey:"spacing",ns:"spaceX",class:["margin-left"],type:"number",supportNegative:!0}]],["space-y",[{scaleKey:"spacing",ns:"spaceY",class:["margin-top"],type:"number",supportNegative:!0}]],["opacity",[{scaleKey:"opacity",ns:"opacity",class:["opacity"],type:"number"}]],["shadow",[{scaleKey:"boxShadow",ns:"boxShadow",class:["box-shadow"],type:"length"},{scaleKey:"boxShadowColor",ns:"boxShadowColor",class:["box-shadow"],type:"color"}]],["transition",[{scaleKey:"transitionProperty",ns:"transitionProperty",class:["transition-property"],type:"named"}]],["duration",[{scaleKey:"transitionDuration",ns:"transitionDuration",class:["transition-duration"],type:"number"}]],["delay",[{scaleKey:"transitionDelay",ns:"transitionDelay",class:["transition-delay"],type:"number"}]],["scale",[{scaleKey:"scale",ns:"scale",class:["scale"],type:"number",supportNegative:!0}]],["rotate",[{scaleKey:"rotate",ns:"rotate",class:["rotate"],type:"angle",supportNegative:!0}]],["translate",[{scaleKey:"translate",ns:"translate",class:["transform"],type:"length",supportNegative:!0}]],["translate-y",[{scaleKey:"translate",ns:"translateY",class:["transform"],type:"length",supportNegative:!0}]],["translate-x",[{scaleKey:"translate",ns:"translateX",class:["transform"],type:"length",supportNegative:!0}]],["skew",[{scaleKey:"skew",ns:"skew",class:["skew"],type:"angle",supportNegative:!0}]],["z",[{scaleKey:"zIndex",ns:"zIndex",class:["z-index"],type:"number",supportNegative:!0}]],["inset",[{scaleKey:"inset",ns:"inset",class:["inset"],type:"length",supportNegative:!0}]],["inset-x",[{scaleKey:"inset",ns:"insetX",class:["left","right"],type:"length",supportNegative:!0}]],["inset-y",[{scaleKey:"inset",ns:"insetY",class:["top","bottom"],type:"length",supportNegative:!0}]],["top",[{scaleKey:"inset",ns:"positionTop",class:["top"],type:"length",supportNegative:!0}]],["right",[{scaleKey:"inset",ns:"positionRight",class:["right"],type:"length",supportNegative:!0}]],["bottom",[{scaleKey:"inset",ns:"positionBottom",class:["bottom"],type:"length",supportNegative:!0}]],["left",[{scaleKey:"inset",ns:"positionLeft",class:["left"],type:"length",supportNegative:!0}]],["start",[{scaleKey:"inset",ns:"insetInlineStart",class:["inset-inline-start"],type:"length",supportNegative:!0}]],["end",[{scaleKey:"inset",ns:"insetInlineEnd",class:["inset-inline-end"],type:"length",supportNegative:!0}]],["order",[{scaleKey:"order",ns:"order",class:["order"],type:"length",supportNegative:!0}]],["blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["brightness",[{scaleKey:"brightness",ns:"brightness",class:["filter"],type:"number"}]],["contrast",[{scaleKey:"contrast",ns:"contrast",class:["filter"],type:"number"}]],["drop-shadow",[{scaleKey:"dropShadow",ns:"dropShadow",class:["filter"],type:"number"}]],["hue-rotate",[{scaleKey:"hueRotate",ns:"hueRotate",class:["filter"],type:"number"}]],["saturate",[{scaleKey:"saturate",ns:"saturate",class:["filter"],type:"number"}]],["backdrop-blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["backdrop-brightness",[{scaleKey:"backdropBrightness",ns:"backdropBrightness",class:["backdrop-filter"],type:"number"}]],["backdrop-contrast",[{scaleKey:"backdropContrast",ns:"backdropContrast",class:["backdrop-filter"],type:"number"}]],["backdrop-drop-shadow",[{scaleKey:"backdropDropShadow",ns:"backdropDropShadow",class:["backdrop-filter"],type:"number"}]],["backdrop-hue-rotate",[{scaleKey:"backdropHueRotate",ns:"backdropHueRotate",class:["backdrop-filter"],type:"number"}]],["backdrop-saturate",[{scaleKey:"backdropSaturate",ns:"backdropSaturate",class:["backdrop-filter"],type:"number"}]]]),aT=new Map([["border-solid",{class:["border-style"],value:"solid",ns:"borderStyle"}],["border-dashed",{class:["border-style"],value:"dashed",ns:"borderStyle"}],["border-dotted",{class:["border-style"],value:"dotted",ns:"borderStyle"}],["border-double",{class:["border-style"],value:"double",ns:"borderStyle"}],["border-none",{class:["border-style"],value:"none",ns:"borderStyle"}],["ring-inset",{class:["--tw-ring-inset"],value:"inset",ns:"ring"}],["divide-solid",{class:["divide-style"],value:"solid",ns:"divideStyle"}],["divide-dashed",{class:["divide-style"],value:"dashed",ns:"divideStyle"}],["divide-dotted",{class:["divide-style"],value:"dotted",ns:"divideStyle"}],["divide-double",{class:["divide-style"],value:"double",ns:"divideStyle"}],["divide-none",{class:["divide-style"],value:"none",ns:"divideStyle"}],["block",{class:["display"],value:"block",ns:"display"}],["inline-block",{class:["display"],value:"inline-block",ns:"display"}],["inline",{class:["display"],value:"inline",ns:"display"}],["flex",{class:["display"],value:"flex",ns:"display"}],["grid",{class:["display"],value:"grid",ns:"display"}],["hidden",{class:["display"],value:"none",ns:"display"}],["table",{class:["display"],value:"table",ns:"display"}],["table-row",{class:["display"],value:"table-row",ns:"display"}],["table-cell",{class:["display"],value:"table-cell",ns:"display"}],["contents",{class:["display"],value:"contents",ns:"display"}],["list-item",{class:["display"],value:"list-item",ns:"display"}],["flow-root",{class:["display"],value:"flow-root",ns:"display"}],["visible",{class:["visibility"],value:"visible",ns:"visibility"}],["invisible",{class:["visibility"],value:"hidden",ns:"visibility"}],["hyphens-none",{class:["hyphens"],value:"none",ns:"hyphens"}],["hyphens-manual",{class:["hyphens"],value:"manual",ns:"hyphens"}],["hyphens-auto",{class:["hyphens"],value:"auto",ns:"hyphens"}],["break-normal",{class:["word-break","overflow-wrap"],value:"normal",ns:"wordBreak"}],["break-words",{class:["overflow-wrap"],value:"break-word",ns:"wordBreak"}],["break-all",{class:["word-break"],value:"break-all",ns:"wordBreak"}],["break-keep",{class:["word-break"],value:"keep-all",ns:"wordBreak"}],["whitespace-normal",{class:["white-space"],value:"normal",ns:"whitespace"}],["whitespace-nowrap",{class:["white-space"],value:"nowrap",ns:"whitespace"}],["whitespace-pre",{class:["white-space"],value:"pre",ns:"whitespace"}],["whitespace-pre-line",{class:["white-space"],value:"pre-line",ns:"whitespace"}],["whitespace-pre-wrap",{class:["white-space"],value:"pre-wrap",ns:"whitespace"}],["whitespace-break-spaces",{class:["white-space"],value:"break-spaces",ns:"whitespace"}],["static",{class:["position"],value:"static",ns:"position"}],["fixed",{class:["position"],value:"fixed",ns:"position"}],["absolute",{class:["position"],value:"absolute",ns:"position"}],["relative",{class:["position"],value:"relative",ns:"position"}],["sticky",{class:["position"],value:"sticky",ns:"position"}],["overflow-auto",{class:["overflow"],value:"auto",ns:"overflow"}],["overflow-hidden",{class:["overflow"],value:"hidden",ns:"overflow"}],["overflow-visible",{class:["overflow"],value:"visible",ns:"overflow"}],["overflow-scroll",{class:["overflow"],value:"scroll",ns:"overflow"}],["overflow-x-auto",{class:["overflow-x"],value:"auto",ns:"overflowX"}],["overflow-x-hidden",{class:["overflow-x"],value:"hidden",ns:"overflowX"}],["overflow-x-visible",{class:["overflow-x"],value:"visible",ns:"overflowX"}],["overflow-x-scroll",{class:["overflow-x"],value:"scroll",ns:"overflowX"}],["overflow-y-auto",{class:["overflow-y"],value:"auto",ns:"overflowY"}],["overflow-y-hidden",{class:["overflow-y"],value:"hidden",ns:"overflowY"}],["overflow-y-visible",{class:["overflow-y"],value:"visible",ns:"overflowY"}],["overflow-y-scroll",{class:["overflow-y"],value:"scroll",ns:"overflowY"}],["text-left",{class:["text-align"],value:"left",ns:"textAlign"}],["text-center",{class:["text-align"],value:"center",ns:"textAlign"}],["text-right",{class:["text-align"],value:"right",ns:"textAlign"}],["text-justify",{class:["text-align"],value:"justify",ns:"textAlign"}],["text-start",{class:["text-align"],value:"start",ns:"textAlign"}],["text-end",{class:["text-align"],value:"end",ns:"textAlign"}],["underline",{class:["text-decoration-line"],value:"underline",ns:"textDecoration"}],["line-through",{class:["text-decoration-line"],value:"line-through",ns:"textDecoration"}],["overline",{class:["text-decoration-line"],value:"overline",ns:"textDecoration"}],["no-underline",{class:["text-decoration-line"],value:"none",ns:"textDecoration"}],["text-wrap",{class:["text-wrap"],value:"wrap",ns:"textWrap"}],["text-nowrap",{class:["text-wrap"],value:"nowrap",ns:"textWrap"}],["text-balance",{class:["text-wrap"],value:"balance",ns:"textWrap"}],["text-pretty",{class:["text-wrap"],value:"pretty",ns:"textWrap"}],["truncate",{class:["overflow","text-overflow","white-space"],value:"",ns:"TextOverflow"}],["text-ellipsis",{class:["text-overflow"],value:"ellipsis",ns:"textWrap"}],["text-clip",{class:["text-overflow"],value:"clip",ns:"textWrap"}],["uppercase",{class:["text-transform"],value:"uppercase",ns:"textTransform"}],["lowercase",{class:["text-transform"],value:"lowercase",ns:"textTransform"}],["capitalize",{class:["text-transform"],value:"capitalize",ns:"textTransform"}],["normal-case",{class:["text-transform"],value:"none",ns:"textTransform"}],["italic",{class:["font-style"],value:"italic",ns:"fontStyle"}],["not-italic",{class:["font-style"],value:"normal",ns:"fontStyle"}],["bg-fixed",{class:["background-attachment"],value:"fixed",ns:"backgroundAttachment"}],["bg-local",{class:["background-attachment"],value:"local",ns:"backgroundAttachment"}],["bg-scroll",{class:["background-attachment"],value:"scroll",ns:"backgroundAttachment"}],["bg-repeat",{class:["background-repeat"],value:"repeat",ns:"backgroundRepeat"}],["bg-no-repeat",{class:["background-repeat"],value:"no-repeat",ns:"backgroundRepeat"}],["bg-repeat-x",{class:["background-repeat"],value:"repeat-x",ns:"backgroundRepeat"}],["bg-repeat-y",{class:["background-repeat"],value:"repeat-y",ns:"backgroundRepeat"}],["bg-repeat-round",{class:["background-repeat"],value:"round",ns:"backgroundRepeat"}],["bg-repeat-space",{class:["background-repeat"],value:"space",ns:"backgroundRepeat"}],["bg-origin-border",{class:["background-origin"],value:"border",ns:"backgroundOrigin"}],["bg-origin-padding",{class:["background-origin"],value:"padding",ns:"backgroundOrigin"}],["bg-origin-content",{class:["background-origin"],value:"content",ns:"backgroundOrigin"}],["flex-row",{class:["flex-direction"],value:"row",ns:"flexDirection"}],["flex-row-reverse",{class:["flex-direction"],value:"row-reverse",ns:"flexDirection"}],["flex-col",{class:["flex-direction"],value:"column",ns:"flexDirection"}],["flex-col-reverse",{class:["flex-direction"],value:"column-reverse",ns:"flexDirection"}],["flex-wrap",{class:["flex-wrap"],value:"wrap",ns:"flexWrap"}],["flex-wrap-reverse",{class:["flex-wrap"],value:"wrap-reverse",ns:"flexWrap"}],["flex-nowrap",{class:["flex-wrap"],value:"nowrap",ns:"flexWrap"}],["items-start",{class:["align-items"],value:"flex-start",ns:"alignItems"}],["items-end",{class:["align-items"],value:"flex-end",ns:"alignItems"}],["items-center",{class:["align-items"],value:"center",ns:"alignItems"}],["items-baseline",{class:["align-items"],value:"baseline",ns:"alignItems"}],["items-stretch",{class:["align-items"],value:"stretch",ns:"alignItems"}],["justify-start",{class:["justify-content"],value:"flex-start",ns:"justifyContent"}],["justify-end",{class:["justify-content"],value:"flex-end",ns:"justifyContent"}],["justify-center",{class:["justify-content"],value:"center",ns:"justifyContent"}],["justify-between",{class:["justify-content"],value:"space-between",ns:"justifyContent"}],["justify-around",{class:["justify-content"],value:"space-around",ns:"justifyContent"}],["justify-evenly",{class:["justify-content"],value:"space-evenly",ns:"justifyContent"}],["grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["flex-grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["flex-grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["flex-shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["flex-shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["basis-auto",{class:["flex-basis"],value:"auto",ns:"flexBasis"}],["basis-full",{class:["flex-basis"],value:"100%",ns:"flexBasis"}],["grayscale",{class:["filter"],value:"grayscale(100%)",ns:"grayScale"}],["grayscale-0",{class:["filter"],value:"grayscale(0)",ns:"grayScale"}],["invert",{class:["filter"],value:"invert(100%)",ns:"invert"}],["invert-0",{class:["filter"],value:"invert(0)",ns:"invert"}],["sepia",{class:["filter"],value:"sepia(100%)",ns:"sepia"}],["sepia-0",{class:["filter"],value:"sepia(0)",ns:"sepia"}],["backdrop-grayscale",{class:["backdrop-filter"],value:"backdrop-grayscale(100%)",ns:"backdropGrayScale"}],["backdrop-grayscale-0",{class:["backdrop-filter"],value:"backdrop-grayscale(0)",ns:"backdropGrayScale"}],["backdrop-invert",{class:["backdrop-filter"],value:"backdrop-invert(100%)",ns:"backdrop-invert"}],["backdrop-invert-0",{class:["backdrop-filter"],value:"backdrop-invert(0)",ns:"backdrop-invert"}],["backdrop-sepia",{class:["backdrop-filter"],value:"backdrop-sepia(100%)",ns:"backdrop-sepia"}],["backdrop-sepia-0",{class:["backdrop-filter"],value:"backdrop-sepia(0)",ns:"backdrop-sepia"}],["ease-linear",{class:["transition-timing-function"],value:"linear",ns:"transitionTiming"}],["ease-in",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 1, 1)",ns:"transitionTiming"}],["ease-out",{class:["transition-timing-function"],value:"cubic-bezier(0, 0, 0.2, 1)",ns:"transitionTiming"}],["ease-in-out",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 0.2, 1)",ns:"transitionTiming"}],["object-contain",{class:["object"],value:"contain",ns:"objectFit"}],["object-cover",{class:["object"],value:"cover",ns:"objectFit"}],["object-fill",{class:["object"],value:"fill",ns:"objectFit"}],["object-none",{class:["object"],value:"none",ns:"objectFit"}],["object-scale-down",{class:["object"],value:"scale-down",ns:"objectFit"}]]),aR=new Map([["first","pseudo"],["last","pseudo"],["only","pseudo"],["odd","pseudo"],["even","pseudo"],["first-of-type","pseudo"],["last-of-type","pseudo"],["only-of-type","pseudo"],["visited","state"],["target","state"],["open","state"],["default","form"],["checked","form"],["indeterminate","form"],["placeholder-shown","form"],["autofill","form"],["optional","form"],["required","form"],["valid","form"],["invalid","form"],["in-range","form"],["out-of-range","form"],["read-only","form"],["empty","content"],["focus-within","interaction"],["hover","interaction"],["group-hover","interaction"],["focus","interaction"],["focus-visible","interaction"],["active","interaction"],["enabled","interaction"],["disabled","interaction"],["dark","system"]]);var aI=s(50967);let aD=s.n(aI)()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return aN()(e||{}).theme});class aP{addRoot(e){return this._classRoot=e,this}addValue(e){return this._classValue=e,this}appendModifier(e){return e&&(this._modifier="/"+e),this}appendVariants(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];for(let e of t)this._variants.push(e);return this}makeImportant(){return this.important=!0,this}makeNegative(){return this.negative=!0,this}toString(){let e=["media","system","interaction","pseudo","content","form","state","misc"],t=this._variants.sort((t,s)=>e.indexOf(t.type)-e.indexOf(s.type));return(t.length>0?t.map(e=>e.value).join(":")+":":"")+(this.important?"!":"")+(this.negative?"-":"")+this._classRoot+(this._classValue?"-"+this._classValue:"")+this._modifier}static makeInputArbitraryFormat(e){return e.replace(/\s/g,"_")}static makeArbitrary(e){return"["+aP.makeInputArbitraryFormat(e)+"]"}constructor(){this._classRoot="",this._classValue="",this._modifier="",this._variants=[],this.important=!1,this.negative=!1}}let aO=(e,t)=>{if(!e)return"";if("["===e[0]&&"]"===e[e.length-1]&&(e=e.slice(1,-1)),"%"===e[e.length-1])return aP.makeArbitrary(e);for(let[s,a]of Object.entries(t))if(s==e||a==e)return s;return(0===Number(e)||Number(e)>=1)&&100>=Number(e)?aP.makeArbitrary(e+"%"):Number(e)>=0&&1>=Number(e)?aP.makeArbitrary(e):""};var aA=s(88430);let az=e=>{let t=(0,aA.Vi)(e),s=t.alpha();if(t.isValid())return{hex:t.alpha(1).toHex(),alpha:1!==s?s.toString():void 0}},aL=(e,t)=>{if(!e)return!1;for(let[s,a]of Object.entries(t)){if(("#fff"===a||"#000"===a)&&(0,aA.Vi)(e).isEqual(a))return s;for(let[t,l]of Object.entries(a))if(l===e)return"".concat(s,"-").concat(t)}return!1},aM=new Uint8Array(256);function aZ(e,t){let s=0,a=[],l=0,n=e.length,r=t.charCodeAt(0);for(let t=0;t<n;t++){let i=e.charCodeAt(t);if(0===s&&i===r){a.push(e.slice(l,t)),l=t+1;continue}switch(i){case 92:t+=1;break;case 39:case 34:for(;++t<n;){let s=e.charCodeAt(t);if(92===s){t+=1;continue}if(s===i)break}break;case 40:aM[s]=41,s++;break;case 91:aM[s]=93,s++;break;case 123:aM[s]=125,s++;break;case 93:case 125:case 41:s>0&&i===aM[s-1]&&s--}}return a.push(e.slice(l)),a}let aF=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent","currentcolor","canvas","canvastext","linktext","visitedtext","activetext","buttonface","buttontext","buttonborder","field","fieldtext","highlight","highlighttext","selecteditem","selecteditemtext","mark","marktext","graytext","accentcolor","accentcolortext"]),aU=/^(rgba?|hsla?|hwb|color|(ok)?(lab|lch)|light-dark|color-mix)\(/i;function aK(e,t){if(!e)return!1;let s=!1;if(t){let[a]=aZ(e,"/");s=!!aC()(t.colors,a.split("-").join("."))}return 35===e.charCodeAt(0)||aU.test(e)||aF.has(e.toLowerCase())||s}let aV=(e,t)=>{let s=aD(t),a=new aP,l=e.negative||!1;a.appendVariants(...e.variants||[]),e.important&&a.makeImportant(),"-"===e.value[0]&&(e.value=e.value.slice(1),l=!0);let[n]=Array.from(aT.entries()).filter(t=>{let[,s]=t;return s.ns===e.property}).find(t=>{let[,s]=t;return s.value===e.value})||[];if(n)return a.addRoot(n).toString();let[r,i=[]]=Array.from(aS.entries()).find(t=>{let[,s]=t;return s.some(t=>t.ns===e.property)})||[];if(!r)throw new a_(e.property);if(a.addRoot(r),aK(e.value,s)){let t=i.find(e=>"color"===e.type);if(!t)throw new a_(e.property);let l=aC()(s[t.scaleKey||"colors"],e.value.split("-").join("."));if(l&&"object"!=typeof l)return a.appendModifier(aO(e.modifier,s.opacity)).addValue(e.value).toString();let n=az(e.value);return n?a.appendModifier(aO(n.alpha||e.modifier,s.opacity)).addValue(aL(n.hex,s[t.scaleKey||"colors"])||aP.makeArbitrary(n.hex)).toString():""}let o=i.find(t=>t.ns===e.property);if(!o)throw new a_(e.property);let c=aW(e.value,s[o.scaleKey]);return c&&(a.addValue(c),o.supportNegative&&l&&a.makeNegative()),a.toString()},aW=(e,t)=>{if(e){for(let[s,a]of Object.entries(t))if(Array.isArray(a)&&(s===e||a.includes(e))||s===e||a===e)return"DEFAULT"!==s?s:void 0;return aP.makeArbitrary(e)}},aB=["calc","min","max","clamp","mod","rem","sin","cos","tan","asin","acos","atan","atan2","pow","sqrt","hypot","log","exp","round"];function aG(e){return -1!==e.indexOf("(")&&aB.some(t=>e.includes("".concat(t,"(")))}function aH(e){return e.startsWith("url(")?e:e=function(e){if(-1===e.indexOf("(")||!aB.some(t=>e.includes(t)))return e;let t="",s=[];for(let a=0;a<e.length;a++){let l=e[a];if("("===l){t+=l;let n=a;for(let t=a-1;t>=0;t--){let s=e.charCodeAt(t);if(s>=48&&s<=57)n=t;else if(s>=97&&s<=122)n=t;else break}let r=e.slice(n,a);if(aB.includes(r)||s[0]&&""===r){s.unshift(!0);continue}s.unshift(!1);continue}if(")"===l)t+=l,s.shift();else if(","===l&&s[0]){t+=", ";continue}else if(" "===l&&s[0]&&" "===t[t.length-1])continue;else if(("+"===l||"*"===l||"/"===l||"-"===l)&&s[0]){let s=t.trimEnd(),n=s[s.length-1];if("+"===n||"*"===n||"/"===n||"-"===n||"("===n||","===n){t+=l;continue}" "===e[a-1]?t+="".concat(l," "):t+=" ".concat(l," ")}else if(s[0]&&e.startsWith("to-zero",a)){let s=a;a+=7,t+=e.slice(s,a+1)}else t+=l}return t}(e=function(e){let t="";for(let s=0;s<e.length;s++){let a=e[s];"\\"===a&&"_"===e[s+1]?(t+="_",s+=1):"_"===a?t+=" ":t+=a}return t}(e))}let aq={color:aK,length:a4,percentage:a2,number:function(e){return a0.test(e)||aG(e)},url:aY,position:function(e){let t=0;for(let s of aZ(e," ")){if("center"===s||"top"===s||"right"===s||"bottom"===s||"left"===s){t+=1;continue}if(!s.startsWith("var(")){if(a4(s)||a2(s)){t+=1;continue}return!1}}return t>0},"bg-size":function(e){let t=0;for(let s of aZ(e,",")){if("cover"===s||"contain"===s){t+=1;continue}let e=aZ(s," ");if(1!==e.length&&2!==e.length)return!1;e.every(e=>"auto"===e||a4(e)||a2(e))&&(t+=1)}return t>0},"line-width":function(e){return"thin"===e||"medium"===e||"thick"===e},image:function(e){let t=0;for(let s of aZ(e,","))if(!s.startsWith("var(")){if(aY(s)||aJ.test(s)||a$.test(s)){t+=1;continue}return!1}return t>0},"family-name":function(e){let t=0;for(let s of aZ(e,",")){let e=s.charCodeAt(0);if(e>=48&&e<=57)return!1;s.startsWith("var(")||(t+=1)}return t>0},"generic-name":function(e){return"serif"===e||"sans-serif"===e||"monospace"===e||"cursive"===e||"fantasy"===e||"system-ui"===e||"ui-serif"===e||"ui-sans-serif"===e||"ui-monospace"===e||"ui-rounded"===e||"math"===e||"emoji"===e||"fangsong"===e},"absolute-size":function(e){return"xx-small"===e||"x-small"===e||"small"===e||"medium"===e||"large"===e||"x-large"===e||"xx-large"===e||"xxx-large"===e},"relative-size":function(e){return"larger"===e||"smaller"===e},angle:function(e){return a6.test(e)},vector:function(e){return a3.test(e)},named:()=>!0},aX=/^url\(.*\)$/;function aY(e){return aX.test(e)}let a$=/^(?:element|image|cross-fade|image-set)\(/,aJ=/^(repeating-)?(conic|linear|radial)-gradient\(/,aQ=/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/,a0=new RegExp("^".concat(aQ.source,"$")),a1=new RegExp("^".concat(aQ.source,"%$"));function a2(e){return a1.test(e)||aG(e)}let a5=new RegExp("^".concat(aQ.source,"(").concat("cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cqw|cqh|cqi|cqb|cqmin|cqmax",")$"));function a4(e){return a5.test(e)||aG(e)}let a6=new RegExp("^".concat(aQ.source,"(").concat("deg|rad|grad|turn",")$")),a3=new RegExp("^".concat(aQ.source," +").concat(aQ.source," +").concat(aQ.source,"$"));class a8 extends Error{constructor(e,t){super("Found a matched plugin `".concat(e,"`, but the value `").concat(t,"` could not matched. This could be due to a misspelling or the given value is not covered by tailwind.config file.")),this.name="PluginNotFoundException"}}let a7=(e,t,s)=>{if("color"===t.type){let a=aC()(s,e.split("-").join("."));if(!a)throw new a8(t.ns,e);return"object"==typeof a&&a.DEFAULT&&(a=a.DEFAULT),{value:a,kind:t.type,class:t.class,raw:e}}let a=s[e];if(!a)throw new a8(t.ns,e);return{value:a,class:t.class,raw:e,kind:t.type}},a9=(e,t)=>{if(!e)return{root:"",kind:"error",message:"Empty input"};let s=aD(t),a={important:!1,negative:!1},l=aZ(e,":"),n=l.pop(),r=[];for(let e=l.length-1;e>=0;--e){let t=function(e,t){if("["===e[0]&&"]"===e[e.length-1]){let t=e.slice(1,-1);return{kind:"arbitrary",type:"misc",value:t="-"===t[0]&&"-"===t[1]?"var(".concat(t,")"):aH(t)}}return Object.keys(t).includes(e)?{kind:"named",type:"media",value:e}:{kind:"named",type:aR.get(e)||"misc",value:e}}(l[e],s.screens);null!==t&&r.push(t)}"!"===n[0]&&(a.important=!0,n=n.slice(1)),"-"===n[0]&&(a.negative=!0,n=n.slice(1));let i=aT.get(n);if(i)return{root:n,kind:"named",property:i.ns,value:i.value,valueDef:{class:i.class,raw:n,kind:"named",value:i.value},variants:r,modifier:null,important:a.important,negative:a.negative,arbitrary:!1};let[o,c]=function(e,t){if(t.has(e))return[e,null];let s=e.lastIndexOf("-");if(-1===s)return"@"===e[0]&&t.has("@")?["@",e.slice(1)]:[null,null];do{let a=e.slice(0,s);if(t.has(a))return[a,e.slice(s+1)];s=e.lastIndexOf("-",s-1)}while(s>0);return[null,null]}(n,aS);if(!o)return{root:n,kind:"error",message:"Tailwindcss core plugin not found"};let d=aS.get(o),u=null,[m,p=null]=aZ(c||"","/");if(p&&aK(m.replace(/[\[\]]/g,""),s)&&(u=aO(p,s.opacity)),m&&"["===m[0]&&"]"===m[m.length-1]){let e=m.slice(1,-1),t=function(e,t){if(e.startsWith("var("))return null;for(let a of t){var s;if(null===(s=aq[a])||void 0===s?void 0:s.call(aq,e))return a}return null}(e,Array.from(d.values()).map(e=>{let{type:t}=e;return t})),l=d.find(e=>e.type===t);if("color"===t){let t=az(e);if(!t)return{root:n,kind:"error",message:"Color is not correct"};m=aL(t.hex,s[(null==l?void 0:l.scaleKey)||"colors"])||t.hex}else d.length>0&&(l=d.find(e=>e.type===t)||d.find(e=>"color"!==e.type));return e=aH(e),{root:o,kind:"functional",property:l.ns,value:e,valueDef:{value:e,class:l.class,raw:m,kind:t||"named"},variants:r,modifier:u,arbitrary:!0,important:a.important,negative:a.negative}}c||(c="DEFAULT");let h=d.find(e=>{let{scaleKey:t}=e;return c.split("-")[0]in s[t]||m in s[t]});if(!h)return{root:n,kind:"error",message:'found "'.concat(d.map(e=>e.ns).join(", "),'" plugins but unable to determine which one is matched to given value "').concat(c,'".')};let x=a7("color"===h.type?m:c,h,s[h.scaleKey]);return{root:o,kind:"functional",property:h.ns,value:x.value,valueDef:x,variants:r,modifier:u,important:a.important,negative:a.negative,arbitrary:!1}},le=e=>{var t;return Object.entries((null==e?void 0:null===(t=e.theme)||void 0===t?void 0:t.screens)||{}).sort((e,t)=>parseInt(t[1])-parseInt(e[1])).concat([["default","0px"]])},lt=(e,t)=>e.findIndex(e=>{let[s]=e;return s===t}),ls=(e,t)=>e>=t,la=(e,t,s,a)=>{var l,n;let r=Array.isArray(t)?t:[t],i=le(s),o=r.map(e=>a9(e,s));if(o.some(e=>"error"===e.kind))return e;let c=e.split(/\s+/).filter(Boolean),d=c.filter(e=>{try{var t,l;let n=a9(e.trim(),s);if("error"===n.kind)return!0;return o.some(e=>"error"!==e.kind&&e.property===n.property)&&ls(lt(i,(null===(l=n.variants)||void 0===l?void 0:null===(t=l.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default"),lt(i,a||"default"))}catch(e){return!1}}),u=d.reduce((e,t)=>{var a,l,n,r;let o=a9(t.trim(),s),c=a9(e.trim(),s);return"error"===o.kind||"error"===c.kind?e:lt(i,(null===(l=o.variants)||void 0===l?void 0:null===(a=l.find(e=>"media"===e.type))||void 0===a?void 0:a.value)||"default")<lt(i,(null===(r=c.variants)||void 0===r?void 0:null===(n=r.find(e=>"media"===e.type))||void 0===n?void 0:n.value)||"default")?t:e},d[0])||"default",m=a9(u.trim(),s),p="error"!==m.kind&&(null===(n=m.variants)||void 0===n?void 0:null===(l=n.find(e=>"media"===e.type))||void 0===l?void 0:l.value)||"default";return[...c.filter(e=>{try{var t,a;let l=a9(e.trim(),s);if("error"===l.kind||!o.some(e=>"error"!==e.kind&&e.property===l.property))return!0;return((null===(a=l.variants)||void 0===a?void 0:null===(t=a.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default")!==(p||"default")}catch(e){return!0}}),p&&"default"!==p?r.map(e=>"".concat(p,":").concat(e)).join(" "):r.join(" ")].join(" ")},ll=e=>{let{className:t,property:s,config:a,currentBreakpoint:l}=e,n=le(a),r=t.split(/\s+/g).map(e=>{try{var t;let r=a9(e.trim(),a);if("error"===r.kind||r.property!==s)return null;let i=null===(t=r.variants)||void 0===t?void 0:t.find(e=>"media"===e.type);if(i&&l){let e=lt(n,i.value),t=lt(n,l);if(-1===t&&(t=n.length),e<t)return null}return{parsed:r,breakpoint:(null==i?void 0:i.value)||"default"}}catch(e){return null}}).filter(e=>null!==e);if(0===r.length)return null;if(!l)return r.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:lt(n,t.breakpoint)<lt(n,e.breakpoint)?t:e,r[0]).parsed;let i=lt(n,l),o=r.filter(e=>"default"===e.breakpoint||ls(lt(n,e.breakpoint),i));return 0===o.length?null:o.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:lt(n,t.breakpoint)<lt(n,e.breakpoint)?t:e,o[0]).parsed},ln=(e,t)=>{let s=le(e);if(!s)return"default";let a=t.getBoundingClientRect().width;for(let[e,t]of s){let s="string"==typeof t?parseInt(t):"number"==typeof t?t:null;if(null!==s&&a>=s)return e}return"default"},lr=e=>{if(void 0!==e)try{return JSON.parse(e)}catch(e){return}},li=()=>{let{code:e}=(0,to.v)(),t=(0,g.useMemo)(()=>{var t;return null===(t=e.find(e=>{let[t,s]=e;return(null==t?void 0:t.split("/").pop())==="tailwind.config.lov.json"}))||void 0===t?void 0:t[1]},[e]);return(0,g.useMemo)(()=>lr(t)||aN()({content:[]}),[t])},lo=e=>{let t=new Set,s=e.theme||{};for(let[e]of aT)t.add(e);for(let[e,a]of aS)for(let l of a){let a=s[l.scaleKey];if(a){for(let s of Object.keys(a))if("DEFAULT"===s)t.add(e);else{let a="".concat(e,"-").concat(s);t.add(a),l.supportNegative&&t.add("-".concat(a))}if("color"===l.type&&a){for(let[s,l]of Object.entries(a))if("object"==typeof l&&null!==l)for(let a of Object.keys(l))"DEFAULT"===a?t.add("".concat(e,"-").concat(s)):t.add("".concat(e,"-").concat(s,"-").concat(a))}}}return Array.from(t).sort()},lc=()=>{let e=li(),t=(0,eI.f6)(e=>e.visibleMode),{twi:s}=(0,aE.XM)({config:e,options:{merge:!0}}),a=(0,g.useCallback)((s,a)=>{let l=ao({visibleMode:t});if(!l)return s;let n=ln(e,l);return la(s,a,e,n)},[e,t]),l=(0,g.useCallback)(s=>{let{className:a,property:l}=s;if(!a)return null;let n=(0,eI.XE)(t),r=document.querySelector("iframe#".concat(n));if(!r)return null;let i=ln(e,r);return ll({className:a,property:l,config:e,currentBreakpoint:i})},[e,t]);return{theme:null==e?void 0:e.theme,parse:t=>a9(t,e),classname:t=>aV(t,e),updateTwClassname:a,classNameToStyle:s,getRelevantTwClass:l}},ld=()=>{let e=li(),t=(0,g.useMemo)(()=>lo(e),[e]);return{getAutocomplete:(0,g.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(!e.trim())return[];let a=e.toLowerCase();return t.sort((e,t)=>ay()(t,a)-ay()(e,a)).slice(0,s)},[t]),classNames:t}};var lu=s(5635),lm=s(85598),lp=s(49360),lh=s(94949);let lx=e=>{let{disabled:t,onImagesUploaded:s,onUrlSubmitted:a,maxSize:l=20971520,className:n}=e,{upload:r,download:i}=(0,lh.F)(),{authUser:o}=(0,b.Eu)(),c=(0,g.useCallback)(async e=>{let t=e.map(e=>({file:e,url:URL.createObjectURL(e),id:(0,lp.Z)(),type:e.type}));return(await Promise.all(t.map(async e=>{try{await r({fileName:e.id,file:e.file,continueOnError:!1});let{url:t}=await i({dir_name:o.uid,file_name:e.id});return{downloadUrl:t,name:"".concat(e.id,".").concat({"image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","image/webp":"webp"}[e.type]||"png"),type:e.type,id:e.id}}catch(t){return console.error("Failed to upload image ".concat(e.id,":"),t),null}}))).filter(e=>null!==e)},[r,i,o]),{getInputProps:d,open:u,getRootProps:m,isDragActive:h}=(0,lm.uI)({onDrop:async e=>{s(await c(e))},noClick:!0,noKeyboard:!0,maxSize:l,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]}});(0,g.useEffect)(()=>{let e=async e=>{var t;let a=Array.from((null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[]).filter(e=>e.type.startsWith("image/")).map(e=>e.getAsFile()).filter(e=>null!==e);a.length&&s(await c(a))};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[s,c,o]);let[x,f]=(0,g.useState)("");return(0,p.jsxs)("div",{className:(0,eo.cn)("group relative rounded-lg bg-input [&:has(:focus)]:border-accent",{"pointer-events-none":t},n),children:[h&&(0,p.jsx)("div",{className:"absolute inset-0 z-30 flex items-center justify-center rounded-lg bg-background/80",children:(0,p.jsxs)("div",{className:"rounded-lg bg-muted p-4 text-center",children:[(0,p.jsx)("p",{children:"Drop images here"}),(0,p.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Accepts PNG, JPG files up to ",l/1048576,"MB"]})]})}),(0,p.jsxs)("div",{...m(),children:[(0,p.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 border-none py-8 pt-10 text-sm disabled:cursor-not-allowed disabled:opacity-50",onClick:u,disabled:t,children:[(0,p.jsx)(ee.Z,{name:"add_photo_alternate"}),"Attach image"]}),(0,p.jsx)("input",{...d()})]}),(0,p.jsx)("form",{className:"flex gap-1 p-2",onSubmit:e=>{e.preventDefault(),a(e.target.elements.namedItem("image-url").value)},children:(0,p.jsxs)("div",{className:"relative w-full",children:[(0,p.jsx)(eJ.I,{name:"image-url",placeholder:"Image URL",className:"w-full bg-muted pr-16",disabled:t,onChange:e=>{f(e.target.value)},value:x}),(0,p.jsx)("div",{className:"absolute right-0 top-0 flex h-full items-center justify-center pr-1",children:(0,p.jsx)(J.z,{variant:"muted",type:"submit",size:"sm",className:(0,eo.cn)("opacity-0 transition-opacity",x?"opacity-100":"opacity-0"),disabled:t,children:"Add"})})]})})]})};var lf=s(76818);let lg=e=>{let{title:t,children:s,disabled:a,childrenWrapperClassName:l}=e;return(0,p.jsxs)("div",{className:(0,eo.cn)("grid grid-cols-[100px_1fr]",{hidden:a}),children:[(0,p.jsx)("p",{className:"my-auto text-sm font-medium text-muted-foreground",children:t}),(0,p.jsx)("div",{className:l,children:s})]})},lv=e=>{let{children:t,isDisabled:s}=e;return(0,p.jsx)("div",{className:(0,eo.cn)("border-px flex flex-col gap-1.5",{hidden:s}),children:t})},lb={content:"Content",margin:"Margin",background:"Background",borderRadius:"Border radius",image:"Image",resize:"Resize",fontSize:"Font size",textAlign:"Text align",padding:"Padding",fontWeight:"Font weight",color:"Color"},lj={spacing:[{key:"margin",title:lb.margin},{key:"padding",title:lb.padding}],typography:[{key:"fontSize",title:lb.fontSize},{key:"fontWeight",title:lb.fontWeight}]},ly=()=>{let e=as(),{selectedElements:t}=af(),{history:s,setHistory:a,currentClassName:l,setCurrentClassName:n}=(0,to.v)(),{setSelectedElements:r}=(0,e2.S9)(),i=ar(),{updateTwClassname:o,classNameToStyle:u,classname:m}=lc(),p=(0,g.useCallback)(e=>{a(t=>[...t,e].slice(-100))},[a]),h=(0,g.useCallback)(e=>{switch(e.type){case d.TEXT_CHANGE:i(e.element,t=>(0,aa.Rw)(t,e.newText));break;case d.IMAGE_CHANGE:i(e.element,t=>(0,aa.R5)(t,{src:e.newUrl}));break;case d.REMOVE_NODE:i(e.element,(e,t)=>{t.remove()});break;case d.CLASS_NAME_UPDATE:case d.CLASS_NAME_SET:i(e.element,t=>(0,aa.R5)(t,{className:e.newClassName}));break;case d.DUPLICATE_NODE:i(e.element,(e,t)=>{t.insertAfter(e)})}p(e)},[i,p]),x=(0,g.useCallback)(s=>{switch(s.type){case d.TEXT_CHANGE:i(s.element,e=>(0,aa.Rw)(e,s.oldText)),e({type:c.SET_ELEMENT_CONTENT,payload:{id:{filePath:s.element.filePath,lineNumber:s.element.lineNumber,col:s.element.col},content:s.oldText}}),r(t.map(e=>e.filePath===s.element.filePath&&e.lineNumber===s.element.lineNumber?{...e,textContent:s.oldText}:e));break;case d.IMAGE_CHANGE:i(s.element,e=>(0,aa.R5)(e,{src:s.oldUrl})),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.element.filePath,lineNumber:s.element.lineNumber,col:s.element.col},attrs:{src:s.oldUrl}}});break;case d.REMOVE_NODE:i(s.element,(e,t)=>{try{let e=JSON.parse(s.node);t.insertBefore(e)}catch(e){console.error("Failed to parse node",{item:s},e)}}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.element.filePath,lineNumber:s.element.lineNumber,col:s.element.col},attrs:{style:""}}});break;case d.CLASS_NAME_UPDATE:case d.CLASS_NAME_SET:i(s.element,e=>(0,aa.R5)(e,{className:s.oldClassName})),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.element.filePath,lineNumber:s.element.lineNumber,col:s.element.col},attrs:{style:u(s.oldClassName)}}}),t.some(e=>e.filePath===s.element.filePath&&e.lineNumber===s.element.lineNumber)&&n(s.oldClassName);break;case d.DUPLICATE_NODE:i(s.element,(e,t)=>{let s=t.getNextSibling();s&&s.remove()})}},[i,e,r,t,u,n]),f=(0,g.useCallback)(()=>{let e=s[s.length-1];e&&(x(e),a(e=>e.slice(0,-1)))},[s,a,x]),v=(0,g.useCallback)((s,a)=>{let l=String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),n="";i(s,e=>{var t;n=(null===(t=e.children[0])||void 0===t?void 0:t.value)||""}),n!==l&&(h({type:d.TEXT_CHANGE,element:s,oldText:n,newText:l}),e({type:c.SET_ELEMENT_CONTENT,payload:{id:{filePath:s.filePath,lineNumber:s.lineNumber,col:s.col},content:l}}),r(t.map(e=>e.filePath===s.filePath&&e.lineNumber===s.lineNumber?{...e,textContent:l}:e)))},[h,e,t,r,i]),b=(0,g.useCallback)(function(t,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,l="";i(t,e=>{var t,s;l=(null===(s=e.openingElement.attributes.find(e=>"JSXAttribute"===e.type&&"src"===e.name.name))||void 0===s?void 0:null===(t=s.value)||void 0===t?void 0:t.value)||""}),h({type:d.IMAGE_CHANGE,element:t,oldUrl:l,newUrl:s}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col},attrs:{src:a}}})},[h,i,e]),j=(0,g.useCallback)(t=>{S.ZP.capture("visual_edits:element_deleted"),e({type:c.GET_PARENT_ELEMENT,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col}}});let s="";i(t,e=>{s=(0,al.default)(e).code}),h({type:d.REMOVE_NODE,element:t,node:s}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col},attrs:{style:"display: none;"}}})},[i,h,e]),y=(0,g.useCallback)(t=>{let{element:s,className:a,reset:l=!1}=t,n=null;i(s,e=>{n=(0,aa.Xu)(e)}),h({type:d.CLASS_NAME_SET,element:s,oldClassName:n||"",newClassName:a}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.filePath,lineNumber:s.lineNumber,col:s.col},attrs:{style:u(a),...l?{class:a}:{}}}})},[u,h,i,e]),w=(0,g.useCallback)(t=>{let{element:s,newClassNames:a,preview:n=!1}=t,r=null,m=null;return(i(s,e=>{null!==(r=(0,aa.Xu)(e))&&(m=o(r,a))}),null===r||null===m)?l:(n||h({type:d.CLASS_NAME_UPDATE,element:s,oldClassName:r,newClassName:m}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:s.filePath,lineNumber:s.lineNumber,col:s.col},attrs:{"data-lov-dirty":"true",style:u(m)+";"+u(a)}}}),m)},[u,l,h,i,e,o]),N=(0,g.useCallback)(e=>{h({type:d.DUPLICATE_NODE,element:e})},[h]),E=(0,g.useCallback)((e,t)=>{n((0,aa.EE)(e,t))},[n]),k=(0,g.useCallback)(e=>{let{element:t,classObj:s,preview:a=!1}=e;try{let e=Array.isArray(s)?s.map(e=>m(e)):[m(s)],l=w({element:t,newClassNames:e,preview:a});return a||n(l),l}catch(e){return l}},[m,w,n,l]),C=(0,g.useCallback)(e=>{let{element:t,className:s,reset:a=!1}=e;y({element:t,className:s,reset:a}),n(s)},[y,n]);return{handleTextChange:v,handleImageChange:b,handleRemoveNode:j,updateElementClassName:w,setElementClassName:y,handleDuplicateNode:N,undoLastOperation:f,initializeClassName:E,handleUpdateClassName:k,handleUpdateClassNameAdvanced:C}};function lw(e){let{disabled:t,canEditText:s,element:a,onTextChange:l,imageUploadSection:n}=e,r=(0,lu.B)(a);return"img"===r?n:s?(0,p.jsx)(lg,{title:lb.content,disabled:!("text"===r||"button"===r||"link"===r),children:(0,p.jsx)(lf.g,{value:String(a.textContent||"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),disabled:!s||t,className:(0,eo.cn)("resize-none text-sm leading-snug placeholder-shown:text-ellipsis placeholder-shown:whitespace-nowrap","focus-visible:ring-0 focus-visible:ring-offset-0","max-h-[200px] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]","h-auto border bg-input focus:bg-input",!s&&"hidden"),placeholder:"Enter text here",onChange:e=>l(a,e.target.value)})}):(0,p.jsx)(lg,{title:lb.content,children:(0,p.jsx)("div",{className:"my-auto flex items-center justify-between",children:(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Content linked to backend or code. Ask AI to edit."})})})}var lN=s(92259),lE=s(82959),lk=s(18081),lC=s(93673),l_=s(9259);let lS=e=>{let{element:t,disabled:s}=e,{currentClassName:a,ast:l}=(0,to.v)(),n=(0,lu.B)(t),{initializeClassName:r,handleUpdateClassName:i}=ly();(0,g.useEffect)(()=>{r(t,l)},[t,l,r]);let{getRelevantTwClass:o,parse:c,classname:d}=lc(),u=(0,g.useMemo)(()=>{var e,t,s,l,n,r,i,c,d,u,m,p;if(!a)return;let h=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},x=o({className:a,property:"padding"}),f=o({className:a,property:"paddingY"}),g=o({className:a,property:"paddingX"});return{paddingTop:null!==(r=null!==(n=h(null===(e=o({className:a,property:"paddingTop"}))||void 0===e?void 0:e.value))&&void 0!==n?n:h(null==f?void 0:f.value))&&void 0!==r?r:h(null==x?void 0:x.value),paddingBottom:null!==(c=null!==(i=h(null===(t=o({className:a,property:"paddingBottom"}))||void 0===t?void 0:t.value))&&void 0!==i?i:h(null==f?void 0:f.value))&&void 0!==c?c:h(null==x?void 0:x.value),paddingLeft:null!==(u=null!==(d=h(null===(s=o({className:a,property:"paddingLeft"}))||void 0===s?void 0:s.value))&&void 0!==d?d:h(null==g?void 0:g.value))&&void 0!==u?u:h(null==x?void 0:x.value),paddingRight:null!==(p=null!==(m=h(null===(l=o({className:a,property:"paddingRight"}))||void 0===l?void 0:l.value))&&void 0!==m?m:h(null==g?void 0:g.value))&&void 0!==p?p:h(null==x?void 0:x.value)}},[o,a]),m=(0,g.useMemo)(()=>{var e,t,s,l,n,r,i,c,d,u,m,p;if(!a)return;let h=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},x=o({className:a,property:"margin"}),f=o({className:a,property:"marginY"}),g=o({className:a,property:"marginX"});return{marginTop:null!==(r=null!==(n=h(null===(e=o({className:a,property:"marginTop"}))||void 0===e?void 0:e.value))&&void 0!==n?n:h(null==f?void 0:f.value))&&void 0!==r?r:h(null==x?void 0:x.value),marginBottom:null!==(c=null!==(i=h(null===(t=o({className:a,property:"marginBottom"}))||void 0===t?void 0:t.value))&&void 0!==i?i:h(null==f?void 0:f.value))&&void 0!==c?c:h(null==x?void 0:x.value),marginLeft:null!==(u=null!==(d=h(null===(s=o({className:a,property:"marginLeft"}))||void 0===s?void 0:s.value))&&void 0!==d?d:h(null==g?void 0:g.value))&&void 0!==u?u:h(null==x?void 0:x.value),marginRight:null!==(p=null!==(m=h(null===(l=o({className:a,property:"marginRight"}))||void 0===l?void 0:l.value))&&void 0!==m?m:h(null==g?void 0:g.value))&&void 0!==p?p:h(null==x?void 0:x.value)}},[o,a]),h={margin:{horizontal:{property:"marginX",icon:lE.Z,placeholder:"X margin",value:null==m?void 0:m.marginLeft},vertical:{property:"marginY",icon:lN.Z,placeholder:"Y margin",value:null==m?void 0:m.marginTop}},padding:{horizontal:{property:"paddingX",icon:lk.Z,placeholder:"X padding",value:null==u?void 0:u.paddingLeft},vertical:{property:"paddingY",icon:lC.Z,placeholder:"Y padding",value:null==u?void 0:u.paddingTop}}},x=(0,g.useRef)({}),f=(0,g.useCallback)(e=>{var s;let a=e.property,l=Date.now();x.current[a]&&cancelAnimationFrame(x.current[a].rafId);let r=()=>{let e=x.current[a];if(e){let s=c(d(e.immediateValue));if("error"===s.kind)return;let r=s.valueDef.raw,o=[e.immediateValue];if("backgroundColor"===e.immediateValue.property&&"button"===n&&r.split("-").length>1){let[e,t]=r.split("-"),s=parseInt(t)-100;if((s=100*Math.floor(s/100))>0){let t="".concat(e,"-").concat(s);o.push({property:"backgroundColor",value:t,variants:[{kind:"named",type:"interaction",value:"hover"}]})}}i({element:t,classObj:o}),x.current[a].lastUpdateTime=l,delete x.current[a]}};x.current[a]={rafId:0,lastValue:e,immediateValue:e,lastUpdateTime:(null===(s=x.current[a])||void 0===s?void 0:s.lastUpdateTime)||0},x.current[a].rafId=requestAnimationFrame(()=>{r()})},[d,t,n,i,c]),v=null!==a;return(0,p.jsx)(p.Fragment,{children:v?(0,p.jsx)(lv,{isDisabled:"img"===n,children:lj.spacing.map(e=>{var t,a;let l=h[e.key];return(0,p.jsxs)(lg,{title:e.title,childrenWrapperClassName:"flex gap-1",children:[(0,p.jsx)(l_.R,{max:240,className:"h-7 flex-grow rounded-md bg-input",inputClassName:"h-7 pl-7",value:null!==(t=l.horizontal.value)&&void 0!==t?t:0,placeholder:l.horizontal.placeholder,name:l.horizontal.property,disabled:s,"aria-label":"".concat(e.title," horizontal scrubber"),onChange:e=>l.horizontal.value!==e&&f({property:l.horizontal.property,value:"".concat(e,"px")}),leftIconClassName:"pl-1.5",leftIcon:(0,p.jsx)(l.horizontal.icon,{className:"size-4 fill-muted-foreground"})}),(0,p.jsx)(l_.R,{max:240,value:null!==(a=l.vertical.value)&&void 0!==a?a:0,className:"h-7 flex-grow rounded-md bg-input",inputClassName:"h-7 pl-7",placeholder:l.vertical.placeholder,name:l.vertical.property,disabled:s,"aria-label":"".concat(e.title," vertical scrubber"),onChange:e=>l.vertical.value!==e&&f({property:l.vertical.property,value:"".concat(e,"px")}),leftIconClassName:"pl-1.5",leftIcon:(0,p.jsx)(l.vertical.icon,{className:"size-4 fill-muted-foreground"})})]},e.key)})}):(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Change the spacing by prompting in the chat box."})})};var lT=s(40756),lR=s(27339),lI=s(64266),lD=s(36254),lP=s(38846);let lO=e=>{let{size:t=.666,lightColor:s="#fff",darkColor:a="#ddd",...l}=e,n=t/2,r=(0,g.useId)();return(0,p.jsxs)("svg",{width:"100%",height:"100%",...l,children:[(0,p.jsx)("defs",{children:(0,p.jsxs)("pattern",{id:"".concat(r,"-transparent-pattern"),width:"".concat(t,"rem"),height:"".concat(t,"rem"),patternUnits:"userSpaceOnUse",children:[(0,p.jsx)("rect",{width:"".concat(t,"rem"),height:"".concat(t,"rem"),fill:s}),(0,p.jsx)("rect",{x:"0",width:"".concat(n,"rem"),height:"".concat(n,"rem"),y:"0",fill:a}),(0,p.jsx)("rect",{x:"".concat(n,"rem"),width:"".concat(n,"rem"),height:"".concat(n,"rem"),y:"".concat(n,"rem"),fill:a})]})}),(0,p.jsx)("rect",{width:"100%",height:"100%",fill:"url(#".concat(r,"-transparent-pattern)")})]})};var lA=s(26815);function lz(e){if(!e)return null;try{e=e.replace("#",""),(3===e.length||4===e.length)&&(e=e.split("").map(e=>e+e).join(""));let t=8===e.length,s=parseInt(e.slice(0,2),16),a=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16),n=t?parseInt(e.slice(6,8),16)/255:1;return{r:isNaN(s)?0:s,g:isNaN(a)?0:a,b:isNaN(l)?0:l,a:isNaN(n)?1:n}}catch(e){return null}}function lL(e,t,s,a){let l=e=>Math.round(e).toString(16).padStart(2,"0"),n=Math.round(255*a);return"#".concat(l(e)).concat(l(t)).concat(l(s)).concat(n<255?l(n):"")}function lM(e,t,s,a){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=Math.max(e/=255,t/=255,s/=255),r=Math.min(e,t,s),i=n-r,o=0,c=0===n?0:i/n;if(n===r)return{h:l,s:100*c,v:100*n,a};switch(n){case e:o=(t-s)/i+(t<s?6:0);break;case t:o=(s-e)/i+2;break;case s:o=(e-t)/i+4}return{h:360*(o/=6),s:100*c,v:100*n,a}}function lZ(e,t,s,a){let l=0,n=0,r=0,i=Math.floor(6*(e/=360)),o=6*e-i,c=(s/=100)*(1-(t/=100)),d=s*(1-o*t),u=s*(1-(1-o)*t);switch(i%6){case 0:l=s,n=u,r=c;break;case 1:l=d,n=s,r=c;break;case 2:l=c,n=s,r=u;break;case 3:l=c,n=d,r=s;break;case 4:l=u,n=c,r=s;break;case 5:l=s,n=c,r=d}return{r:Math.round(255*l),g:Math.round(255*n),b:Math.round(255*r),a:a}}let lF=e=>{if(!e)return{singles:[],groups:[]};let t=[],s=[];for(let[a,l]of Object.entries(e))if("string"!=typeof l){let e=[];for(let[t,s]of Object.entries(l))"string"!=typeof s||s.includes("--")||e.push(["".concat(a,"-").concat(t),s]);e.length>0&&s.push([a,e])}else{if(l.includes("--"))continue;t.push([a,l])}return{singles:t.filter(e=>{let[t]=e;return["black","white"].includes(t)}),groups:s}},lU=g.createContext(null);function lK(e){let{children:t}=e,[s,a]=g.useState(null),l=g.useRef(null),n=g.useCallback(e=>{a(e),l.current=e},[]),r=g.useRef(null),i=g.useCallback(()=>{a(null)},[]);return(0,p.jsxs)(lU.Provider,{value:{showTooltip:n,hideTooltip:i},children:[t,(0,p.jsx)("div",{ref:r,className:(0,eo.cn)("pointer-events-none fixed h-fit w-fit rounded-md border bg-muted px-2 py-1 text-sm text-foreground shadow-sm transition-opacity duration-100 ease-out","bottom-4 right-4 whitespace-nowrap capitalize",s?"opacity-100":"opacity-0"),children:l.current})]})}let lV=e=>{let{color:t,onClick:s,name:a}=e,l=g.useContext(lU),n="transparent"===t?(0,p.jsx)(lO,{size:.666,lightColor:"#fff",darkColor:"#ddd"}):(0,p.jsx)("div",{className:"h-full w-full rounded-sm",style:{backgroundColor:t,boxShadow:"0px 0px 0px 1px hsl(0deg 0% 98% / 10%) inset"}});return(0,p.jsx)(J.z,{className:"h-8 w-8 overflow-hidden rounded-sm border-none bg-transparent p-0 ring-white hover:ring-1",onClick:s,onMouseOver:e=>{e.currentTarget.getBoundingClientRect(),null==l||l.showTooltip(a)},onMouseLeave:()=>null==l?void 0:l.hideTooltip(),children:n})},lW=e=>{let{colors:t,onChange:s}=e,a=g.useMemo(()=>lF(t),[t]);return(0,p.jsx)(lK,{children:(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[a.groups.map(e=>{let[t,a]=e;return(0,p.jsxs)("div",{children:[(0,p.jsx)(lA.Label,{className:"block pb-2 text-sm capitalize",children:t}),(0,p.jsx)("div",{className:"flex flex-row flex-wrap gap-1.5",children:a.map(e=>{let[t,a]=e;return(0,p.jsx)(lV,{color:a,onClick:()=>s(t),name:t},t)})})]},t)}),(0,p.jsxs)("div",{children:[(0,p.jsx)(lA.Label,{className:"block pb-4 text-sm capitalize",children:"Other Colors"}),(0,p.jsxs)("div",{className:"flex flex-row flex-wrap gap-1.5",children:[a.singles.map(e=>{let[t,a]=e;return(0,p.jsx)(lV,{color:a,onClick:()=>s(t),name:t},t)}),(0,p.jsx)(lV,{color:"transparent",onClick:()=>s("transparent"),name:"transparent"}),(0,p.jsx)(lV,{color:"black",onClick:()=>s("inherit"),name:"inherit"})]})]})]})})};function lB(e){let{color:t,onChange:s,presetColors:a,children:l,disabled:n=!1}=e,[r,i]=g.useState(()=>lz(t)||{r:0,g:0,b:0,a:1}),[o,c]=g.useState(()=>lM(r.r,r.g,r.b,r.a,0)),[d,u]=g.useState(t),[m,h]=g.useState(!1);g.useEffect(()=>{if(t===d)return;let e=lz(t)||{r:0,g:0,b:0,a:1},s=lM(e.r,e.g,e.b,e.a,o.h);i(e),c(s),u(t)},[t,d,o.h]);let x=g.useRef(null),[f,v]=g.useState(!1),b=g.useCallback(e=>{var t;let a=null===(t=x.current)||void 0===t?void 0:t.getBoundingClientRect();if(!a)return;let l=Math.min(Math.max(0,e.clientX-a.left),a.width),n=Math.min(Math.max(0,e.clientY-a.top),a.height),r=l/a.width*100,d=100-n/a.height*100,u=lZ(o.h,r,d,o.a);i(u),c({...o,s:r,v:d,a:o.a}),s(lL(u.r,u.g,u.b,u.a))},[o,s]);g.useEffect(()=>{let e=e=>{f&&b(e)},t=()=>{v(!1),document.body.classList.remove("select-none")};return f&&(document.body.classList.add("select-none"),window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{document.body.classList.remove("select-none"),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[f,b]);let j=g.useCallback(e=>{let[t]=e;c({...o,h:t});let a=lZ(t,o.s,o.v,o.a);i(a),s(lL(a.r,a.g,a.b,a.a))},[o,s]),y=g.useCallback(e=>{let[t]=e;c({...o,a:t});let a=lZ(o.h,o.s,o.v,t);i(a),s(lL(a.r,a.g,a.b,a.a))},[o,s]);return(0,p.jsxs)(eQ.J2,{open:m,onOpenChange:n?void 0:h,children:[(0,p.jsx)(eQ.xo,{disabled:n,asChild:!0,children:l}),(0,p.jsx)(eQ.yk,{className:"mb-0 flex w-[285px] flex-col overflow-y-hidden rounded-lg border border-muted-border bg-popover px-0 pb-0 pt-0 shadow-lg",style:{maxHeight:"var(--radix-popover-content-available-height)"},collisionPadding:5,onKeyDown:e=>{"Escape"===e.key&&(h(!1),e.preventDefault(),e.stopPropagation())},children:(0,p.jsxs)(tr.mQ,{defaultValue:"styles",className:"flex min-h-0 flex-1 flex-col",children:[(0,p.jsxs)(tr.dr,{className:"my-1 w-full px-4",children:[(0,p.jsx)(tr.SP,{disabled:n,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"styles",children:"Styles"}),(0,p.jsx)(tr.SP,{disabled:n,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"custom",children:"Custom"})]}),(0,p.jsx)(tr.nU,{value:"styles",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,p.jsx)(lK,{children:!!a&&(0,p.jsx)(lW,{colors:a,onChange:s})})}),(0,p.jsx)(tr.nU,{value:"custom",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{ref:x,className:"relative h-56 w-full rounded-md ".concat(n?"cursor-not-allowed opacity-50":"cursor-default"),style:{backgroundColor:"hsl(".concat(o.h,", 100%, 50%)"),backgroundImage:"linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)"},onMouseDown:e=>{n||(v(!0),b(e))},children:(0,p.jsx)("div",{className:"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow-md shadow-muted/50",style:{left:"".concat(o.s,"%"),top:"".concat(100-o.v,"%"),backgroundColor:"rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b)}})}),(0,p.jsxs)(lP.fC,{disabled:n,min:0,max:360,step:1,value:[o.h],onValueChange:j,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",children:[(0,p.jsx)(lP.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full bg-primary/20",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},children:(0,p.jsx)(lP.e6,{className:"absolute h-full bg-primary opacity-0"})}),(0,p.jsx)(lP.bU,{className:"block h-4 w-4 rounded-full border-2 border-primary bg-background shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",style:{backgroundColor:"hsl(".concat(o.h,", 100%, 50%)")}})]}),(0,p.jsxs)(lP.fC,{disabled:n,min:0,max:1,step:.01,value:[o.a],onValueChange:y,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",style:{"--value":lL(r.r,r.g,r.b,1)},children:[(0,p.jsxs)(lP.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full",children:[(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)(lO,{size:.666,lightColor:"#fff",darkColor:"#ddd"})}),(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)("div",{className:"h-full w-full",style:{background:"linear-gradient(to right, transparent 0%, ".concat(lL(r.r,r.g,r.b,1)," 100%)")}})})]}),(0,p.jsx)(lP.bU,{className:"relative block h-4 w-4 rounded-full border-2 border-primary bg-white shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",children:(0,p.jsx)("span",{className:"absolute inset-0 rounded-full",style:{backgroundColor:lL(r.r,r.g,r.b,o.a)}})})]})]}),(0,p.jsx)("div",{className:"grid gap-2",children:(0,p.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(0,p.jsxs)("div",{children:[(0,p.jsx)(lA.Label,{className:"text-xs",htmlFor:"hex",children:"Hex"}),(0,p.jsx)(eJ.I,{id:"hex",disabled:n,value:d,onChange:e=>{if(n)return;let t=e.target.value;u(t);let a=lz(t);a&&(i(a),c(lM(a.r,a.g,a.b,a.a,0)),s(t))},className:"h-8 bg-input"})]})})})]})})]})})]})}var lG=s(74991);let lH=e=>{var t;let{inputValue:s,cursorPosition:a}=e;if(!s.trim()||null===a)return null;let l=s.substring(0,a),n=s.substring(a),r=l.split(/\s+/),i=(r[r.length-1]||"")+((null===(t=n.match(/^[^\s]*/))||void 0===t?void 0:t[0])||"");if(0===i.length)return null;let o=i.lastIndexOf(":");if(-1!==o){let e=i.substring(0,o+1),t=i.substring(o+1),s=t.length>0;return{completeWord:i,hasModifier:!0,modifier:e,classAfterColon:t,hasClassAfterColon:s}}return{completeWord:i,hasModifier:!1,modifier:"",classAfterColon:"",hasClassAfterColon:!1}},lq=e=>{let{wordInfo:t,getAutocomplete:s,limit:a}=e;if(!t)return{suggestions:[],shouldShow:!1};let{hasModifier:l,modifier:n,classAfterColon:r,hasClassAfterColon:i,completeWord:o}=t;if(l){if(i){let e=s(r,a).map(e=>n+e);return{suggestions:e,shouldShow:e.length>0}}return{suggestions:[],shouldShow:!1}}{let e=s(o,a);return{suggestions:e,shouldShow:e.length>0}}},lX=e=>{var t;let{element:s,currentClassName:a,disabled:l,isOpen:n,onUpdateClassName:r}=e,{getAutocomplete:i}=ld(),o=(0,g.useRef)(null),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(""),[h,x]=(0,g.useState)(null),[f,v]=(0,g.useState)(""),b=(0,g.useRef)(null),j=(0,g.useRef)([]),y=(0,g.useCallback)(e=>{v(e)},[]),w=(0,g.useCallback)(()=>{let e=o.current;e&&x(e.selectionStart||0)},[]);(0,g.useEffect)(()=>{let e=e=>{let t=e.target,s=b.current;!s||s.contains(t)||t instanceof Element&&(t.closest('[role="dialog"]')||t.closest("[cmdk-root]")||t.closest("[data-radix-popper-content-wrapper]"))||d(!1)};if(c)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[c]);let N=(0,g.useMemo)(()=>lq({wordInfo:lH({inputValue:u,cursorPosition:h}),getAutocomplete:i,limit:10}).suggestions,[u,h,i]),E=(0,g.useCallback)(e=>{let t=o.current;if(!t||null===h)return;let a=u.substring(0,h),l=u.substring(h),n=a.split(/\s+/),i=n[n.length-1]||"",c=l.match(/^[^\s]*/),p=(null==c?void 0:c[0])||"",f=l.substring(p.length),g=a.substring(0,a.length-i.length),v=(g+e+" "+f).replace(/\s+/g," ");m(v),r({element:s,className:v}),d(!1),setTimeout(()=>{t.focus();let s=g.length+e.length+1;t.setSelectionRange(s,s),x(s)},0)},[u,h,s,r]),k=(0,g.useCallback)(()=>{d(lq({wordInfo:lH({inputValue:u,cursorPosition:h}),getAutocomplete:i,limit:10}).shouldShow)},[u,h,i]);(0,g.useEffect)(()=>{m(a||"")},[a]),(0,g.useEffect)(()=>{k()},[k]),(0,g.useEffect)(()=>{c&&N.length>0?v(N[0]):v("")},[c,N]);let C=(0,g.useMemo)(()=>N.indexOf(f),[N,f]);return(0,g.useEffect)(()=>{if(C>=0&&j.current[C]){var e;null===(e=j.current[C])||void 0===e||e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[C]),(0,p.jsx)(eF.E.div,{initial:{opacity:0,height:0},animate:{opacity:n?1:0,height:n?"auto":0},transition:{duration:.15,bounce:0},className:"mb-3 flex flex-row gap-2",children:(0,p.jsx)("div",{ref:b,className:"relative w-full pt-2",children:(0,p.jsxs)(eQ.J2,{open:!0,children:[(0,p.jsx)(eQ.xo,{asChild:!0,children:(0,p.jsx)(lf.g,{ref:o,disabled:l,value:u,className:"w-full !resize-none bg-input outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-1 focus-visible:ring-offset-0",placeholder:"Enter Tailwind classes...",onChange:e=>{let t=e.target.value;m(t),r({element:s,className:t}),x(e.target.selectionStart||0)},onKeyUp:w,onClick:w,onSelect:w,onKeyDown:e=>{if("Escape"===e.key)d(!1);else if("Enter"===e.key)f&&N.includes(f)&&(e.preventDefault(),E(f));else if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t=(N.indexOf(f)+("ArrowDown"===e.key?1:-1)+N.length)%N.length;y(N[t]||"")}setTimeout(w,0)},onFocus:e=>{x(e.currentTarget.selectionStart||0)}})}),(0,p.jsx)(eQ.yk,{className:(0,eo.cn)("max-h-40 w-full overflow-y-auto p-0",{hidden:!c}),side:"bottom",align:"start",style:{width:null===(t=o.current)||void 0===t?void 0:t.offsetWidth},children:(0,p.jsx)(e$.mY,{autoFocus:!1,value:f,onValueChange:y,children:(0,p.jsx)(e$.e8,{children:(0,p.jsx)(e$.fu,{children:N.map((e,t)=>(0,p.jsx)("div",{ref:e=>{j.current[t]=e},children:(0,p.jsx)(e$.di,{value:e,onSelect:()=>E(e),children:(0,p.jsx)("span",{className:"text-xs",children:e})})},e))})})})})]})})})},lY=(e,t,s)=>{let{setActiveView:a}=(0,O.pE)(),{openFileAtLine:l,openFileAtLineRange:n}=(0,tm.r)(),{hideVisualEditsPanel:r}=(0,e2.S9)();return(0,g.useCallback)(()=>{if(!e.filePath)return;a("dev-mode");let i=(0,aa.xA)(e,t);i?n(e.filePath,i.startLine,i.endLine):l(e.filePath,e.lineNumber),(null==s?void 0:s.hidePanel)&&r()},[e,a,t,null==s?void 0:s.hidePanel,n,l,r])},l$=e=>{let t,s;if(!e)return;let a=1;if(e.modifier){var l,n;a=(null===(l=e.modifier)||void 0===l?void 0:l.startsWith("["))&&(null===(n=e.modifier)||void 0===n?void 0:n.endsWith("]"))?parseFloat(e.modifier.replace(/[\[\]]/g,"")):parseInt(e.modifier)/100}if("inherit"===e.valueDef.raw)return;"transparent"===e.valueDef.raw&&(a=0),e.valueDef.raw.startsWith("#")?s=e.valueDef.raw:(t=e.valueDef.raw,s=e.value);let r=lz(s);if(!r)return{name:t,hex:void 0};let i=lL(r.r,r.g,r.b,a);return{name:t||i,hex:i,hexWithoutAlpha:lL(r.r,r.g,r.b,1)}},lJ={fontSize:{xs:"XS",base:"Body",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL","4xl":"4XL","5xl":"5XL","6xl":"6XL","7xl":"7XL","8xl":"8XL","9xl":"9XL"},borderRadius:{none:"None",DEFAULT:"Default",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL",full:"Full"}},lQ=e=>{var t,s;let{element:a,isDisabled:l,immediateValues:n,debouncedOnClassNameUpdate:r,onSelectParent:i}=e,{currentClassName:o,ast:c}=(0,to.v)(),d=(0,lu.B)(a),{handleUpdateClassName:u,handleUpdateClassNameAdvanced:m}=ly(),{theme:h,getRelevantTwClass:x}=lc(),f=lY(a,c,{hidePanel:!0}),v={fontSize:{property:"fontSize",placeholder:"Select font size",getValue:(e,t)=>{var s;return(null===(s=t({className:e,property:"fontSize"}))||void 0===s?void 0:s.valueDef.raw)||"base"},options:e=>Object.entries((null==e?void 0:e.fontSize)||{}),nameMap:lJ.fontSize},fontWeight:{property:"fontWeight",placeholder:"Select weight",getValue:(e,t)=>{var s;return null===(s=t({className:e,property:"fontWeight"}))||void 0===s?void 0:s.valueDef.raw},options:e=>Object.entries((null==e?void 0:e.fontWeight)||{}).filter(e=>{let[t]=e;return"black"!==t}),nameMap:null}},b=l$(x({className:o,property:"textColor"})),j=l$(x({className:o,property:"backgroundColor"})),[y,w]=(0,g.useState)(!1),N=(0,g.useCallback)((e,t)=>{var s;return null!==(s=n[e])&&void 0!==s?s:t},[n]),E=null===(t=x({className:o,property:"textAlign"}))||void 0===t?void 0:t.value,k=null!==o,C="text"!==d&&"button"!==d,_="div"!==d&&"button"!==d,T=C&&_;return(0,p.jsx)(p.Fragment,{children:k?(0,p.jsxs)(p.Fragment,{children:[T?null:(0,p.jsxs)("div",{className:"flex flex-grow flex-col gap-2",children:[(0,p.jsxs)(lv,{isDisabled:C,children:[lj.typography.map(e=>{let t=v[e.key];return(0,p.jsx)(lg,{title:e.title,children:(0,p.jsxs)(ab.Ph,{name:t.property,disabled:l,onValueChange:e=>{e&&(S.ZP.capture("visual_edits:".concat(t.property,"_changed")),r({property:t.property,value:e}))},onOpenChange:e=>{e||u({element:a,classObj:[{property:t.property,value:t.getValue(o,x)}]})},value:t.getValue(o,x),children:[(0,p.jsx)(ab.i4,{className:"h-7 bg-input",name:t.property,"aria-label":"".concat(e.title," selector"),children:(0,p.jsx)(ab.ki,{placeholder:t.placeholder})}),(0,p.jsx)(ab.Bw,{children:t.options(h).map(e=>{var s;let[l,n]=e;return(0,p.jsx)(ab.Ql,{"data-value":l,value:l,onFocus:e=>{let s=e.target.getAttribute("data-value");s&&requestAnimationFrame(()=>{u({element:a,classObj:[{property:t.property,value:s}],preview:!0})})},children:t.nameMap?null!==(s=t.nameMap[l])&&void 0!==s?s:l:(0,p.jsx)("span",{className:"capitalize",children:l})},l)})})]})},e.key)}),(0,p.jsx)(lg,{title:lb.color,children:(0,p.jsx)(lB,{disabled:l,presetColors:null==h?void 0:h.colors,color:N("textColor",null==b?void 0:b.hex)||"transparent",onChange:e=>{e&&(S.ZP.capture("visual_edits:text_color_changed"),r({property:"textColor",value:e||"inherit"}))},children:(0,p.jsxs)(J.z,{variant:"outline",disabled:l,className:"flex h-7 w-full justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,p.jsxs)("div",{className:"relative mr-1 h-4 w-4 shrink-0 overflow-hidden rounded-full",children:[(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)(lO,{})}),(0,p.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==b?void 0:b.hexWithoutAlpha}}),(0,p.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==b?void 0:b.hex}})]}),(0,p.jsx)("span",{className:"truncate",children:(null==b?void 0:b.name)||"Inherit"})]})},"".concat(a.filePath,":").concat(a.lineNumber))}),(0,p.jsx)(lg,{title:lb.textAlign,children:(0,p.jsxs)(lG.E,{className:"flex flex-row justify-end gap-1",value:E,onValueChange:e=>r({property:"textAlign",value:e}),children:[(0,p.jsxs)(lA.Label,{title:"Left",children:[(0,p.jsx)(lG.m,{value:"left",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(J.z,{variant:"outline",className:(0,eo.cn)("bg-input p-2",{"bg-accent":"left"===E}),onClick:()=>r({property:"textAlign",value:"left"}),children:(0,p.jsx)(lI.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,p.jsxs)(lA.Label,{title:"Center",children:[(0,p.jsx)(lG.m,{value:"center",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(J.z,{variant:"outline",className:(0,eo.cn)("bg-input p-1.5",{"bg-accent":"center"===E}),onClick:()=>r({property:"textAlign",value:"center"}),children:(0,p.jsx)(lT.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,p.jsxs)(lA.Label,{title:"Right",children:[(0,p.jsx)(lG.m,{value:"right",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(J.z,{variant:"outline",className:(0,eo.cn)("bg-input p-2",{"bg-accent":"right"===E}),onClick:()=>r({property:"textAlign",value:"right"}),children:(0,p.jsx)(lD.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,p.jsxs)(lA.Label,{title:"Justify",children:[(0,p.jsx)(lG.m,{value:"justify",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(J.z,{variant:"outline",className:(0,eo.cn)("bg-input p-2",{"bg-accent":"justify"===E}),onClick:()=>r({property:"textAlign",value:"justify"}),children:(0,p.jsx)(lR.Z,{className:"size-4 fill-muted-foreground"})})]})]})})]}),(0,p.jsxs)(lv,{isDisabled:_,children:[(0,p.jsx)(lg,{title:lb.background,children:(0,p.jsx)(lB,{disabled:l,color:N("backgroundColor",null==j?void 0:j.hex)||"transparent",onChange:e=>{e&&(S.ZP.capture("visual_edits:background_color_changed"),r({property:"backgroundColor",value:e||"inherit"}))},presetColors:null==h?void 0:h.colors,children:(0,p.jsxs)(J.z,{variant:"outline",disabled:l,className:"flex h-7 w-full items-center justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,p.jsxs)("div",{className:"relative mr-2 size-3.5 overflow-hidden rounded-full",children:[(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)(lO,{})}),(0,p.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==j?void 0:j.hexWithoutAlpha}}),(0,p.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==j?void 0:j.hex}})]}),(0,p.jsx)("span",{className:"truncate",children:(null==j?void 0:j.name)||"Inherit"})]})},"".concat(a.filePath,":").concat(a.lineNumber))}),(0,p.jsx)(lg,{title:lb.borderRadius,children:(0,p.jsxs)(ab.Ph,{disabled:l,onValueChange:e=>e&&r({property:"borderRadius",value:e}),value:(null===(s=x({className:o,property:"borderRadius"}))||void 0===s?void 0:s.valueDef.raw)||"none",children:[(0,p.jsx)(ab.i4,{className:"h-7 bg-input hover:bg-input",children:(0,p.jsx)(ab.ki,{placeholder:"Select border radius"})}),(0,p.jsx)(ab.Bw,{children:Object.entries((null==h?void 0:h.borderRadius)||{}).map(e=>{var t;let[s,a]=e;return(0,p.jsx)(ab.Ql,{value:s,children:null!==(t=lJ.borderRadius[s])&&void 0!==t?t:"Default"},s)})})]})})]})]}),(0,p.jsxs)(eQ.J2,{open:y,onOpenChange:w,children:[(0,p.jsx)(eQ.xo,{asChild:!0,children:(0,p.jsxs)(J.z,{variant:"ghost",className:"w-full justify-between gap-1",children:["Advanced",(0,p.jsx)(ee.Z,{name:"chevron_right",size:"small"})]})}),(0,p.jsx)(eQ.yk,{side:"right",align:"start",children:(0,p.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,p.jsxs)(J.z,{onClick:i,variant:"ghost",className:"justify-start pl-2",children:[(0,p.jsx)(ee.Z,{name:"ink_selection",size:"small"}),"Select parent"]}),a.filePath&&(0,p.jsxs)(J.z,{onClick:f,variant:"ghost",className:"justify-start pl-2",children:[(0,p.jsx)(ee.Z,{name:"code",size:"small"}),"Go to code"]}),(0,p.jsx)(lX,{element:a,currentClassName:o,disabled:l,isOpen:y,onUpdateClassName:m})]})})]})]}):(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Change the styles by prompting in the chat box."})})};function l0(e){let{element:t,canEdit:s,isSaving:a,handleRemoveNode:l,isDisabled:n}=e;return(0,p.jsxs)(Q.Vq,{children:[(0,p.jsx)(Q.hg,{children:(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(J.z,{disabled:!s||a||n,variant:"ghost",size:"icon-sm","aria-label":"quick actions",className:"hover:bg-destructive",children:(0,p.jsx)(ee.Z,{name:"delete",size:"small",className:"size-6 text-destructive-foreground"})})}),(0,p.jsx)(ei._v,{children:(0,p.jsx)("p",{children:"Delete element"})})]})}),(0,p.jsx)(Q.cZ,{className:"p-4",size:"sm",children:(0,p.jsxs)(Q.fK,{children:[(0,p.jsx)(Q.$N,{children:"Delete Element"}),(0,p.jsx)(Q.Be,{children:"Are you sure you want to delete this element?"}),(0,p.jsxs)(Q.cN,{className:"flex gap-2 pt-4",children:[(0,p.jsx)(Q.GG,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"outline",children:"Cancel"})}),(0,p.jsx)(Q.GG,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"destructive",onClick:()=>l(t),children:"Delete"})})]})]})})]})}function l1(e){var t;let{element:s,canEdit:a,isSaving:l}=e,n=as(),[r,i]=(0,g.useState)({}),{authUser:o}=(0,b.Eu)(),d=(0,e2.UC)(e=>e.activeEditContent),{setActiveEditContent:u}=(0,e2.S9)(),{ast:m,currentClassName:h}=(0,to.v)(),{handleRemoveNode:x,handleDuplicateNode:f,undoLastOperation:v,initializeClassName:j,handleTextChange:y,handleImageChange:w,handleUpdateClassName:N}=ly(),{getRelevantTwClass:E,parse:k,classname:C}=lc(),_=(0,g.useRef)({});(0,g.useEffect)(()=>{j(s,m)},[s,m,j]),(0,g.useEffect)(()=>{let e=e=>{if(e.data.type===c.KEYBIND){let{compositeKey:t}=e.data.payload}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s,f,x,v]);let T=(0,tn.A7)(e=>e.addUpload),R=(0,lu.B)(s),I=l||!a||null===h,D=(0,g.useCallback)(e=>{var t;let a=e.property,l=Date.now();i(t=>({...t,[a]:e.value})),_.current[a]&&cancelAnimationFrame(_.current[a].rafId);let n=()=>{let e=_.current[a];if(e){let t=k(C(e.immediateValue));if("error"===t.kind)return;let n=t.valueDef.raw,r=[e.immediateValue];if("backgroundColor"===e.immediateValue.property&&"button"===R&&n.split("-").length>1){let[e,t]=n.split("-"),s=parseInt(t)-100;if((s=100*Math.floor(s/100))>0){let t="".concat(e,"-").concat(s);r.push({property:"backgroundColor",value:t,variants:[{kind:"named",type:"interaction",value:"hover"}]})}}N({element:s,classObj:r}),_.current[a].lastUpdateTime=l,delete _.current[a]}};_.current[a]={rafId:0,lastValue:e,immediateValue:e,lastUpdateTime:(null===(t=_.current[a])||void 0===t?void 0:t.lastUpdateTime)||0},_.current[a].rafId=requestAnimationFrame(()=>{n()})},[C,s,R,N,k]),P=(0,eI.f6)(e=>"live"!==e.visibleMode&&"live"===e.targetMode),{hasInitialCode:O}=(0,to.v)(),A=P||!O,z=(0,p.jsxs)(lv,{isDisabled:"img"!==R,children:[(0,p.jsx)(lg,{title:lb.image,children:(0,aa.cB)(s,m,"src")?(0,p.jsx)(lx,{disabled:I||!(0,aa.cB)(s,m,"src"),onUrlSubmitted:e=>w(s,e),onImagesUploaded:e=>{e.length>0&&(S.ZP.capture("visual_edits:image_uploaded"),T({dir_name:o.uid,file_name:e[0].name,type:e[0].type,id:e[0].id}),w(s,"/lovable-uploads/".concat(e[0].name),e[0].downloadUrl))}}):(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"This element contains dynamic elements and its image cannot be manually edited. Please use the chat to change the image."})}),(0,p.jsx)(lg,{title:lb.resize,children:(0,p.jsxs)(ab.Ph,{disabled:I,onValueChange:e=>e&&D({property:"objectFit",value:e}),value:((null===(t=E({className:h,property:"objectFit"}))||void 0===t?void 0:t.valueDef.raw)||"object-none").replace("object-",""),children:[(0,p.jsx)(ab.i4,{className:"bg-input",children:(0,p.jsx)(ab.ki,{placeholder:"Select border radius"})}),(0,p.jsxs)(ab.Bw,{className:"bg-popover",children:[(0,p.jsx)(ab.Ql,{value:"contain",children:"Contain"}),(0,p.jsx)(ab.Ql,{value:"cover",children:"Cover"}),(0,p.jsx)(ab.Ql,{value:"fill",children:"Fill"}),(0,p.jsx)(ab.Ql,{value:"none",children:"None"}),(0,p.jsx)(ab.Ql,{value:"scale-down",children:"Scale down"})]})]})})]}),L=(0,aa.H2)(s,m),M="text"===R||"button"===R||"link"===R,Z=!L&&!M;return(0,p.jsx)("div",{className:"flex shrink-0 items-center gap-1.5",children:A?(0,p.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[(0,p.jsx)("p",{className:"text-sm",children:"Starting live preview..."}),(0,p.jsx)(av.$,{variant:"ring",size:"default"})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(eQ.J2,{open:"quickActions"===d,onOpenChange:e=>u(e?"quickActions":null),children:[(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(eQ.xo,{asChild:!0,children:Z?null:(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm","aria-label":"visual edit quick actions",disabled:A,className:(0,eo.cn)({"bg-affirmative-primary text-white hover:bg-affirmative-primary":"quickActions"===d}),children:(0,p.jsx)(ee.Z,{name:"img"===R?"image":"text_fields",size:"small"})})})}),(0,p.jsx)(ei._v,{children:(0,p.jsx)("p",{children:"img"===R?"Edit image":"Edit content"})})]}),(0,p.jsx)(eQ.yk,{side:"bottom",align:"center",className:"p-2",children:(0,p.jsx)(lw,{element:s,disabled:!a,canEditText:L,onTextChange:y,imageUploadSection:z})})]}),(0,p.jsxs)(eQ.J2,{open:"spacing"===d,onOpenChange:e=>u(e?"spacing":null),children:[(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(eQ.xo,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm","aria-label":"visual edit spacing",disabled:A,className:(0,eo.cn)({"bg-affirmative-primary text-white hover:bg-affirmative-primary":"spacing"===d}),children:(0,p.jsx)(ee.Z,{name:"zoom_out_map",size:"small"})})})}),(0,p.jsx)(ei._v,{children:(0,p.jsx)("p",{children:"Edit spacing"})})]}),(0,p.jsx)(eQ.yk,{side:"bottom",align:"center",className:"p-2",children:(0,p.jsx)(lS,{element:s,disabled:I})})]}),(0,p.jsxs)(eQ.J2,{open:"style"===d,onOpenChange:e=>u(e?"style":null),children:[(0,p.jsxs)(ei.u,{children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)(eQ.xo,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm","aria-label":"visual edit style",disabled:A,className:(0,eo.cn)({"bg-affirmative-primary text-white hover:bg-affirmative-primary":"style"===d}),children:(0,p.jsx)(ee.Z,{name:"brush",size:"small"})})})}),(0,p.jsx)(ei._v,{children:(0,p.jsx)("p",{children:"Edit styles"})})]}),(0,p.jsx)(eQ.yk,{side:"bottom",align:"center",className:"flex flex-col gap-2 p-2",children:(0,p.jsx)(lQ,{element:s,isDisabled:I,immediateValues:r,debouncedOnClassNameUpdate:D,onSelectParent:()=>{n({type:c.GET_PARENT_ELEMENT,payload:{id:{filePath:s.filePath,lineNumber:s.lineNumber,col:s.col}}})}})})]}),(0,p.jsx)(l0,{element:s,canEdit:a,isSaving:l,handleRemoveNode:x,isDisabled:A})]})})}function l2(e){let{selectedElement:t,prevSelectedElementRef:s,selectedElements:a}=e,l=(0,$.iZ)(e=>e.projectId),{turnOffVisualEditing:n}=(0,e2.S9)(),r=(0,g.useRef)(null),i=(0,e2.UC)(e=>e.customPromptValue),{setCustomPromptValue:o}=(0,e2.S9)(),{hasUnsavedChanges:c}=(0,to.v)(),d=(0,e2.UC)(e=>e.isVisualEditingActive)&&c;(0,g.useEffect)(()=>{var e,a;t.id!==(null===(e=s.current)||void 0===e?void 0:e.id)&&void 0!==t.id&&(null===(a=r.current)||void 0===a||a.focus())},[t,s]);let u=(0,s6.mo)({projectId:l}),m=async e=>{if(e.preventDefault(),i.trim()&&!u.isPending){if(d){v.Am.error("Save the manual edits first.",{duration:6e3});return}await u.mutateAsync({body:{id:(0,z.Fd)(),message:i.trim(),images:[],selected_elements:a,chat_only:!1,agent_mode:void 0},clear:()=>{o(""),n()}})}};return(0,p.jsxs)("form",{className:"flex h-full w-full items-center gap-1.5",onSubmit:m,children:[(0,p.jsx)(eJ.I,{placeholder:"Ask for quick changes...",value:i,disabled:d,onChange:e=>o(e.target.value),className:(0,eo.cn)("h-8 min-w-0 grow border-none p-0 shadow-none focus-visible:ring-0 focus-visible:ring-offset-0",{"opacity-40":d}),ref:r}),(0,p.jsx)("button",{type:"submit",disabled:d,className:(0,eo.cn)("flex h-5 w-6 items-center justify-center rounded-full bg-muted-foreground text-popover",{"bg-affirmative-primary text-white":!!i}),children:(0,p.jsx)(ee.Z,{name:"arrow_upward_alt_600",size:"small"})})]})}let l5=e=>{let{position:t}=e,{selectedElements:s,canEdit:a}=af(),{turnOffVisualEditing:l,closeVisualEditsPanel:n}=(0,e2.S9)(),r=s[0],{syncCode:i,generateAst:o,hasUnsavedChanges:d,refreshPreview:u}=(0,to.v)(),{undoLastOperation:m}=ly();(0,tn.A7)(e=>e.clearPendingChanges),(0,tn.A7)(e=>e.clearUploads);let{snapshot:h}=(0,tn.ag)(),x=(0,g.useRef)(null),f=(0,e2.UC)(e=>e.isSaving),{setIsSaving:v}=(0,e2.S9)(),b=(0,g.useCallback)(async()=>(S.ZP.capture("visual_edits:save_clicked"),v(!0),i(h.getPendingChanges()).then(()=>{v(!1),l()})),[v,h,i,l]);(0,en.y1)("meta+z",e=>{e.preventDefault(),a&&m()}),(0,en.y1)("meta+enter",e=>{e.preventDefault(),a&&b().finally(()=>{l()})}),(0,en.y1)("esc",e=>{e.preventDefault(),n()},{enableOnFormTags:!0});let j=as();(0,g.useEffect)(()=>()=>{j({type:c.TOGGLE_SELECTOR,payload:{isActive:!1}}),j({type:c.UPDATE_SELECTED_ELEMENTS,payload:[]})},[j]);let y=(0,g.useRef)(null);return(0,g.useEffect)(()=>{let e=e=>{if(e.data.type===c.KEYBIND){let{compositeKey:t}=e.data.payload;switch(t){case"Meta+z":a&&m();break;case"Meta+Enter":a&&b()}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[a,b,d,l,m]),(0,p.jsxs)(eF.E.div,{className:"fixed z-[9999] flex items-center gap-3 rounded-2xl bg-popover px-3",style:{width:400,left:t.x,top:t.y,boxShadow:"0px 0px 10px 0px rgba(0, 0, 0, 0.1)"},initial:!1,animate:{height:40},transition:{duration:0},ref:x,children:[(0,p.jsx)("div",{className:"relative h-full w-full",children:(0,p.jsx)(l2,{selectedElement:r,prevSelectedElementRef:y,selectedElements:s,onSave:b})}),(0,p.jsx)("div",{className:"w-[3px] bg-muted-hover",style:{height:24}}),(0,p.jsx)(l1,{element:r,canEdit:a,isSaving:f})]})},l4=()=>{let{handleDeactivatePickAndEdit:e}=af(),{enableServer:t}=(0,to.v)(),{setIsPickAndEditActive:s}=(0,e2.S9)();return(0,g.useEffect)(()=>(t(),s(!0),()=>{e()}),[t,e,s]),null},l6=()=>{let e=(0,e2.UC)(e=>e.isVisualEditingActive),t=(0,e2.UC)(e=>e.visualEditsPanelState),{turnOffVisualEditing:s}=(0,e2.S9)();return ag(),(0,g.useEffect)(()=>{let e=e=>{if(e.data.type===c.KEYBIND){let{compositeKey:t}=e.data.payload;switch(t){case"Alt+S":case"Alt+\xdf":s()}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s]),(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(l4,{}),e&&t.isOpen&&(0,p.jsx)(l5,{position:t.position})]})};var l3=s(30166),l8=s(88568),l7=s(90045),l9=s(40236),ne=s(23260),nt=s(55214),ns=s.n(nt),na=s(89396);let nl={add_dependency:{icon:"deployed_code",color:"text-green-500"},remove_dependency:{icon:"deployed_code",color:"text-red-500"},delete:{icon:"scan_delete",color:"text-red-500"},delete_directory:{icon:"scan_delete",color:"text-red-500"},edit:{icon:"note_stack",color:"text-yellow-500"},new:{icon:"note_add",color:"text-green-500"},rename:{icon:"swap_horiz",color:"text-blue-500"},rename_directory:{icon:"swap_horiz",color:"text-blue-500"}},nn=["delete","delete_directory","add_dependency","remove_dependency","rename","rename_directory"],nr=e=>{let{filePath:t,oldFilePath:s,operation:a,className:l,contentToCopy:n}=e,[r,i]=(0,g.useState)(!1),o=async()=>{if(n)try{await navigator.clipboard.writeText(n),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){(0,w.Eo)(e)}};return(0,p.jsxs)("div",{className:(0,eo.cn)("flex flex-row items-center gap-2 rounded-t-lg bg-transparent font-mono",l,{"rounded-b-lg":nn.includes(a)}),children:[(0,p.jsx)(ee.Z,{name:nl[a].icon,className:nl[a].color,size:"small"}),s&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:s}),(0,p.jsx)(ee.Z,{name:"arrow_right",className:"text-muted-foreground",size:"small"})]}),(0,p.jsx)("span",{className:"flex-1",children:t}),n&&(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm",onClick:o,className:"ml-auto text-muted-foreground hover:text-foreground",children:(0,p.jsx)(ee.Z,{name:r?"check":"content_copy",size:"default"})})]})},ni=e=>{let{className:t,...s}=e;return(0,p.jsx)(nr,{...s,className:(0,eo.cn)("border border-border px-3 py-2 text-sm font-medium",t)})},no=e=>{let{code:t,className:a}=e,[l,n]=(0,g.useState)(!0),[r,i]=(0,g.useState)(null),[o,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(1),[m,h]=(0,g.useState)(1),[x,f]=(0,g.useState)({x:0,y:0}),[v,b]=(0,g.useState)(!1),[j,y]=(0,g.useState)({x:0,y:0}),[w,N]=(0,g.useState)(!1),[E,k]=(0,g.useState)(!1),{resolvedTheme:C}=(0,tl.F)(),_=(0,g.useRef)(null),S=(0,g.useRef)(null),T=(0,g.useRef)(null),R=(0,g.useRef)(null),{exitConsole:I}=(0,O.pE)(),D=(0,g.useCallback)(e=>{let t=e.trim();return(t=t.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).trim()},[]),P=(0,g.useCallback)(()=>{if(!S.current||!T.current)return;let e=S.current,t=T.current.querySelector("svg");if(!t)return;let s=e.getBoundingClientRect(),a=s.width-40,l=s.height-80,n=t.getBoundingClientRect(),r=n.width/a,i=n.height/l;if(r>=.2&&r<=.9&&i>=.2&&i<=.9){u(1),h(1),k(!0);return}u(.8*Math.min(a/n.width,l/n.height)),h(1),f({x:0,y:0}),k(!0)},[]),A=(0,g.useCallback)(async()=>{if(!(null==t?void 0:t.trim())){i("No diagram code provided"),n(!1);return}try{n(!0),i(null),c(""),k(!1),u(1),h(1),_.current||(_.current=(await Promise.all([s.e(9183),s.e(656)]).then(s.bind(s,50656))).default);let e=_.current;if(!e)throw Error("Failed to load mermaid");let a="dark"===C;e.initialize({startOnLoad:!1,theme:a?"dark":"default",securityLevel:"loose",fontFamily:"Inter, system-ui, sans-serif",suppressErrorRendering:!0});let l=D(t),r="mermaid-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o=await e.render(r,l);if(o&&o.svg)c(o.svg),n(!1);else throw Error("No SVG content returned from mermaid")}catch(e){i(e instanceof Error?"Diagram syntax error: ".concat(e.message.split("\n")[0]):"Failed to render diagram"),n(!1)}},[t,C,D]),z=d*m,L=()=>h(e=>Math.min(1.5*e,10)),M=()=>h(e=>Math.max(e/1.5,.1)),Z=()=>{h(1),f({x:0,y:0})},F=()=>b(!1);(0,g.useEffect)(()=>{let e=e=>{if(w)switch(e.key){case"+":case"=":e.preventDefault(),L();break;case"-":e.preventDefault(),M();break;case"0":e.preventDefault(),Z();break;case"Escape":e.preventDefault(),N(!1)}};if(w)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[w,m]),(0,g.useEffect)(()=>{A()},[A]),(0,g.useEffect)(()=>{if(o&&!E&&S.current&&T.current){let e=setTimeout(()=>{P()},300);return()=>clearTimeout(e)}},[o,E,P]),(0,g.useEffect)(()=>{let e=R.current;if(!e)return;let t=e=>{if(e.preventDefault(),e.stopPropagation(),!S.current)return;let t=S.current.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top,l=-.015*e.deltaY,n=d*m,r=Math.min(Math.max(m*(1+l),.1),10),i=d*r/n,o=t.width/2,c=t.height/2,u=s-o-(s-o-x.x)*i,p=a-c-(a-c-x.y)*i;h(r),f({x:u,y:p})};return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}},[d,m,x.x,x.y]);let U=(0,p.jsxs)("div",{className:(0,eo.cn)("relative flex-1 bg-background",w?"fixed inset-0 z-50 rounded-none":"h-full",a),ref:S,children:[(0,p.jsx)("div",{className:"absolute left-4 top-4 z-10 flex gap-2",children:(0,p.jsxs)(J.z,{variant:"secondary",size:"sm",onClick:()=>{N(!1),I()},children:[(0,p.jsx)(ee.Z,{name:"close",size:"small"}),"Close"]})}),o&&(0,p.jsx)("div",{className:"absolute right-4 top-4 z-10 flex gap-2",children:(0,p.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border bg-background/80 px-2 py-1 backdrop-blur-sm",children:[(0,p.jsx)("button",{onClick:M,className:"rounded p-1 hover:bg-accent",title:"Zoom out (-)",children:(0,p.jsx)(ee.Z,{name:"remove",size:"small"})}),(0,p.jsxs)("span",{className:"min-w-12 px-2 text-center font-mono text-xs",children:[Math.round(100*m),"%"]}),(0,p.jsx)("button",{onClick:L,className:"rounded p-1 hover:bg-accent",title:"Zoom in (+)",children:(0,p.jsx)(ee.Z,{name:"add",size:"small"})}),(0,p.jsx)("button",{onClick:Z,className:"ml-1 rounded p-1 hover:bg-accent",title:"Reset zoom (0)",children:(0,p.jsx)(ee.Z,{name:"refresh",size:"small"})})]})}),(0,p.jsxs)("div",{className:"flex h-full flex-col",children:[l&&(0,p.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,p.jsx)("div",{className:"text-sm text-muted-foreground",children:"Rendering diagram..."})}),r&&(0,p.jsxs)("div",{className:"m-4 rounded-lg border border-destructive/20 bg-destructive/5 p-4",children:[(0,p.jsx)("div",{className:"text-sm font-medium text-destructive",children:"Diagram Error"}),(0,p.jsx)("div",{className:"mt-1 text-sm text-destructive/80",children:r}),(0,p.jsxs)("details",{className:"mt-2",children:[(0,p.jsx)("summary",{className:"cursor-pointer text-sm text-muted-foreground",children:"Show diagram code"}),(0,p.jsx)("pre",{className:"mt-2 overflow-x-auto rounded bg-muted p-2 text-xs",children:t})]})]}),o&&(0,p.jsx)("div",{ref:R,className:(0,eo.cn)("relative min-h-0 flex-1 overflow-hidden",w?"cursor-grab":"",v?"cursor-grabbing":""),onMouseDown:e=>{e.preventDefault(),b(!0),y({x:e.clientX-x.x,y:e.clientY-x.y})},onMouseMove:e=>{v&&(e.preventDefault(),f({x:e.clientX-j.x,y:e.clientY-j.y}))},onMouseUp:F,onMouseLeave:F,style:{userSelect:"none",overscrollBehavior:"contain"},children:(0,p.jsx)("div",{className:"flex h-full w-full origin-center items-center justify-center",style:{transform:"scale(".concat(z,") translate(").concat(x.x/z,"px, ").concat(x.y/z,"px)")},children:(0,p.jsx)("div",{ref:T,dangerouslySetInnerHTML:{__html:o}})})})]}),w&&(0,p.jsx)("div",{className:"absolute bottom-4 left-4 rounded bg-background/80 px-2 py-1 text-xs text-muted-foreground backdrop-blur-sm",children:"Use +/- to zoom, drag to pan, Esc to exit"})]});return w?(0,p.jsxs)(p.Fragment,{children:[U,(0,p.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm"})]}):U},nc=[ne.Z],nd=(0,g.memo)(e=>{let{part:t}=e,{resolvedTheme:s}=(0,tl.F)(),a="dark"===s?tc.Lm:tc.C0,l=(0,g.useMemo)(()=>({code(e){let{node:t,className:s,children:l}=e;return/language-(\w+)/.exec(s||"")?(0,p.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,p.jsx)(ta.ZP,{readOnly:!0,value:String(l).replace(/\n$/,""),className:(0,eo.cn)("flex-1 overflow-y-auto",tu().editor),theme:a,extensions:tc.A4})}):(0,p.jsx)("span",{className:"rounded bg-muted px-1.5 py-0.5 font-mono text-sm",children:l})}}),[a]);switch(t.type){case"writing_file":return(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)(ni,{filePath:t.file_path,operation:"new",contentToCopy:t.content}),(0,p.jsx)("div",{className:"overflow-hidden rounded-b-lg border-x border-b",children:(0,p.jsx)(ta.ZP,{readOnly:!0,value:t.content,className:(0,eo.cn)("flex-1 overflow-y-auto",tu().editor),theme:a,basicSetup:{foldGutter:!1,foldKeymap:!1},extensions:tc.A4})})]});case"text":return(0,p.jsx)("div",{className:"prose prose-zinc prose-markdown mb-2 max-w-full dark:prose-invert ".concat(ns().customProse," prose-h1:mb-2 prose-h1:text-xl prose-h1:font-medium prose-h2:text-lg prose-h2:font-medium prose-h3:text-base prose-h3:font-medium prose-pre:my-2 prose-ol:my-2 prose-ul:my-2 prose-li:my-0"),children:(0,p.jsx)(l9.UG,{remarkPlugins:nc,components:l,children:t.content})});case"edit":let n=t.search_replace_parts.map(e=>e.replace).join("\n\n");return(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)(ni,{filePath:t.file_path,operation:"edit",contentToCopy:n}),(0,p.jsx)("div",{className:"rounded-b-lg border-x border-b",children:t.search_replace_parts.map((e,t)=>(0,p.jsxs)("div",{className:"mb-1 p-2",children:[(0,p.jsxs)("div",{className:"mb-1 flex text-sm text-foreground",children:[(0,p.jsx)("span",{className:"flex-1",children:"Search"}),(0,p.jsx)("span",{className:"flex-1",children:"Replace"})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(ta.ZP,{readOnly:!0,value:e.search,className:(0,eo.cn)("flex-1 overflow-y-auto",tu().editor),theme:a,extensions:tc.A4}),(0,p.jsx)(ta.ZP,{readOnly:!0,value:e.replace,className:(0,eo.cn)("flex-1 overflow-y-auto",tu().editor),theme:a,extensions:tc.A4})]})]},t))})]});case"delete":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(ni,{filePath:t.file_path,operation:"delete"})});case"rename":return(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(ni,{filePath:t.new_file_path,oldFilePath:t.original_file_path,operation:"rename"})});case"add_dependency":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(ni,{filePath:t.dependency,operation:"add_dependency",className:"rounded-lg"})});case"remove_dependency":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(ni,{filePath:t.removed_dependency,operation:"remove_dependency",className:"rounded-lg"})});case"error":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsxs)("div",{className:"flex items-center rounded-lg border border-warning-primary p-3 text-sm font-medium",children:[(0,p.jsx)(ee.Z,{name:"warning",className:"mr-2 text-warning-foreground",size:"small"}),(0,p.jsx)("span",{children:t.error_message})]})});case"lov-mermaid":if(!t.done)return(0,p.jsxs)("div",{className:"mb-4 flex items-center gap-2 text-sm text-muted-foreground",children:[(0,p.jsx)(ee.Z,{name:"progress_activity",size:"small",className:"animate-spin"}),(0,p.jsx)("span",{children:"Generating diagram..."})]});return(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(no,{code:t.mermaidCode})});case"tool_use":var r,i,o,c,d;if("lov-add-dependency"===t.name)return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(ni,{filePath:null!==(r=t.parsedData.package)&&void 0!==r?r:"",operation:"add_dependency",className:"rounded-lg"})});if("lov-remove-dependency"===t.name)return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(ni,{filePath:null!==(i=t.parsedData.package)&&void 0!==i?i:"",operation:"remove_dependency",className:"rounded-lg"})});if("lov-delete"===t.name)return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(ni,{filePath:null!==(o=t.parsedData.file_path)&&void 0!==o?o:"",operation:"delete"})});if("lov-rename"===t.name)return(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(ni,{filePath:null!==(c=t.parsedData.new_file_path)&&void 0!==c?c:"",oldFilePath:null!==(d=t.parsedData.original_file_path)&&void 0!==d?d:"",operation:"rename"})});return(0,p.jsx)(na.Y,{name:t.name,parsedData:t.parsedData,done:t.done,duration:t.duration});default:return null}},(e,t)=>{let s=e.part,a=t.part;if(s.type!==a.type)return!1;switch(s.type){case"text":return s.content===a.content;case"writing_file":return s.file_path===a.file_path&&s.content===a.content;case"edit":if(s.search_replace_parts.length!==a.search_replace_parts.length)return!1;return s.file_path===a.file_path&&s.search_replace_parts.every((e,t)=>{let s=a.search_replace_parts[t];return e.search===s.search&&e.replace===s.replace});case"delete":return s.file_path===a.file_path;case"rename":return s.original_file_path===a.original_file_path&&s.new_file_path===a.new_file_path;case"add_dependency":return s.dependency===a.dependency&&s.isDevDependency===a.isDevDependency;case"remove_dependency":return s.removed_dependency===a.removed_dependency;case"error":return s.error_message===a.error_message;case"lov-mermaid":return s.mermaidCode===a.mermaidCode&&s.done===a.done;case"tool_use":return s.name===a.name&&s.data===a.data&&s.done===a.done&&s.duration===a.duration;default:return!1}});var nu=s(96139);(r=(n=u||(u={})).action||(n.action={})).NEW="new",r.RENAME="rename",r.RENAME_DIRECTORY="rename_directory",r.DELETE="delete",r.DELETE_DIRECTORY="delete_directory",r.EDIT="edit",r.ADD_DEPENDENCY="add_dependency";var nm=e=>{let{oldContent:t,newContent:s,filePath:a,originalFilePath:l,action:n,editable:r=!1,onChange:i}=e,[o,c]=(0,g.useState)(!0),[d,m]=(0,g.useState)(!1),[h,x]=(0,g.useState)(s),[f,b]=(0,g.useState)(!1),j=(0,ew.v)(),{addPendingChange:y,enableServer:N,syncCode:E}=(0,to.v)(),k=h!==s,C=(0,g.useCallback)(e=>{x(e),y({path:a,content:e}),N(),null==i||i(a,e)},[y,a,N,i]),{resolvedTheme:_}=(0,tl.F)(),T="dark"===_?tc.Lm:tc.C0,I=async()=>{try{await navigator.clipboard.writeText(s),m(!0),setTimeout(()=>m(!1),2e3),S.ZP.capture(R.SL.CONSOLE.DIFF_COPIED)}catch(e){(0,w.Eo)(e)}},D=(0,g.useCallback)(async()=>{if(k){b(!0);try{await E({[a]:h},{commitMessage:"Manual edit: ".concat(a)}),v.Am.success("Changes saved")}catch(e){(0,w.Eo)(e)}finally{b(!1)}}},[k,a,h,E]);return(0,p.jsxs)("div",{className:"overflow-hidden rounded-lg border border-border",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)(ni,{filePath:a,className:"border-none",oldFilePath:l,operation:n}),(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[!r&&(0,p.jsxs)("div",{className:"text-muted-foregroun mr-1 flex items-center gap-1 text-xs",children:[(0,p.jsx)(ee.Z,{name:"info",size:"small"}),"Only latest edits can be modified"]}),r&&k&&(0,p.jsx)(J.z,{variant:"affirmative",size:"sm",onClick:D,loading:f,disabled:f,className:"mr-1",children:"Save"}),j&&(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm",onClick:I,className:"text-muted-foreground hover:text-foreground",title:d?"Copied!":"Copy diff content",children:(0,p.jsx)(ee.Z,{name:d?"check":"content_copy",size:"default"})}),n!==u.action.DELETE&&(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm",onClick:()=>c(e=>!e),className:"mr-1",children:(0,p.jsx)(ee.Z,{name:o?"unfold_less":"unfold_more",size:"default"})})]})]}),h&&(0,p.jsx)(eF.E.div,{initial:{height:0},animate:{height:o?"auto":0},exit:{height:0},transition:{duration:.25},children:(0,p.jsx)(ta.ZP,{className:(0,eo.cn)(tu().editor,"border-t"),readOnly:!r,theme:T,extensions:[...tc.A4,ta.tk.editable.of(r),(0,nu.Z)({original:t,mergeControls:!1})],value:h,onChange:C})})]},a)};function np(){return(0,p.jsx)("div",{className:"flex flex-col rounded-lg border border-border",children:(0,p.jsx)("div",{className:"flex items-center justify-between p-3",children:(0,p.jsx)("div",{className:"h-3 w-80 animate-pulse rounded bg-muted"})})})}let nh=g.memo(e=>{var t,s;let{activeEdit:a,editable:l=!1}=e,[n,r]=(0,g.useState)(Math.min(2,(null==a?void 0:null===(t=a.diff)||void 0===t?void 0:t.length)||0)),i=(0,g.useRef)(null);return(0,g.useEffect)(()=>()=>{null!==i.current&&clearTimeout(i.current)},[]),(0,g.useEffect)(()=>{(null==a?void 0:a.diff)&&n<a.diff.length&&(i.current=window.setTimeout(()=>{r(e=>{var t;return Math.min(e+2,(null===(t=a.diff)||void 0===t?void 0:t.length)||0)})},50))},[n,null==a?void 0:a.diff]),(0,p.jsx)("div",{className:"flex flex-col gap-4",children:null==a?void 0:null===(s=a.diff)||void 0===s?void 0:s.map((e,t)=>(0,p.jsx)(g.Fragment,{children:t<n?(0,p.jsx)(nm,{oldContent:e.old_content,newContent:e.new_content,filePath:e.file_path,originalFilePath:e.original_file_path,action:e.action,editable:l}):(0,p.jsx)(np,{})},"".concat(e.action,"-").concat(e.file_path,"-").concat(t)))})});nh.displayName="DiffView";let nx=e=>{var t,s,a;let{errors:l,allErrors:n}=e,r=l.find(e=>{var t;return null===(t=e.meta_data)||void 0===t?void 0:t.url}),i=null==r?void 0:null===(t=r.meta_data)||void 0===t?void 0:t.url,o=null==r?void 0:null===(s=r.meta_data)||void 0===s?void 0:s.method,c=null==r?void 0:null===(a=r.meta_data)||void 0===a?void 0:a.origin,d=l.length===n.length?"This":"At least one of these";return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-sm",children:[d," is a Cross-Origin Resource Sharing (CORS) error. It means that the HTTP call you made is not allowed by the server. This could be because the server is not configured to accept requests from the client URL. Unfortuantely this is not something that the AI can fix for you since we don't control the server you're trying to communicate with."]}),(0,p.jsx)("p",{className:"text-sm",children:"If you are in control of the server, please configure the server to accept requests from the client URL. If you are not in control of the server, please contact the server administrator to configure the server to accept requests from the client URL. If it's not possible to change the CORS configuration, explore other API services that do allow requests directly from the browser."}),(0,p.jsx)("table",{className:"text-sm",children:(0,p.jsxs)("tbody",{children:[i&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"font-medium",children:"URL"}),(0,p.jsx)("td",{children:i})]}),o&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"font-medium",children:"Method"}),(0,p.jsx)("td",{children:o})]}),c&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"font-medium",children:"Origin"}),(0,p.jsx)("td",{children:c})]})]})})]})};var nf=s(42503),ng=s(5707),nv=s(40878);let nb=e=>"string"==typeof e?e:(0,nf.l)((0,ng.K)(e.seconds),new Date),nj=e=>{switch(e){case sh.N.CORS_ERROR:return"CORS error";case sh.N.HTTP_SERVER_ERROR:return"HTTP server error";case sh.N.HTTP_CLIENT_ERROR:return"HTTP client error";case sh.N.SUPABASE_EDGE_FUNCTION_ERROR:return"Supabase edge function error";case sh.N.BUILD:return"Build error";case sh.N.RUNTIME:case sh.N.IMMEDIATE_RUNTIME:return"Runtime error";default:return"Error"}};function ny(e){let{hideFn:t}=e,{clearBlankScreenErrors:s}=(0,k.D)();return(0,p.jsx)(J.z,{variant:"secondary",size:"sm",onClick:()=>{s(),t()},children:"Dismiss"})}function nw(e){let{error:t,hideFn:s}=e,a=(0,W.D)(),{onClick:l,isPending:n}=(0,sx.hw)({projectId:a,errors:[t]}),r=(0,A.bk)(e=>e.isSendChatMessageMutationPending),{setShowConsole:i}=(0,O.pE)(),{setView:o}=(0,nv.zp)(),c=(0,y.Z)("md");return(0,p.jsxs)(J.z,{variant:"secondary",size:"sm",disabled:n||r,onClick:()=>{i(null),c&&o(nv.$.CHAT),s(),l()},children:[(0,p.jsx)(ee.Z,{name:"bolt",size:"small"}),"Try to fix"]})}let nN=e=>{let{error:t}=e,[s,a]=(0,g.useState)(!1),{setShowConsole:l}=(0,O.pE)();return s?null:(0,p.jsxs)("div",{className:"mb-4 mt-2 rounded-xl bg-warning",children:[(0,p.jsxs)("div",{className:"flex flex-row items-center justify-between pb-1 pl-3 pr-1.5 pt-1.5",children:[(0,p.jsxs)("div",{className:"flex flex-row items-center text-sm text-warning-foreground",children:[(0,p.jsx)(ee.Z,{name:"warning",size:"small",className:"mr-2"}),(0,p.jsx)("p",{className:"mr-2 font-medium",children:nj(t.type)}),(0,p.jsx)("p",{className:"leading-none",children:nb(t.created_at)})]}),(0,p.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,p.jsx)(ny,{hideFn:()=>{a(!0),l(null)}}),(0,p.jsx)(nw,{error:t,hideFn:()=>{a(!0)}})]})]}),(0,p.jsx)(sx.UL,{errors:[t],roundedTop:!1})]})},nE=e=>{var t,s,a;let{errors:l,allErrors:n}=e;return l.length!==n.length?(0,p.jsx)("p",{className:"text-sm",children:"At least one of these HTTP calls failed which means that the server or API you're trying to communicate with is not working properly. Unfortunately this is not something that the AI can fix for you since we don't control the server that you're trying to communicate with."}):(0,p.jsxs)("p",{className:"text-sm",children:["This is an HTTP server error which means that the server or API you're trying to communicate with is not working properly.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),"Unfortunately this is not something that the AI can fix for you since we don't control the server that you're trying to communicate with.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(null===(t=l[0].meta_data)||void 0===t?void 0:t.url)&&!(null===(s=l[0].meta_data)||void 0===s?void 0:s.status)&&(0,p.jsxs)(p.Fragment,{children:["Please validate that the url"," ",(0,p.jsx)("pre",{className:"inline-block rounded bg-secondary p-1",children:null===(a=l[0].meta_data)||void 0===a?void 0:a.url})," ","is correct."]})]})},nk=e=>{let{errors:t}=e;if(!sx.t6[t[0].type])return null;let s=[...t].sort((e,t)=>t.created_at.seconds-e.created_at.seconds),a=s.filter(e=>e.type===sh.N.CORS_ERROR),l=s.filter(e=>e.type===sh.N.HTTP_SERVER_ERROR);return(0,p.jsxs)(p.Fragment,{children:[a.length>0&&(0,p.jsx)(nx,{errors:a,allErrors:t}),l.length>0&&(0,p.jsx)(nE,{errors:l,allErrors:t}),t.map(e=>(0,p.jsx)(nN,{error:e},e.id))]})},nC=()=>{let e=(0,O.Sl)(e=>e.activeConsoleErrorContent),t=(0,W.v)();if(!t)throw Error("Project ID is required and should always be set here");return e&&0!==e.length?(0,p.jsx)(nk,{errors:e,projectId:t}):null},n_=(0,l3.default)(()=>s.e(5941).then(s.bind(s,5941)).then(e=>e.ConsoleDebug),{loadableGenerated:{webpack:()=>[5941]},loading:()=>(0,p.jsx)("div",{className:"flex h-full items-center justify-center",children:"Loading debug view..."})}),nS=(0,l3.default)(()=>s.e(4273).then(s.bind(s,24273)).then(e=>e.ConsoleAnnotation),{loadableGenerated:{webpack:()=>[24273]},loading:()=>(0,p.jsx)("div",{className:"flex h-full items-center justify-center",children:"Loading annotation view..."})}),nT=(e,t)=>{let s="".concat(t,"-");switch(e.type){case"text":let a=e.content.trim().substring(0,20)||"empty-text";s+="text-".concat(a);break;case"writing_file":s+="file-".concat(e.file_path);break;case"edit":s+="edit-".concat(e.file_path);break;case"delete":s+="delete-".concat(e.file_path);break;case"rename":s+="rename-".concat(e.original_file_path,"-").concat(e.new_file_path);break;case"add_dependency":s+="add-dep-".concat(e.dependency);break;case"remove_dependency":s+="remove-dep-".concat(e.removed_dependency);break;case"error":let l=e.error_message.trim().substring(0,20)||"empty-error";s+="error-".concat(l);break;case"lov-mermaid":let n=e.mermaidCode.trim().substring(0,20)||"empty-mermaid";s+="mermaid-".concat(n);break;case"tool_use":s+="tool-use-".concat(e.name,"-").concat(e.data.substring(0,20));break;default:s+="unknown-".concat(Math.random().toString(36).substring(2,9))}return s},nR=e=>{var t;let{scrollContainerRef:s}=e,a=(0,O.Sl)(e=>e.activeConsoleCodeContent),l=(0,l7.hT)(e=>e.codeViewType),n=(0,O.Sl)(e=>e.activeEditId),r=(0,P.aK)(e=>e.edits),i=(0,$.iZ)(e=>e.project),o=n?r[n]:null,c=(null==o?void 0:o.commit_sha)===(null==i?void 0:i.latest_commit_sha),d=(0,g.useRef)(null),u=(0,g.useRef)(),m=(0,g.useRef)(!0),h=(0,g.useRef)(!1),x=(0,g.useCallback)(()=>{if(s.current){let{scrollTop:e,scrollHeight:t,clientHeight:a}=s.current;m.current=t-e-a<10}},[s]),f=(0,g.useCallback)(e=>{e.deltaY<0?h.current=!0:h.current=!1},[]),v=(0,g.useCallback)(()=>{h.current=!0},[]),b=(0,g.useCallback)(()=>{h.current=!1},[]);return((0,g.useEffect)(()=>{let e=s.current;return e&&(e.addEventListener("scroll",x),e.addEventListener("wheel",f),e.addEventListener("touchstart",v),e.addEventListener("touchend",b)),()=>{e&&(e.removeEventListener("scroll",x),e.removeEventListener("wheel",f),e.removeEventListener("touchstart",v),e.addEventListener("touchend",b))}},[s,x,f,v,b]),(0,g.useEffect)(()=>{var e,t,a;u.current!==(null===(e=s.current)||void 0===e?void 0:e.scrollHeight)&&(u.current=null===(t=s.current)||void 0===t?void 0:t.scrollHeight,m.current&&!h.current&&(null===(a=d.current)||void 0===a||a.scrollIntoView({behavior:"auto"})))},[a,s]),l===l7.es.DIFF)?(0,p.jsx)(nh,{activeEdit:o,editable:c},null==o?void 0:o.id):(0,p.jsxs)(p.Fragment,{children:[a&&(null===(t=a.parts)||void 0===t?void 0:t.length)>0?a.parts.map((e,t)=>(0,p.jsx)(nd,{part:e},nT(e,t))):null,(0,p.jsx)("div",{ref:d})]})},nI=()=>{let e=(0,O.Sl)(e=>e.activeEditId),t=(0,P.aK)(e=>e.edits),s=e?t[e]:null,a=(0,$.iZ)(e=>e.project),l=(0,g.useMemo)(()=>{if(s&&a)return(0,e8.t)({projectId:null==a?void 0:a.id,sha:s.commit_sha})},[s,a]);return(0,p.jsx)("iframe",{id:"preview-panel",src:"".concat(l,"?forceHideBadge=true"),sandbox:l8.h,allow:"accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; payment; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth;",className:"min-h-full w-full flex-grow"})},nD=()=>{let e=(0,O.Sl)(e=>e.activeConsoleMermaidContent);return e?e.mermaidCode?(0,p.jsx)("div",{className:"flex h-full flex-col",children:(0,p.jsx)("div",{className:"min-h-0 flex-1",children:(0,p.jsx)(no,{code:e.mermaidCode,className:"h-full"})})}):(0,p.jsx)("p",{className:"mt-4 text-center text-red-500",children:"Mermaid data found but no code property."}):(0,p.jsx)("p",{className:"mt-4 text-center",children:"No mermaid diagram selected."})},nP=e=>{let{scrollContainerRef:t}=e;switch((0,O.Sl)(e=>e.consoleContentType)){case"error":case"code":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(nC,{})}),(0,p.jsx)(nR,{scrollContainerRef:t})]});case"snapshot-preview":return(0,p.jsx)(nI,{});case"mermaid":return(0,p.jsx)(nD,{});case"debug":return(0,p.jsx)(n_,{});case"annotation":return(0,p.jsx)(nS,{});default:return(0,p.jsx)("p",{className:"mt-4 text-center",children:"Click on a code chip in the chat to inspect the code output."})}},nO=()=>{let e=(0,O.Sl)(e=>e.consoleContentType),t=(0,g.useRef)(null);return(0,p.jsx)("div",{className:(0,eo.cn)("absolute inset-0 z-50 overflow-y-auto rounded-b-none bg-background p-4 pb-10",{"p-0":"snapshot-preview"===e||"mermaid"===e,"overflow-hidden":"mermaid"===e}),ref:t,children:(0,p.jsx)(nP,{scrollContainerRef:t})})};var nA=s(61563),nz=s(96771);let nL=e=>{let{diffAvailable:t}=e,s=(0,l7.hT)(e=>e.codeViewType),{setCodeViewType:a}=(0,l7.VK)(),l=(0,O.Sl)(e=>e.activeEditId),n=(0,P.aK)(e=>e.edits),r=l?n[l]:null;return(0,p.jsxs)(nA.t,{className:"ml-auto",type:"single",variant:"outline",value:s,defaultValue:l7.es.RAW,onValueChange:e=>{e&&(a(e),e===l7.es.RAW?S.ZP.capture(R.SL.PREVIEW.RAW_TAB_CLICKED):e===l7.es.DIFF&&S.ZP.capture(R.SL.PREVIEW.DIFF_TAB_CLICKED))},children:[(null==r?void 0:r.type)!==nz.I.type.REVERT&&(0,p.jsx)(nA.G,{size:"sm",value:l7.es.RAW,children:"Raw"}),(0,p.jsx)(nA.G,{size:"sm",disabled:!t,value:l7.es.DIFF,children:"Diff"})]})};var nM=e=>{let{label:t,score:s,lastUpdated:a,issueCount:l=0,isSelected:n=!1,isLoading:r=!1,onClick:i,onRun:o,onForceRefresh:c}=e,d=e=>e>=90?"#10b981":e>=50?"#f59e0b":"#ef4444";return(0,p.jsxs)("div",{className:"relative flex cursor-pointer flex-col items-center rounded-lg border p-4 transition-all ".concat(n?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-gray-200 bg-white hover:border-gray-300"),onClick:i,children:[void 0!==s&&c&&(0,p.jsx)(J.z,{size:"sm",variant:"ghost",className:"absolute right-1 top-1 h-6 w-6 p-0 opacity-60 hover:opacity-100",onClick:e=>{e.stopPropagation(),c()},disabled:r,title:"Force refresh",children:(0,p.jsx)(ee.Z,{name:"refresh",size:"small"})}),(0,p.jsx)("div",{className:"relative mb-2 h-16 w-16",children:void 0!==s?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("svg",{className:"h-16 w-16 -rotate-90 transform",viewBox:"0 0 36 36",children:[(0,p.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),(0,p.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:d(s),strokeWidth:"2",strokeDasharray:"".concat(s,", 100")})]}),(0,p.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,p.jsx)("span",{className:"font-bold text-sm",style:{color:d(s)},children:Math.round(s)})})]}):(0,p.jsx)("div",{className:"flex h-16 w-16 items-center justify-center",children:(0,p.jsx)(J.z,{size:"sm",variant:"outline",className:"h-12 w-12 rounded-full p-0",onClick:e=>{e.stopPropagation(),null==o||o()},disabled:r,children:r?(0,p.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-gray-600"}):(0,p.jsx)(ee.Z,{name:"play_circle",size:"small"})})})}),(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("span",{className:"block text-xs font-medium",children:t}),a&&(0,p.jsx)("span",{className:"mt-1 block text-xs text-muted-foreground",children:(e=>{let t=Math.floor((Date.now()-e)/6e4);if(t<1)return"Just now";if(t<60)return"".concat(t,"m ago");let s=Math.floor(t/60);return s<24?"".concat(s,"h ago"):"".concat(Math.floor(s/24),"d ago")})(a)}),void 0!==s&&l>0&&(0,p.jsxs)("div",{className:"mt-1 flex items-center justify-center gap-1",children:[(0,p.jsx)(ee.Z,{name:"warning",size:"small",className:"text-amber-500"}),(0,p.jsxs)("span",{className:"text-xs font-medium text-amber-600",children:[l," issue",1!==l?"s":""]})]}),void 0!==s&&0===l&&(0,p.jsxs)("div",{className:"mt-1 flex items-center justify-center gap-1",children:[(0,p.jsx)(ee.Z,{name:"check",size:"small",className:"text-green-500"}),(0,p.jsx)("span",{className:"text-xs font-medium text-green-600",children:"No issues"})]})]})]})};let nZ=(e,t,s)=>{let a=(0,W.D)(),[l,n]=(0,g.useState)(!1),{onClick:r,isPending:i}=(0,sx.hw)({projectId:a,errors:[{id:(0,z.Fd)(),type:sh.N.BUILD,error_message:"SEO Audit Issue (".concat(e.severity,"): ").concat(e.title,"\n\nDescription: ").concat(e.description).concat(e.explanation&&e.explanation!==e.description?"\n\nExplanation: ".concat(e.explanation):"").concat(void 0!==e.score?"\n\nCurrent Score: ".concat(e.score):"").concat(e.savings?"\n\nEstimated savings: ".concat(e.savings):"").concat(e.errorMessage?"\n\nError: ".concat(e.errorMessage):"").concat(e.details?"\n\nAdditional Details: ".concat(JSON.stringify(e.details,null,2)):"","\n\nIMPORTANT INSTRUCTIONS FOR FIXING THIS SEO ISSUE:\n- STRICTLY preserve the existing functional behavior, design, and UX of the application\n- ONLY make changes that are absolutely necessary to fix this specific SEO issue\n- DO NOT modify the application's visual design, layout, or user experience unless it's essential for the SEO fix\n- If the audit requires changes that might affect functionality or UX, be extremely cautious and make minimal changes\n- If you cannot clearly determine how to fix this issue safely without risking application functionality, simply provide the analysis in chat mode instead of making code changes\n- Focus on technical SEO fixes like meta tags, HTML structure, accessibility attributes, etc. that don't affect the user experience\n\nPlease analyze this SEO issue and implement only the minimal necessary changes to improve the website's SEO performance without affecting the application's functionality or user experience."),occurred_at:new Date().toISOString(),created_at:sp.EK.now()}]}),o=(0,A.bk)(e=>e.isSendChatMessageMutationPending);return{handleFix:(0,g.useCallback)(async()=>{if(!l)try{n(!0),S.ZP.capture(R.Md.TRY_FIX,{strategy:t,category:s,auditId:e.id,auditSeverity:e.severity,auditTitle:e.title}),await r(),v.Am.success("SEO fix attempt initiated successfully")}catch(e){T.logging.error("Failed to initiate SEO fix:",{error:e}),v.Am.error("Failed to initiate SEO fix. Please try again.")}finally{n(!1)}},[r,l,t,s,e.id,e.severity,e.title]),isFixing:i||o||l}};var nF=e=>{let{audit:t,strategy:s,category:a}=e,{handleFix:l,isFixing:n}=nZ(t,s,a),r=(0,g.useCallback)(async()=>{await l()},[l]);return(0,p.jsxs)(J.z,{onClick:r,variant:"outline",size:"sm",disabled:n,className:"flex items-center gap-2",children:[(0,p.jsx)(ee.Z,{name:"build",size:"small"}),n?"Fixing...":"Try to fix"]})},nU=e=>{let{audit:t,strategy:s,category:a}=e,l={error:{container:"bg-red-50 border-red-200",dot:"bg-red-500",title:"text-red-800",text:"text-red-700"},warning:{container:"bg-yellow-50 border-yellow-200",dot:"bg-yellow-500",title:"text-yellow-800",text:"text-yellow-700"},info:{container:"bg-gray-50 border-gray-200",dot:"bg-gray-500",title:"text-gray-800",text:"text-gray-700"},minor:{container:"bg-orange-50 border-orange-200",dot:"bg-orange-500",title:"text-orange-800",text:"text-orange-700"}}[t.severity];return(0,p.jsx)("div",{className:"rounded-lg border p-4 ".concat(l.container),children:(0,p.jsxs)("div",{className:"flex items-start justify-between",children:[(0,p.jsxs)("div",{className:"flex flex-1 items-start",children:[(0,p.jsx)("div",{className:"flex-shrink-0",children:(0,p.jsx)("div",{className:"mt-2 h-2 w-2 rounded-full ".concat(l.dot)})}),(0,p.jsxs)("div",{className:"ml-3 flex-1",children:[(0,p.jsx)("h5",{className:"font-medium ".concat(l.title),children:t.title}),(0,p.jsxs)("p",{className:"mt-1 text-sm ".concat(l.text),children:[t.description,t.savings&&(0,p.jsxs)("span",{children:[" Est. savings: ",t.savings]})]})]})]}),(0,p.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,p.jsx)(nF,{audit:t,strategy:s,category:a})})]})})},nK=s(66070),nV=()=>(0,p.jsx)("div",{className:"flex h-full w-full items-center justify-center p-6",children:(0,p.jsx)(nK.Zb,{className:"w-full max-w-md",children:(0,p.jsxs)(nK.aY,{className:"space-y-6 p-8 text-center",children:[(0,p.jsx)("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:(0,p.jsx)(ee.Z,{name:"globe",size:"large",className:"text-muted-foreground"})}),(0,p.jsx)("div",{className:"space-y-2",children:(0,p.jsx)("h2",{className:"font-semibold text-xl",children:"Publish First to Analyze SEO"})}),(0,p.jsx)("div",{className:"space-y-3",children:(0,p.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Click the ",(0,p.jsx)("strong",{children:"Publish"})," button in the top right corner to make your project live."]})}),(0,p.jsx)("div",{className:"border-t pt-4",children:(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:"Once published, you'll be able to run comprehensive SEO analysis including performance, accessibility, best practices, and SEO score checks."})})]})})}),nW=e=>{let{screenshotData:t}=e;return t?(0,p.jsxs)("div",{className:"mb-8",children:[(0,p.jsx)("h4",{className:"text-md mb-4 font-medium",children:"Page Screenshot"}),(0,p.jsx)("div",{className:"flex justify-center",children:(0,p.jsx)("img",{src:t,alt:"Page screenshot",className:"h-auto max-w-full rounded-lg border shadow-sm",style:{maxHeight:"400px"}})})]}):null},nB=s(8164);let nG={error:0,warning:1,minor:2,info:3},nH=e=>[...e].sort((e,t)=>{let s=nG[e.severity]-nG[t.severity];return 0!==s?s:e.title.localeCompare(t.title)}),nq={all:["pageSpeed"],project:e=>[...nq.all,e],combination:(e,t,s)=>[...nq.project(e),t,s]},nX=e=>{var t,s;if(!(null==e?void 0:null===(s=e.results)||void 0===s?void 0:null===(t=s.lighthouseResult)||void 0===t?void 0:t.audits))return[];let a=e.results.lighthouseResult.audits,l=[];return Object.entries(a).forEach(e=>{let[t,s]=e;if("number"!=typeof s.score||s.score>=1)return;let a="info";s.score<.5?a="error":s.score<.7?a="warning":s.score<.9&&(a="minor"),l.push({id:s.id||t,severity:a,title:s.title||t,description:s.description||s.explanation||"No description available",score:s.score,scoreDisplayMode:s.scoreDisplayMode,displayValue:s.displayValue,explanation:s.explanation,errorMessage:s.errorMessage,warnings:s.warnings,details:s.details,savings:s.displayValue})}),l},nY=(e,t)=>{var s,a;let l=null==e?void 0:null===(a=e.results)||void 0===a?void 0:null===(s=a.lighthouseResult)||void 0===s?void 0:s.categories;if(!l)return null;let n=l[({performance:"performance",accessibility:"accessibility","best-practices":"best-practices",seo:"seo"})[t]];return n?{label:({performance:"Performance",accessibility:"Accessibility","best-practices":"Best Practices",seo:"SEO"})[t],score:Math.round(100*(n.score||0)),category:t}:null},n$=(e,t,s)=>{var a,l,n,r,i;let o=nY(e,s);return o?{strategy:t,category:s,score:o,audits:nX(e),screenshot:null==e?void 0:null===(i=e.results)||void 0===i?void 0:null===(r=i.lighthouseResult)||void 0===r?void 0:null===(n=r.audits)||void 0===n?void 0:null===(l=n["final-screenshot"])||void 0===l?void 0:null===(a=l.details)||void 0===a?void 0:a.data,timestamp:Date.now()}:null},nJ=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{queryKey:nq.combination(e,t,s),queryFn:async()=>{let a=(0,N.SJ)();return n$(await a.post("/projects/".concat(e,"/preview-page-speed"),{url_source:"publish",strategy:t,categories:[s]}),t,s)},staleTime:a?0:9e5,gcTime:36e5,enabled:!!e}},nQ=function(e,t,s){var a;let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=(0,ts.a)(nJ(e,t,s,l)),r=(0,g.useCallback)(async()=>n.refetch(),[n]),i=(0,g.useCallback)(async()=>n.refetch(),[n]);return{data:n.data,isLoading:n.isLoading,error:n.error,runAnalysis:r,forceRefresh:i,isStale:n.isStale,lastUpdated:null===(a=n.data)||void 0===a?void 0:a.timestamp}},n0=(e,t)=>{var s;let a=(0,nB.h)({queries:t.map(t=>{let{strategy:s,category:a}=t;return nJ(e,s,a)})}),l=a.map(e=>e.data).filter(Boolean),n=a.some(e=>e.isLoading);return{data:l,isLoading:n,error:null===(s=a.find(e=>e.error))||void 0===s?void 0:s.error,runAnalysis:(0,g.useCallback)(async(e,s)=>{let l=t.findIndex(t=>t.strategy===e&&t.category===s);if(-1!==l)return a[l].refetch()},[a,t]),forceRefresh:(0,g.useCallback)(async(e,s)=>{let l=t.findIndex(t=>t.strategy===e&&t.category===s);if(-1!==l)return a[l].refetch()},[a,t]),queries:a}},n1=(e,t)=>{let{data:s,isLoading:a,error:l,runAnalysis:n,forceRefresh:r}=n0(e,["performance","accessibility","best-practices","seo"].map(e=>({strategy:t,category:e})));return{scores:s.map(e=>e.score),data:s,isLoading:a,error:l,runAnalysis:n,forceRefresh:r}};var n2=()=>{var e,t;let[s,a]=(0,g.useState)("mobile"),[l,n]=(0,g.useState)("performance"),[r,i]=(0,g.useState)(new Set),o=(0,W.D)(),c=(0,$.iZ)(e=>e.project),d=!!(null==c?void 0:c.url),u=(null==c?void 0:c.latest_commit_sha)!==(null==c?void 0:null===(e=c.published_deployment)||void 0===e?void 0:e.commit_sha),{scores:m,data:h,isLoading:x,error:f,runAnalysis:v,forceRefresh:b}=n1(o,s),{data:j,isLoading:y,error:w,runAnalysis:N,forceRefresh:E}=nQ(o,s,l),k=(0,g.useMemo)(()=>(null==j?void 0:j.audits)?nH(j.audits):[],[null==j?void 0:j.audits]),C=e=>{n(e),S.ZP.capture(R.Md.CATEGORY_SELECTED,{category:e,strategy:s})},_=e=>{a(e),S.ZP.capture(R.Md.STRATEGY_SELECTED,{strategy:e})},T=async e=>{i(t=>new Set([...t,e]));try{await v(s,e)}finally{i(t=>{let s=new Set(t);return s.delete(e),s})}},I=async e=>{i(t=>new Set([...t,e]));try{e===l&&await E(),await b(s,e)}finally{i(t=>{let s=new Set(t);return s.delete(e),s})}},D=async()=>{let e=["performance","accessibility","best-practices","seo"];S.ZP.capture(R.Md.REGENERATE,{strategy:s,categories:e,context:"all"}),i(new Set(e));try{await Promise.all(e.map(e=>b(s,e))),e.includes(l)&&await E()}finally{i(new Set)}},P=e=>{let t=m.find(t=>t.category===e);return null==t?void 0:t.score},O=e=>{var t;let s=h.find(t=>t.category===e);return(null==s?void 0:null===(t=s.audits)||void 0===t?void 0:t.length)||0},A=e=>h.some(t=>t.category===e),z=e=>{let t=h.find(t=>t.category===e);return null==t?void 0:t.timestamp},L=e=>x||r.has(e),M=x||y||r.size>0,Z=y||r.has(l),F=f||w;return d?(0,p.jsxs)("div",{className:"flex h-full w-full flex-col overflow-auto p-6",children:[(0,p.jsxs)("div",{className:"mb-1",children:[(0,p.jsx)("h1",{className:"font-semibold mb-4 text-2xl",children:"Page Speed Analysis"}),u&&(0,p.jsx)("div",{className:"mb-6 rounded-lg border border-amber-200 bg-amber-50 p-4",children:(0,p.jsxs)("div",{className:"flex items-start justify-between",children:[(0,p.jsxs)("div",{className:"flex items-start gap-3",children:[(0,p.jsx)(ee.Z,{name:"warning",className:"mt-0.5 text-amber-500",size:"small"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-amber-800",children:"Results may be outdated"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-amber-700",children:"Your latest changes haven't been published yet. The current analysis is based on the previously published version."})]})]}),(0,p.jsxs)(J.z,{size:"sm",variant:"outline",onClick:D,disabled:M,className:"gap-2",children:[(0,p.jsx)(ee.Z,{name:"refresh",size:"small"}),"Regenerate"]})]})}),(0,p.jsxs)("div",{className:"mb-6 flex gap-2",children:[(0,p.jsx)(J.z,{variant:"mobile"===s?"default":"outline",size:"sm",onClick:()=>_("mobile"),children:"Mobile"}),(0,p.jsx)(J.z,{variant:"desktop"===s?"default":"outline",size:"sm",onClick:()=>_("desktop"),children:"Desktop"})]}),(0,p.jsx)("div",{className:"mb-6 grid grid-cols-2 gap-4 md:grid-cols-4",children:[{key:"performance",label:"Performance"},{key:"accessibility",label:"Accessibility"},{key:"best-practices",label:"Best Practices"},{key:"seo",label:"SEO"}].map(e=>{let t=P(e.key),a=O(e.key),n=A(e.key),r=z(e.key),i=L(e.key);return(0,p.jsx)(nM,{label:e.label,score:t,issueCount:a,lastUpdated:r,isSelected:l===e.key,isLoading:i,onClick:()=>C(e.key),onRun:n?void 0:()=>T(e.key),onForceRefresh:()=>I(e.key)},"".concat(s,"-").concat(e.key))})})]}),F&&(0,p.jsxs)("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 p-4",children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-red-700",children:(null===(t=f||w)||void 0===t?void 0:t.message)||"Failed to fetch page speed data"})]}),Z&&(0,p.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,p.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,p.jsx)(av.$,{size:"large"}),(0,p.jsxs)("p",{className:"text-lg text-muted-foreground",children:["Loading ",l," data for ",s,"..."]})]})}),j&&!Z&&(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"mb-8",children:[(0,p.jsxs)("h4",{className:"text-md mb-4 font-medium",children:["Issues to Fix - ",j.score.label," (",s,")",k.length>0&&(0,p.jsxs)("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",k.length," ",1===k.length?"issue":"issues",")"]})]}),k.length>0&&(0,p.jsx)("div",{className:"mb-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:(0,p.jsxs)("div",{className:"flex items-start gap-3",children:[(0,p.jsx)(ee.Z,{name:"info",className:"mt-0.5 text-blue-500",size:"small"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Important Information"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-blue-700",children:'Please note that not all performance issues can be automatically fixed by our AI. Some issues may persist even after applying the "Try Fix" feature. We recommend carefully reviewing the detailed analysis and suggestions provided in the chat. After any fixes are applied, you\'ll need to re-publish your application and regenerate the page speed analysis to see the updated results.'})]})]})}),(0,p.jsxs)("div",{className:"space-y-4",children:[k.map((e,t)=>(0,p.jsx)(nU,{audit:e,strategy:s,category:l},"".concat(e.id,"-").concat(t))),0===k.length&&(0,p.jsx)("div",{className:"py-8 text-center",children:(0,p.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,p.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:(0,p.jsx)(ee.Z,{name:"check",className:"text-green-600",size:"small"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"mb-1 text-lg font-medium text-green-800",children:"No Issues Found!"}),(0,p.jsxs)("p",{className:"text-sm text-green-600",children:[j.score.label," category is performing excellently. Great job!"]})]})]})})]})]}),j.screenshot&&"performance"===l&&(0,p.jsx)(nW,{screenshotData:j.screenshot})]}),!j&&!Z&&!F&&(0,p.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsxs)("p",{className:"mb-4 text-muted-foreground",children:['Select a category above and click "Run" to analyze your project\'s'," ",l," performance"]}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Analysis results are cached for each strategy and category combination"})]})})]}):(0,p.jsx)(nV,{})};let n5=e=>{let{children:t,device:s,className:a}=e,l=(0,g.useMemo)(()=>{switch(s){case"mobile":return{width:"375px",height:"100%"};case"tablet":return{width:"768px",height:"100%"};default:return{width:"100%",height:"100%"}}},[s]);return(0,p.jsx)("div",{className:(0,eo.cn)("flex flex-col transition-all ease-in-out",a),style:{width:l.width,height:l.height},children:t})};var n4=s(6454);let n6=e=>{let{hotkey:t,className:s}=e;return(0,p.jsx)("kbd",{className:(0,eo.cn)("border-current/30 ml-1 flex h-4 items-center rounded-sm border px-1 text-[9px] font-medium text-inherit transition-colors group-hover:border-foreground",s),children:t.toUpperCase()})},n3=g.forwardRef((e,t)=>{let{hidden:s=!1,disabled:a=!1,hotkey:l,showHotkey:n=!1,onClick:r,hotkeyOptions:i,className:o,...c}=e;return((0,en.y1)(l||"",e=>{e.preventDefault(),r&&r(e)},{enabled:!a,...i},[r]),s)?null:(0,p.jsxs)(J.z,{ref:t,disabled:a,onClick:r,...c,className:(0,eo.cn)("group",o),children:[c.children,n&&l&&(0,p.jsx)(n6,{hotkey:l})]})});n3.displayName="HotkeyButton";let n8=e=>{let{projectId:t,errors:s,allErrors:a,clearErrors:l,canAIFix:n}=e,{onClick:r,isPending:i}=(0,sx.hw)({projectId:t,errors:a}),o=(0,O.Sl)(e=>e.consoleContentType),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),h=(0,A.bk)(e=>e.isSendChatMessageMutationPending),{setShowConsole:x,setConsoleErrorContent:f}=(0,O.pE)(),v=(0,O.Sl)(e=>null!==e.consoleContentType);return(0,g.useEffect)(()=>{s&&0!==s.length?d(!0):d(!1)},[s]),(0,p.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 overflow-hidden",style:{height:"100%"},children:(0,p.jsx)("div",{className:(0,eo.cn)("pointer-events-auto absolute bottom-0 left-1/2 mb-36 w-5/6 max-w-[440px] -translate-x-1/2 transform rounded-lg shadow-lg transition-all duration-500 ease-in-out md:mb-4 ".concat(c?"translate-y-0 opacity-100":"translate-y-full opacity-0")),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,p.jsxs)(nK.Zb,{className:"overflow-hidden p-1",children:[(0,p.jsx)(nK.aY,{className:"p-4",children:(0,p.jsx)("div",{className:"flex w-full flex-col items-start justify-start",children:(0,p.jsxs)("div",{className:"flex w-full items-end justify-between gap-6",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"mb-1 flex items-center",children:[(0,p.jsx)(ee.Z,{name:"warning",size:"default",className:"mr-2"}),(0,p.jsx)("p",{className:"text-base font-medium",children:"Error"})]}),(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:sx.v7[s[0].type]})})]}),(0,p.jsxs)("div",{className:"flex flex-col items-end justify-end gap-2",children:[(0,p.jsx)(n3,{variant:"outline",onClick:()=>{f(a),x("error"===o?null:"error")},hotkey:"L",showHotkey:!0,children:"Show logs"}),n&&(0,p.jsx)(n3,{variant:"default",className:"w-full",onClick:()=>{l(),r()},disabled:i||h||v,hotkey:"F",showHotkey:!0,children:"Try to fix"})]})]})})}),u&&(0,p.jsx)("div",{className:"absolute right-0 top-0",children:(0,p.jsx)(J.z,{variant:"ghost",size:"icon",onClick:()=>{l()},className:"h-6 w-6",children:(0,p.jsx)(ee.Z,{name:"close",size:"default"})})})]})})})},n7=e=>{let{projectId:t}=e,{store:s,clearBlankScreenErrors:a}=(0,k.D)(),l=s(e=>e.runtimeErrors),n=null==l?void 0:l.filter(e=>e.has_blank_screen);if(!n||0===n.length)return null;let r=n.map(e=>{let{message:t,...s}=e;return{id:(0,n4.Xm)("error").toString(),created_at:sp.EK.fromDate(new Date),type:sh.N.RUNTIME,occurred_at:new Date().toISOString(),error_message:t,meta_data:{...s}}});return(0,p.jsx)(n8,{projectId:t,allErrors:r,errors:r,clearErrors:a,canAIFix:!0})},n9=()=>{let e=(0,W.v)();return e?(0,p.jsx)(n7,{projectId:e}):(T.logging.error("projectId is not defined, this should not happen"),null)},re=e=>{let{children:t}=e;return(0,p.jsxs)(p.Fragment,{children:[t,(0,p.jsx)(n9,{})]})};var rt=s(26438);let rs=[{icon:"dock_to_right",text:"Chat with AI in the sidebar"},{icon:"location_searching",text:"Select specific elements to modify"},{icon:"imagesmode",text:"Upload images as a reference"},{icon:"preview",text:"Instantly preview your changes"},{icon:"school",text:"Set custom knowledge for every edit"},{icon:"database",text:"Connect Supabase for backend"},{icon:"code_blocks",text:"Collaborate at source, via GitHub"},{icon:"globe",text:"Deploy when you're ready"}],ra=e=>{let{text:t="Setting up..."}=e,s=(0,g.useRef)(null);return(0,g.useEffect)(()=>{let e=s.current;if(!e)return;let t=()=>{e.style.transform="translateY(0)"};return e.addEventListener("animationiteration",t),()=>e.removeEventListener("animationiteration",t)},[]),(0,p.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-8",children:[(0,p.jsx)(ee.Z,{name:"lovable_icon",className:"h-[100px] w-[100px] text-muted-foreground/50"}),(0,p.jsx)("span",{children:t}),(0,p.jsxs)("div",{className:"w-100 relative mx-auto h-48 overflow-hidden rounded-lg bg-muted/50",children:[(0,p.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 h-12 bg-gradient-to-b from-muted to-transparent"}),(0,p.jsx)("div",{ref:s,className:"animate-slide-up",children:[...rs,...rs].map((e,t)=>(0,p.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,p.jsx)(ee.Z,{name:e.icon,className:"h-5 w-5 text-muted-foreground"}),(0,p.jsx)("span",{className:"text-muted-foreground",children:e.text})]},t))}),(0,p.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 z-10 h-12 bg-gradient-to-t from-muted to-transparent"})]}),(0,p.jsx)("div",{id:"onboarding-start",className:"absolute bottom-0 right-[12.5rem] h-3 w-3"})]})};function rl(e){let{message:t,level:s}=e;return void 0===s&&(s="info"),(0,p.jsx)("div",{className:(0,eo.cn)("absolute bottom-0 flex w-full flex-grow items-center justify-center pb-36 md:pb-2"),children:(0,p.jsxs)("div",{className:(0,eo.cn)("flex min-w-[300px] flex-row items-center justify-between gap-2 rounded-lg border-border px-6 py-4 shadow-lg shadow-black/25","error"===s&&"bg-warning","info"===s&&"bg-background"),children:[(0,p.jsx)("p",{className:"font-medium",children:t})," ",(0,p.jsx)(av.$,{variant:"ring",size:"default"})]})})}function rn(e){let{isDiscardDialogOpen:t,setIsDiscardDialogOpen:s,hasUnsavedChanges:a,isSaving:l,handleDiscard:n}=e;return(0,p.jsxs)(Q.Vq,{open:t,onOpenChange:s,children:[(0,p.jsx)(Q.hg,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"secondary",size:"sm",className:"duration-125 h-6 text-xs transition ease-out hover:bg-secondary",onClick:e=>{a||(e.preventDefault(),e.stopPropagation())},disabled:l||!a,children:"Discard"})}),(0,p.jsx)(Q.cZ,{className:"p-4",size:"sm",children:(0,p.jsxs)(Q.fK,{children:[(0,p.jsx)(Q.$N,{children:"Discard Changes"}),(0,p.jsx)(Q.Be,{children:"Are you sure you want to discard your changes?"}),(0,p.jsxs)(Q.cN,{className:"flex gap-2 pt-4",children:[(0,p.jsx)(Q.GG,{children:(0,p.jsx)(J.z,{variant:"outline",children:"Cancel"})}),(0,p.jsx)(Q.GG,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"destructive",onClick:n,children:"Discard"})})]})]})})]})}function rr(e){let{activeView:t}=e,s=(0,eI.f6)(e=>e.visibleMode),a=(0,$.iZ)(e=>{var t;return!!(null===(t=e.project)||void 0===t?void 0:t.preview_build_commit_sha)}),l=(0,$.iZ)(e=>!!e.project),[n,r]=(0,g.useState)(!1),{syncCode:i,hasUnsavedChanges:o,generateAst:c,refreshPreview:d}=(0,to.v)(),u=(0,tn.A7)(e=>e.clearPendingChanges),m=(0,tn.A7)(e=>e.clearUploads),h=(0,e2.UC)(e=>e.isSaving),{setIsSaving:x,turnOffVisualEditing:f}=(0,e2.S9)(),{snapshot:v}=(0,tn.ag)(),b=(0,g.useCallback)(()=>{S.ZP.capture("visual_edits:discard_clicked"),u(),m(),d(),c(),f()},[u,m,c,f,d]),j=(0,g.useCallback)(async()=>(S.ZP.capture("visual_edits:save_clicked"),x(!0),i(v.getPendingChanges()).then(()=>{x(!1),f()})),[x,v,i,f]);return(0,p.jsxs)("div",{className:(0,eo.cn)("relative h-full w-full",{invisible:"console"===t||"dev-mode"===t||"seo"===t}),children:[l&&!a&&(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center"})}),(0,p.jsx)("div",{className:(0,eo.cn)("absolute inset-0",{"pointer-events-none invisible":"static"!==s||!a,active:"static"===s}),children:(0,p.jsx)(eI.g9,{})}),(0,p.jsxs)("div",{className:(0,eo.cn)("absolute inset-0",{"pointer-events-none invisible":"live"!==s,active:"live"===s}),children:[(0,p.jsx)(eI.i5,{}),o&&(0,p.jsxs)("div",{className:"sticky bottom-4 left-1/2 z-10 flex w-max -translate-x-1/2 items-center justify-center gap-5 rounded-xl bg-popover px-3.5 py-2",children:[(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"You have unsaved changes"}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)(rn,{isDiscardDialogOpen:n,setIsDiscardDialogOpen:r,hasUnsavedChanges:o,isSaving:h,handleDiscard:b}),(0,p.jsx)(J.z,{onClick:j,loading:h,disabled:!o,size:"sm","aria-label":"save visual edits",variant:"affirmative",className:"h-6 text-xs",children:"Save"})]})]})]}),(0,p.jsx)(ri,{visibleMode:s,hasPreviewBuild:a})]})}function ri(e){let{visibleMode:t,hasPreviewBuild:s}=e,a=(0,eI.f6)(e=>e.error),l=(0,A.bk)(e=>e.isSendChatMessageMutationPending),n=(0,eI.f6)(e=>null!==e.error&&"dev_server"===e.error.type),{agentModeEnabled:r}=(0,rt.v)(),i=(0,eI.f6)(e=>e.targetMode),o=(0,A.bk)(e=>e.isBuildErrorOccurredDuringStream),c=(0,eI.f6)(e=>e.isStartingSandboxInTheBackground);return"live"!==i?null:s&&o&&l&&r?(0,p.jsx)(rl,{message:"An error occurred, trying to fix automatically",level:"error"}):"live"===t?null:n?(0,p.jsx)("div",{className:"absolute inset-0 flex w-full flex-grow items-center justify-center pb-2",children:(0,p.jsx)(ro,{message:null==a?void 0:a.message,traceId:null==a?void 0:a.traceId})}):s&&!c?(0,p.jsx)(rl,{message:"Starting live preview..."}):l?(0,p.jsx)("div",{className:"absolute inset-0 flex flex-grow items-center justify-center bg-muted",children:(0,p.jsx)(rc,{})}):null}function ro(e){let{restartLiveMode:t,revertToStaticMode:s}=(0,eI.My)();return(0,p.jsxs)("div",{className:"absolute flex min-w-[300px] flex-col items-center justify-between gap-6 rounded-lg border-border bg-background px-12 py-6 shadow-lg shadow-black/25",children:[(0,p.jsx)("p",{className:"font-medium",children:e.message}),(0,p.jsx)(J.z,{variant:"accent",onClick:()=>{t(!0)},children:"Try again"}),(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm",className:"absolute right-2 top-2 z-10 hover:bg-transparent hover:opacity-75",onClick:()=>s(),children:(0,p.jsx)(ee.Z,{name:"close",size:"default"})}),e.traceId&&(0,p.jsx)("code",{className:"absolute bottom-2 right-2 break-all rounded px-[0.2rem] font-mono text-muted-foreground/70",children:e.traceId})]})}function rc(){return(0,p.jsx)("div",{className:"absolute inset-0 flex flex-grow items-center justify-center bg-muted",children:(0,p.jsx)(ra,{text:"Spinning up preview..."})})}let rd=e=>{var t;let{openGithubRequiredDialog:s}=e,{exitConsole:a}=(0,O.pE)(),l=(0,O.Sl)(e=>e.activeEditId),n=(0,P.aK)(e=>l?e.edits[l]:null),r=(0,$.iZ)(e=>e.project),{setActiveView:i}=(0,O.pE)();return(0,p.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,p.jsxs)(n3,{variant:"ghost",size:"sm",onClick:()=>{S.ZP.capture(R.SL.CONSOLE.EXITED_VIA_BUTTON),a(),i("preview")},className:"flex items-center gap-2",hotkey:"esc",showHotkey:!0,hotkeyOptions:{enableOnFormTags:!0},children:[(0,p.jsx)(ee.Z,{name:"chevron_left",size:"small"}),"Exit"]}),(null==n?void 0:n.commit_sha)&&(0,p.jsx)(n3,{variant:"ghost",size:"sm",onClick:()=>{var e,t,a;let l=(0,tK._J)((null==r?void 0:r.github_repo_name)||"",n.commit_sha||"",null==r?void 0:null===(e=r.github_owner)||void 0===e?void 0:e.name);if(S.ZP.capture(R.SL.CONSOLE.GITHUB_LINK_CLICKED,{hasCustomGithubOwner:(null==r?void 0:null===(t=r.github_owner)||void 0===t?void 0:t.name)!==tK.aR,context:"console_header"}),(null==r?void 0:null===(a=r.github_owner)||void 0===a?void 0:a.name)===tK.aR){s();return}l&&window.open(l,"_blank")},hotkey:"G",showHotkey:!0,children:"View on GitHub"}),(0,p.jsx)(nL,{diffAvailable:!!(null==n?void 0:null===(t=n.diff)||void 0===t?void 0:t.length)})]})},ru=e=>{let{projectId:t,activeView:s}=e,a=(0,e_.ty)();return(0,p.jsxs)(eZ.M,{mode:"wait",children:["console"===s&&(0,p.jsx)(eF.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 z-10 bg-background",children:(0,p.jsx)(nO,{})},"console"),"dev-mode"===s&&(0,p.jsx)(eF.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 z-10 flex bg-background",children:(0,p.jsx)(t_,{projectId:t})},"code"),"seo"===s&&a&&(0,p.jsx)(eF.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 z-10 flex bg-background",children:(0,p.jsx)(n2,{})},"seo")]})};function rm(e){let{projectId:t}=e,{open:s,GithubRequiredDialog:a}=sG(),l=(0,eI.f6)(e=>e.device),n=(0,O.Sl)(e=>e.activeView),r=(0,O.Sl)(e=>e.consoleContentType),i=(0,y.Z)("md");return(0,p.jsxs)("div",{className:(0,eo.cn)("flex flex-grow flex-col overflow-hidden rounded-xl border",{"rounded-none border-none":i}),children:[(0,p.jsx)(a,{}),"console"===n&&("code"===r||"error"===r)&&(0,p.jsx)("div",{className:(0,eo.cn)("hidden h-12 w-full items-center justify-between overflow-hidden border-b bg-muted px-3 md:flex"),children:(0,p.jsx)(rd,{openGithubRequiredDialog:s})}),(0,p.jsxs)("div",{className:"relative flex flex-grow flex-col items-center",children:[(0,p.jsx)(n5,{device:l,className:"justify-center",children:(0,p.jsx)(re,{children:(0,p.jsx)(rr,{activeView:n})})}),(0,p.jsx)(ru,{projectId:t,activeView:n})]})]})}var rp=s(69522);let rh=e=>(0,p.jsx)(Q.Vq,{...e,children:(0,p.jsx)(Q.cZ,{className:"py-16 text-center",children:(0,p.jsxs)(Q.fK,{children:[(0,p.jsx)(Q.$N,{className:"text-center text-2xl",children:"This project has been deprecated."}),(0,p.jsx)("p",{className:"text-center",children:"This project is no longer supported, as it's using Gitlab. Please consider migrating the code to a new GitHub project."})]})})});var rx=s(19060);let rf=e=>{let t=(0,$.iZ)(e=>e.project),{canEdit:s}=(0,_.t)(),[a,l]=g.useState(!1),n=!!(null==t?void 0:t.is_supabase_enabled)||!!(null==t?void 0:t.supabase_project_config),r=s||!n;return(0,p.jsx)(Q.Vq,{...e,children:(0,p.jsxs)(Q.cZ,{size:"sm",children:[(0,p.jsxs)(Q.fK,{children:[(0,p.jsx)(Q.$N,{className:"flex items-center gap-2",children:"Remix this project"}),(0,p.jsxs)(Q.Be,{children:[(0,p.jsx)("p",{children:"By remixing a project, you will create a copy that you own."}),!r&&(0,p.jsx)("p",{children:"You do not have permission to remix this project because it uses Supabase."})]})]}),(0,p.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[(0,p.jsx)(rx.X,{id:"include-history",disabled:!s||e.isRemixing,checked:a,onCheckedChange:e=>l(e)}),(0,p.jsx)(lA.Label,{htmlFor:"include-history",children:"Include project history"})]}),(0,p.jsxs)(Q.cN,{children:[(0,p.jsx)(Q.GG,{asChild:!0,children:(0,p.jsx)(J.z,{variant:"outline",children:"Cancel"})}),(0,p.jsxs)(J.z,{disabled:!r,onClick:()=>e.onRemix({includeHistory:a}),className:"flex items-center gap-1",loading:e.isRemixing,children:[!e.isRemixing&&(0,p.jsx)(ee.Z,{name:"shuffle",size:"small"}),e.isRemixing?"Remixing...":"Remix"]})]})]})})};var rg=s(81677),rv=s(33910);(o=(i=m||(m={})).accessibility||(i.accessibility={})).REPO_ACCESSIBLE="repo_accessible",o.REPO_NOT_ACCESSIBLE="repo_not_accessible",o.INSTALLATION_NOT_FOUND="installation_not_found",o.INSTALLATION_SUSPENDED="installation_suspended",o.REPO_NOT_FOUND="repo_not_found",o.INSUFFICIENT_PERMISSIONS="insufficient_permissions";let rb=e=>{let{project:t}=e,s=(0,j.C)(),[a,l]=(0,g.useState)(!1),n=t.github_owner,r=t.name;(0,g.useEffect)(()=>{(null==s?void 0:s.accessibility)&&(null==s?void 0:s.accessibility)!==m.accessibility.REPO_ACCESSIBLE&&l(!0)},[null==s?void 0:s.accessibility]);let{authUser:i}=(0,b.Eu)(),{installations:o}=(0,rv.D)({enabled:!!i}),c=(0,j.C)(),d=(0,g.useMemo)(()=>{if(!n||!o)return null;let e=o.find(e=>n.name===e.account.login);return e?e.html_url:null},[n,o]),[u,h]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{c&&("repo_accessible"===c.accessibility?l(!1):u||(l(!0),h(!0)))},[c,l,u,h]),(0,p.jsx)(Q.Vq,{open:a,onOpenChange:l,children:(0,p.jsxs)(Q.cZ,{children:[(0,p.jsx)(Q.fK,{children:(0,p.jsx)(Q.$N,{className:"text-2xl",children:"We can't access your repository"})}),(()=>{switch(null==c?void 0:c.accessibility){case"repo_not_accessible":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"text-l",children:"If you want to keep using Lovable to improve your project:"}),(0,p.jsxs)("ol",{className:"mt-4 list-inside list-decimal",children:[(0,p.jsxs)("li",{children:["Go to the"," ",d?(0,p.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:"GitHub App settings"}):(0,p.jsx)("strong",{children:" GitHub App settings"})]}),(0,p.jsxs)("li",{children:["Grant ",(0,p.jsx)("strong",{children:"Repository access"})," to"," ",n&&r?(0,p.jsxs)("strong",{children:[n.name,"/",r]}):(0,p.jsx)("strong",{children:"your project"}),"."]})]}),(0,p.jsx)(rj,{appSettingsUrl:d})]});case"installation_not_found":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-l",children:["We couldn't find the Lovable GitHub app installation for your"," ",(null==n?void 0:n.type)==="Organization"?"organization":"account",". To resolve this issue, please connect the GitHub app again."]}),(0,p.jsx)("div",{className:"mt-4 flex justify-center",children:(0,p.jsx)(J.z,{className:"ml-2",size:"lg",onClick:()=>{(0,rg.Mn)({githubOwner:null!=n?n:null})},children:"Install GitHub App"})})]});case"insufficient_permissions":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"text-l",children:"We don't have the necessary permissions to access your repository. Please uninstall and reinstall the Lovable GitHub app."}),(0,p.jsx)(rj,{appSettingsUrl:d})]});case"installation_suspended":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-l",children:["The GitHub app installation for your"," ",(null==n?void 0:n.type)==="Organization"?"organization":"account"," ","has been suspended."," ",d?(0,p.jsxs)(p.Fragment,{children:["To resolve this issue, visit your"," ",(0,p.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:"GitHub App settings"})," ","and unsuspend the Lovable GitHub app installation."]}):(0,p.jsx)(p.Fragment,{children:"Please navigate to your GitHub App settings and unsuspend the Lovable app installation. You can find it under your GitHub account or organization's settings."})]}),(0,p.jsx)(rj,{appSettingsUrl:d})]});case"repo_not_found":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"text-l",children:"We couldn't find the specified repository in your GitHub account. Please reach out to our support team for further assistance:"}),d&&(0,p.jsxs)("p",{children:["If you removed our app's access to your repository, you can"," ",(0,p.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-affirmative-primary hover:underline",children:"reinstate it here."})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)(J.z,{variant:"outline",asChild:!0,children:(0,p.jsx)(tG.default,{href:"/support",children:"Reach out to Support"})})})]});default:return null}})()]})})},rj=e=>{let{appSettingsUrl:t}=e;return(0,p.jsx)("div",{className:"mt-4 flex justify-center",children:t&&(0,p.jsx)(J.z,{className:"ml-2",size:"lg",onClick:()=>{window.open(t,"_blank")},children:"App settings"})})},ry=e=>{let{project:t}=e,s=(0,f.useRouter)(),a=(0,$.iZ)(e=>e.isRemixDialogOpen),{setIsRemixDialogOpen:l}=(0,$.d2)(),{canEdit:n}=(0,_.t)(),{mutate:r,isPending:i}=(0,rp.G)({onSubmit:()=>l(!0)}),o=t.id,c=(0,g.useCallback)(e=>{let{includeHistory:t}=e;r({projectId:o,includeHistory:t})},[r,o]);return(0,p.jsxs)(p.Fragment,{children:[t&&!t.git_on_s3&&!t.is_github&&(0,p.jsx)(rh,{open:!0,onOpenChange:()=>s.push("/")}),n&&t&&(0,p.jsx)(rb,{project:t}),(0,p.jsx)(rf,{onRemix:c,isRemixing:i,open:a,onOpenChange:l})]})};var rw=s(32112),rN=s(35194),rE=s(49027);let rk=(0,g.memo)(()=>{let{setSelectedImageUrl:e}=(0,P.mx)(),t=(0,P.aK)(e=>e.selectedImageUrl),s=(0,E.Eh)(e=>e.images),a=(0,g.useCallback)(()=>{e(void 0)},[e]),l=(0,g.useCallback)(e=>{e.target===e.currentTarget&&a()},[a]),n=s.find(e=>e.url===t),r=(null==n?void 0:n.name)||"",i=(0,g.useRef)(null);return(0,p.jsx)(rE.Vq,{open:void 0!==t,onOpenChange:a,children:(0,p.jsxs)(rE.PK,{children:[(0,p.jsx)(rE.t9,{className:"fixed inset-0 z-[10000] bg-black/70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),(0,p.jsxs)(rE.cZ,{className:"fixed inset-0 z-[10000] flex flex-col items-center justify-center gap-2 bg-transparent data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",onClick:l,children:[(0,p.jsx)("div",{className:"relative inline-block max-h-[85dvh] max-w-[90vw]",ref:i,children:(0,p.jsx)("img",{onLoad:e=>{let t=e.target;t&&i.current&&(i.current.style.aspectRatio="".concat(t.naturalWidth," / ").concat(t.naturalHeight))},className:"h-full w-full rounded-xl object-contain shadow-modal",src:t,alt:"Fullscreen Image"})}),r&&(0,p.jsx)("p",{className:"mt-2 min-w-0 max-w-[80vw] truncate text-center text-sm text-white",children:r}),(0,p.jsx)(Q.GG,{asChild:!0,className:"absolute right-4 top-2.5 text-white",children:(0,p.jsx)(J.z,{variant:"ghost",size:"icon-sm",className:"hover:text-foreground",children:(0,p.jsx)(ee.Z,{name:"close"})})})]})]})})});rk.displayName="ImagePreviewDialogV2";let rC=[{targetId:"onboarding-start",title:"Take a quick tour while waiting?",description:"Great job on your first prompt! Let's take a quick tour and learn about visual edits, integrations and publishing.",side:"top",showBorder:!1,showTooltip:!1,index:1,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_ONBOARDING_START},{targetId:"visual-editor-toggle",title:"Visual edits",description:"Click directly in your preview to make quick precision changes to fonts, colors or text. Visual edits are free!",side:"top",showBorder:!1,showTooltip:!0,index:2,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_VISUAL_EDITOR_TOGGLE},{targetId:"main-menu",title:"Control your project",description:"Click the project title and open the drop down to rename, duplicate, or adjust settings for your app.",side:"bottom",showBorder:!1,showTooltip:!0,index:3,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_MAIN_MENU},{targetId:"preview-url-bar",title:"Navigate pages or view on mobile",description:"If your app has multiple pages you can navigate between them here, or toggle mobile view to test your design on smaller screens.",side:"bottom",showBorder:!1,showTooltip:!0,index:4,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_PREVIEW_URL_BAR},{targetId:"supabase-dropdown",title:"Connect to database",description:"Supabase automatically stores everything your project needs — like user names, messages, or notes.",side:"bottom",showBorder:!1,showTooltip:!0,index:5,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_SUPABASE_DROPDOWN},{targetId:"publish-menu",title:"Publish your app",description:'Ready to share? Hit "Publish" to go live. You can also connect a custom domain.',side:"bottom",showBorder:!1,showTooltip:!0,index:6,eventName:R.SL.ONBOARDING_TOUR.STEP_VIEWED_SHARE_MENU}],r_=()=>{let e=!(0,y.Z)("md"),{userData:t}=(0,M.SE)(),s=(0,e_.uR)(),a=(0,eI.f6)(e=>e.targetMode),l=s&&e&&!(null==t?void 0:t.has_seen_onboarding_tour)&&"live"===a,[n,r]=(0,g.useState)(0),[i,o]=(0,g.useState)(!0),[c,d]=(0,g.useState)(null),[u,m]=(0,g.useState)(!1),h=(0,x.D)({mutationFn:async()=>{if(!t)return;let e=(0,N.SJ)();await e.put("/user/".concat(t.id),{has_seen_onboarding_tour:!0})}});(0,g.useEffect)(()=>{var e;if(!i)return;let t=document.getElementById(null===(e=rC[n])||void 0===e?void 0:e.targetId);t&&(d(t),t.scrollIntoView({behavior:"smooth",block:"center"}))},[n,i]),(0,g.useEffect)(()=>{if(0===n){let e=setTimeout(()=>{m(!0)},1e3);return()=>clearTimeout(e)}},[n]),(0,g.useEffect)(()=>{var e,t;i&&S.ZP.capture(rC[n].eventName,{step:n+1,stepTitle:null===(e=rC[n])||void 0===e?void 0:e.title,stepTargetId:null===(t=rC[n])||void 0===t?void 0:t.targetId})},[n,i]);let f=()=>{n<rC.length-1?r(n+1):(o(!1),S.ZP.capture(R.SL.ONBOARDING_TOUR.COMPLETED,{totalSteps:rC.length}),h.mutate())},v=()=>{var e,t;o(!1),S.ZP.capture(R.SL.ONBOARDING_TOUR.SKIPPED,{step:n+1,stepTitle:null===(e=rC[n])||void 0===e?void 0:e.title,stepTargetId:null===(t=rC[n])||void 0===t?void 0:t.targetId}),h.mutate()},b=(0,eI.f6)(e=>"live"===e.visibleMode);return l&&(0!==n||!b)&&i&&c?(0,p.jsxs)(ei.u,{open:!0,defaultOpen:!0,instant:!0,children:[(0,p.jsx)(ei.aJ,{asChild:!0,children:(0,p.jsx)("div",{className:"pointer-events-none fixed",style:{top:c.getBoundingClientRect().top,left:c.getBoundingClientRect().left,width:c.offsetWidth,height:c.offsetHeight,boxShadow:0===n?"none":"0 0 0 9999px rgba(0, 0, 0, 0.5)",zIndex:9998,border:!1!==rC[n].showBorder?"1px solid #3b82f6":"none",borderRadius:getComputedStyle(c).borderRadius||"4px"}})}),(0,p.jsxs)(ei._v,{side:rC[n].side,className:"z-[9999] w-[383px] rounded-lg border border-muted-border bg-background p-4 text-foreground opacity-0 shadow-lg transition-opacity duration-300 ".concat(0===n&&u?"opacity-100":n>0?"opacity-100":""),sideOffset:5,avoidCollisions:!0,sticky:"always",children:[rC[n].showTooltip&&(0,p.jsx)(ei.Ce,{className:"z-[10000] h-3 w-3 fill-background"}),(0,p.jsx)("div",{className:"flex flex-col gap-6",children:0===n?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"flex flex-row items-center justify-between",children:(0,p.jsx)("h3",{className:"text-base font-medium text-foreground",children:rC[n].title})}),(0,p.jsx)("p",{className:"text-base text-foreground/80",children:rC[n].description}),(0,p.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,p.jsx)(J.z,{variant:"ghost",size:"sm",onClick:v,className:"text-foreground/60 hover:text-foreground",children:"No thanks"}),(0,p.jsx)(J.z,{size:"sm",onClick:f,className:"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/80",children:"Let's go"})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,p.jsx)("h3",{className:"text-base font-medium text-foreground",children:rC[n].title}),(0,p.jsx)(J.z,{variant:"ghost",size:"icon",className:"h-8 w-8 p-0 hover:bg-background/10",onClick:v,children:(0,p.jsx)(ee.Z,{name:"close",size:"small",className:"text-foreground"})})]}),(0,p.jsx)("p",{className:"text-base text-foreground/80",children:rC[n].description}),(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("p",{className:"text-base text-foreground/60",children:[n," of ",rC.length-1]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[n>1&&(0,p.jsx)(J.z,{variant:"outline",size:"sm",onClick:()=>{n>0&&r(n-1)},className:"hover:affirmative border-0 bg-background text-foreground",children:"Back"}),(0,p.jsx)(J.z,{size:"sm",onClick:f,className:"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/80",children:n===rC.length-1?"Done":"Next"})]})]})]})})]})]}):null},rS=()=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eT.Y,{}),(0,p.jsx)(rN.CreateWorkspaceDialog,{}),(0,p.jsx)(rw.default,{}),(0,p.jsx)(r_,{}),(0,p.jsx)(rk,{}),(0,p.jsx)(V.RootDialog,{})]}),rT=e=>{var t;let{children:s,projectId:a}=e,[l,n]=(0,g.useState)(!0),r=(0,$.iZ)(e=>e.project),{isAuthenticated:i}=(0,b.Eu)();(0,g.useEffect)(()=>{(null==r?void 0:r.name)&&(document.title="".concat(r.name," - Lovable"))},[null==r?void 0:r.name]);let{canEdit:o,isLoading:c}=(0,_.t)(),d=(0,Y.c)(e=>e.hasFetchedCollaborators),u=!c&&(!i||!!d)&&!1===o,m=(0,g.useRef)(null),h=(0,g.useCallback)(()=>{n(!1)},[]),x=(0,g.useCallback)(()=>{n(!0)},[]),f=(0,g.useCallback)(()=>{n(!l)},[l]);(0,g.useEffect)(()=>{var e,t;l?null===(e=j.current)||void 0===e||e.expand():null===(t=j.current)||void 0===t||t.collapse()},[l]),(0,g.useEffect)(()=>{u&&h()},[h,u]),(0,en.y1)("mod+b",e=>{e.preventDefault(),f()},{enableOnFormTags:!0},[f]);let j=(0,g.useRef)(null),y=(0,eW.I_)(),w=(0,eW.k6)(),N=(0,eW.SE)(e=>e.panelSizes),E=(0,eW.SE)(e=>e.updatePanelSizes),k=(0,V.z)(s3),C=s5();return(0,g.useEffect)(()=>{if(C){let e=v.Am.warning("Update Project",{description:"Your project is out of date",duration:1/0,action:(0,p.jsx)(J.z,{className:"ml-auto",variant:"accent",onClick:()=>{k({childProps:{}})},children:"Update project"})});return()=>{v.Am.dismiss(e)}}},[C,k]),(0,p.jsx)(tm.T,{children:(0,p.jsxs)("div",{className:"flex h-dvh flex-col",children:[(0,p.jsx)("div",{className:"sticky top-0 z-50 w-full",children:(0,p.jsx)(s8.E,{})}),(0,p.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col bg-background",children:[r&&(0,p.jsx)(ry,{project:r}),(0,p.jsx)(rS,{}),(0,p.jsx)(l6,{}),(0,p.jsx)(s2,{isSidebarOpen:l,toggleSidebar:f,openSidebar:x,hideButtons:u}),(0,p.jsx)("main",{className:"relative isolate flex min-h-0 flex-1",ref:m,children:(0,p.jsx)("div",{className:"hidden min-h-0 flex-1 md:flex",children:(0,p.jsxs)(s9,{direction:"horizontal",className:"relative flex min-h-0 flex-1 flex-row",autoSaveId:"editor-resizable-panels",onLayout:e=>{e&&(e[0]>0&&(document.cookie="react-resizable-panels:layout=".concat(JSON.stringify(e),"; path=/projects")),E(e))},children:[(0,p.jsx)(ae,{collapsible:!0,onExpand:x,onCollapse:h,defaultSize:null!==(t=N[0])&&void 0!==t?t:eB.DEFAULT_SIDEBAR_SIZE,minSize:y,maxSize:w,collapsedSize:0,className:(0,eo.cn)("relative inset-y-0 z-40 mr-0 flex h-full min-h-0 overflow-x-hidden bg-background"),ref:j,children:s}),(0,p.jsx)(at,{className:"z-[10000] ml-2",tooltip:"Drag to resize"}),(0,p.jsx)(ae,{minSize:40,defaultSize:N[1]||100-eB.DEFAULT_SIDEBAR_SIZE,className:"relative flex flex-1 flex-col pb-2 pr-2",id:"preview-panel",children:(0,p.jsx)(rm,{projectId:a})})]})})})]})]})})};var rR=s(19777);let rI=()=>{let{refreshPreview:e}=(0,eI.My)(),[t,s]=(0,g.useState)(!1),a=(0,g.useRef)(null),{pages:l}=e1(),n=(0,e0.u)(e=>e.setCurrentPage),r=(0,eI.My)().refreshPreview,i=(0,eI.f6)(e=>e.currentPath);(0,g.useEffect)(()=>{n(i||"/"),m(i||"/")},[i,n]),(null==l?void 0:l.find(e=>e.path===i))||null==l||l.find(e=>e4(i,e.path));let o=e6(i),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(o),h=null==l?void 0:l.filter(e=>e&&e.path.toLowerCase().includes(u.toLowerCase())),x="preview"!==(0,O.Sl)(e=>e.activeView),f=(0,nv.gu)(e=>e.view),[v,b]=(0,g.useState)(!0);(0,g.useEffect)(()=>{let e=0,t=t=>{if("SCROLL_POSITION"===t.data.type){let{scrollY:s}=t.data.payload,a=s-e;a>20?b(!1):a<-1&&b(!0),e=s}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},[]);let j=(0,nv.gu)(e=>e.isPreviewDocked),{setIsPreviewDocked:y}=(0,nv.zp)(),w={visible:{opacity:f===nv.$.PREVIEW?1:0,scale:f===nv.$.PREVIEW?1:.9},hidden:{opacity:0,scale:.5}};return(0,p.jsx)("div",{className:"relative h-10 w-full",children:(0,p.jsxs)(eF.E.div,{className:(0,eo.cn)("absolute inset-x-0 bottom-0 flex w-full flex-col overflow-hidden rounded-3xl border bg-background shadow-modal",!j&&"border-transparent",j&&"shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},initial:{opacity:0,scale:.9},animate:j?"visible":v?"visible":"hidden",variants:w,transition:{duration:.2,type:"spring",bounce:.15},children:[(0,p.jsxs)(eF.E.div,{className:"flex max-h-[200px] w-full flex-col gap-1 overflow-hidden overflow-y-auto px-2",initial:{height:0,paddingTop:0,paddingBottom:0},animate:{height:c?"auto":0,paddingTop:c?12:0,paddingBottom:c?12:0},transition:{duration:.3,type:"spring",bounce:.1},children:[null==h?void 0:h.slice(0,9).map((e,t)=>(0,p.jsx)(eF.E.button,{className:(0,eo.cn)("flex w-full flex-col rounded-full px-4 py-1 text-left active:bg-muted",0===t&&"bg-muted"),onClick:()=>{n(e.path),m(e.path),r(e.path),d(!1)},children:(0,p.jsx)("p",{className:"text-lg",children:rD(e.path,u)})},e.path)),(null==h?void 0:h.length)===0&&(0,p.jsxs)("p",{className:"px-4 py-1 text-lg text-muted-foreground",children:['No pages found matching "',u,'"']})]}),(0,p.jsx)("div",{id:"preview-url-bar",className:(0,eo.cn)("flex h-10 items-center bg-background pl-2",c&&"border-t"),children:(0,p.jsxs)("form",{className:"relative flex h-full min-h-10 flex-grow items-center",onSubmit:e=>{var t,s,l,i;e.preventDefault(),(null==h?void 0:h[0])&&(n((null==h?void 0:null===(t=h[0])||void 0===t?void 0:t.path)||""),r((null==h?void 0:null===(s=h[0])||void 0===s?void 0:s.path)||""),m((null==h?void 0:null===(l=h[0])||void 0===l?void 0:l.path)||""),d(!1),null===(i=a.current)||void 0===i||i.blur())},children:[l&&l.length>1?(0,p.jsx)(eJ.I,{ref:a,type:"text",value:x?"Pages unavailable":u,onChange:e=>m(e.target.value),placeholder:"Search pages",onBlur:()=>d(!1),className:"h-full border-none bg-transparent px-4 py-3 text-lg shadow-none outline-none ring-0 focus-visible:outline-none focus-visible:ring-0",disabled:x,onFocus:e=>{d(!0),setTimeout(()=>{var e;null===(e=a.current)||void 0===e||e.select()},0),/Android/i.test(navigator.userAgent)&&setTimeout(()=>{e.target.scrollIntoView({behavior:"smooth",block:"center"})},200)}}):(0,p.jsx)("p",{className:"flex h-full items-center px-4 text-lg",children:o}),(0,p.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center gap-0.5",children:[c&&(0,p.jsx)(J.z,{variant:"ghost",className:"mr-2 h-8 w-8 p-1",type:"button",onPointerDown:e=>{m("/"),e.preventDefault()},children:(0,p.jsx)(ee.Z,{name:"close"})}),!c&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e9,{variant:"ghost",type:"button",className:"h-8 w-8 p-1"}),(0,p.jsx)(J.z,{variant:"ghost",className:"h-8 w-8 p-1",type:"button",onClick:()=>{s(!0),e(),setTimeout(()=>{s(!1)},1e3)},disabled:t,children:(0,p.jsx)(ee.Z,{name:"refresh",className:t?"animate-spin":""})}),(0,p.jsx)("button",{className:(0,eo.cn)("h-full pl-2 pr-4",j&&"bg-accent-primary text-accent-primary-foreground"),onClick:()=>{y(e=>!e),b(!0)},children:(0,p.jsx)(ee.Z,{name:j?"dock_to_bottom_fill":"dock_to_bottom"})})]})]})]})})]})})},rD=(e,t)=>{if(!t||"/"===t)return(0,p.jsx)("span",{children:e});let s=e.startsWith("/")?e.slice(1):e,a=t.startsWith("/")?t.slice(1):t,l=a.toLowerCase();if(!s.toLowerCase().includes(l))return(0,p.jsx)("span",{children:e});let n=s.toLowerCase().indexOf(l),r=s.slice(0,n),i=s.slice(n,n+a.length),o=s.slice(n+a.length);return(0,p.jsxs)("span",{children:[e.startsWith("/")&&"/",r&&(0,p.jsx)("span",{className:"text-muted-foreground",children:r}),(0,p.jsx)("span",{children:i}),o&&(0,p.jsx)("span",{className:"text-muted-foreground",children:o})]})};var rP=s(74026),rO=s(97752),rA=s(71830),rz=s(61160),rL=s(87751),rM=s(57492);let rZ=()=>{let e=(0,l7.hT)(e=>e.chatMode)===l7.jE.CHAT_ONLY,{setChatMode:t}=(0,l7.VK)(),{isAgentModeDefault:s}=(0,rt.v)();return(0,p.jsx)(eZ.M,{children:e&&(0,p.jsx)(rF,{className:"bg-affirmative-primary text-affirmative-primary-foreground",icon:"emoji_objects",onClick:()=>{t(s?l7.jE.AGENT:l7.jE.DEFAULT)}})})},rF=e=>{let{className:t,icon:s,onClick:a}=e;return(0,p.jsxs)(eF.E.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,type:"spring",bounce:0},className:(0,eo.cn)("flex h-10 shrink-0 items-center justify-center gap-2 rounded-full px-2.5 py-1",t),type:"button",onClick:a,children:[(0,p.jsx)(ee.Z,{name:s}),(0,p.jsx)(ee.Z,{name:"close",className:"opacity-50"})]})},rU=e=>{let[t,s]=(0,g.useState)(!1),a=(0,W.v)(),{setSelectedImageUrl:l}=(0,P.mx)(),{message:n,sendChatMessage:r,isSendingDisabled:i,AuthDialogComponent:o}=(0,ai.i)(),c=(0,g.useCallback)(async()=>{if((0,rM.G)(n)){S.ZP.capture("api_key_detected",{project_id:a}),s(!0);return}await r()},[a,r,n]);return(0,p.jsxs)("div",{className:"flex w-full items-start justify-between gap-2",children:[(0,p.jsx)(rL.s,{isOpen:t,onDismiss:()=>s(!1),onConfirm:()=>{s(!1),r(),S.ZP.capture("api_key_warning_dismissed",{project_id:a})}}),(0,p.jsxs)(rP.x,{className:"relative w-full flex-1 border-none bg-transparent p-0 md:mr-0",onSubmit:c,AuthDialogComponent:o,children:[(0,p.jsx)(rO.T,{setSelectedImageUrl:l}),(0,p.jsxs)("div",{className:"flex flex-1 items-start gap-2",children:[(0,p.jsx)(rA.E,{autoSize:!0,minHeight:40,forceShowPlaceholder:!1,placeholder:"Ask Lovable...",enableSlashCommands:!1,isChatModeActive:!1,className:"text-lg",shouldAutoFocus:!1}),(0,p.jsx)(rZ,{})]}),(0,p.jsx)(rz.yo,{})]}),(0,p.jsx)("div",{className:"mt-1"})]})},rK=e=>{let{view:t}=e;return(0,p.jsxs)("div",{className:"relative z-10",children:[t===nv.$.PREVIEW&&(0,p.jsx)(rI,{}),t===nv.$.CHAT&&(0,p.jsx)(rU,{})]})};var rV=s(96233),rW=s(1828);let rB=e=>{let{}=e,t=(0,l7.hT)(e=>e.chatMode)===l7.jE.CHAT_ONLY,{setChatMode:s}=(0,l7.VK)(),a=(0,e_.zq)(),{isAgentModeDefault:l,setAgentMode:n}=(0,rt.v)();return(0,p.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,p.jsx)(ee.Z,{name:"chat_bubble"}),(0,p.jsx)("p",{className:"flex-1 text-lg",children:"Chat Mode"}),(0,p.jsx)(rW.r,{checked:t,onCheckedChange:()=>s(t?l?l7.jE.AGENT:l7.jE.DEFAULT:l7.jE.CHAT_ONLY),className:"h-6 w-10",thumbClassName:"h-5 w-5"})]}),a&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 py-2",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)(ee.Z,{name:"mode_cool"}),(0,p.jsx)("p",{className:"w-fit flex-1 text-lg",children:"Legacy Mode"})]}),(0,p.jsx)(rW.r,{checked:!l,onCheckedChange:()=>n(!l),className:"h-6 w-10",thumbClassName:"h-5 w-5"})]}),(0,p.jsxs)(tG.default,{href:"https://lovable.dev/blog/agent-mode-beta",target:"_blank",className:"flex items-center gap-1 py-2 text-muted-foreground",children:[(0,p.jsx)(ee.Z,{name:"info"}),(0,p.jsx)("p",{className:"ml-1 text-lg",children:"Agent Features and Pricing"}),(0,p.jsx)(ee.Z,{name:"arrow_outward",className:"ml-auto"})]})]})]})};var rG=s(16054);let rH=e=>{let{closeSheet:t}=e,{getInputProps:s}=(0,rG.j)({portalTargetRef:null,onDropAccepted:t});return(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("label",{className:"flex cursor-pointer flex-col items-center justify-center gap-2 rounded-xl border border-input p-4 active:bg-muted",children:[(0,p.jsx)("input",{className:"hidden",...s({capture:"environment"})}),(0,p.jsx)(ee.Z,{name:"add_a_photo"}),(0,p.jsx)("p",{children:"Camera"})]}),(0,p.jsxs)("label",{className:"flex flex-col items-center justify-center gap-2 rounded-xl border border-input p-4 active:bg-muted",children:[(0,p.jsx)("input",{className:"hidden",...s()}),(0,p.jsx)(ee.Z,{name:"add_photo_alternate"}),(0,p.jsx)("p",{children:"Images"})]})]})},rq=e=>{let{children:t}=e,[s,a]=(0,g.useState)(!1);return(0,p.jsxs)(rV.yo.Root,{license:"commercial",presented:s,onPresentedChange:a,children:[(0,p.jsx)(rV.yo.Trigger,{asChild:!0,children:t}),(0,p.jsx)(rV.yo.Portal,{children:(0,p.jsxs)(rV.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(rV.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(rV.yo.Content,{className:"flex h-auto flex-col gap-4 rounded-t-2xl p-4",children:[(0,p.jsx)(rV.TX.Root,{children:(0,p.jsx)(rV.yo.Handle,{children:"Close menu"})}),(0,p.jsx)(rV.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"}),(0,p.jsx)(rH,{closeSheet:()=>{a(!1)}}),(0,p.jsx)(rB,{})]})]})})]})};var rX=s(66431),rY=s(86843);let r$=e=>{let{children:t}=e,s=(0,ec.z)(e=>e.showHistory),{setShowHistory:a}=(0,ec.VF)(),[l,n]=(0,g.useState)(!1);return(0,p.jsxs)(rV.yo.Root,{license:"commercial",presented:s,onPresentedChange:a,children:[(0,p.jsx)(rV.yo.Trigger,{asChild:!0,children:t}),(0,p.jsx)(rV.yo.Portal,{children:(0,p.jsxs)(rV.yo.View,{className:"z-[10000] h-[max(100dvh,100%)]",swipeOvershoot:!1,onTravelRangeChange:e=>{2===e.start&&n(!0)},onTravelStatusChange:e=>{"idleOutside"===e&&n(!1)},detents:l?void 0:"50vh",children:[(0,p.jsx)(rV.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(rV.yo.Content,{className:"flex h-[calc(max(100dvh,100%)-20px)] flex-col rounded-t-2xl p-4 pb-0",children:[(0,p.jsx)(rV.TX.Root,{children:(0,p.jsx)(rV.yo.Handle,{children:"Close menu"})}),(0,p.jsx)(rV.yo.Title,{children:"History"}),(0,p.jsx)(rV.yo.Description,{className:"text-muted-foreground",children:"View and restore past edits"}),(0,p.jsx)(rV.Xs.Root,{asChild:!0,className:"w-full",children:(0,p.jsx)(rV.Xs.View,{className:"mt-4 flex min-h-0 w-full flex-1 [&>div]:w-full",scrollGestureTrap:{yEnd:!0},scrollGesture:!!l&&"auto",children:(0,p.jsx)(rV.Xs.Content,{asChild:!0,className:"w-full",children:(0,p.jsx)("div",{className:"flex min-h-0 w-full flex-1 flex-col @container/chat",children:(0,p.jsx)(rY.p,{})})})})}),(0,p.jsx)(rX.A,{}),(0,p.jsx)(rV.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"})]})]})})]})},rJ=eF.E.create(J.z),rQ=()=>{let e=(0,ec.z)(e=>e.showHistory),t=(0,nv.gu)(e=>e.isPreviewDocked);return(0,p.jsx)(r$,{children:(0,p.jsx)(rJ,{variant:t?"outline":"secondary",size:"mobile-round",className:(0,eo.cn)("bg-secondary !shadow-modal hover:bg-secondary md:hover:bg-accent-primary/75 md:hover:text-accent-primary-foreground",e&&"bg-accent-primary text-accent-primary-foreground hover:bg-accent-primary md:hover:bg-accent-primary/75",!t&&"!shadow-modal",t&&"!shadow-transparent"),initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},style:{transition:"box-shadow 0.2s ease-out"},children:(0,p.jsx)(ee.Z,{name:"history"})})})};var r0=s(96279);let r1=e=>{let{children:t}=e,s=(0,W.v)(),{message:a,sendChatMessage:l,isSendingDisabled:n}=(0,ai.i)(),{showStopAction:r,mutation:i}=(0,r0.q)({projectId:null!=s?s:void 0}),o=(0,g.useCallback)(async()=>{await i.mutateAsync()},[i]);return s&&(r||i.isPending)?(0,p.jsx)(eF.E.button,{type:"button",className:(0,eo.cn)("flex h-10 w-10 items-center justify-center rounded-full bg-primary transition-opacity duration-150 disabled:cursor-not-allowed disabled:opacity-50"),disabled:i.isPending,onClick:o,initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(ee.Z,{name:"stop_fill",size:"large",className:"text-background"})},"stop-button"):a.length>0?(0,p.jsx)(eF.E.button,{id:"chatinput-send-message-button",type:"submit",className:(0,eo.cn)("flex h-10 w-10 items-center justify-center rounded-full bg-foreground text-background transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50"),disabled:n,onClick:l,initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(ee.Z,{name:"arrow_upward_alt_600",size:"large"})},"send-button"):t};var r2=s(37053);let r5=(0,g.forwardRef)((e,t)=>{let{children:s,className:a,asChild:l=!1,...n}=e,r=l?r2.g7:"div";return(0,p.jsx)(r,{ref:t,className:(0,eo.cn)("flex items-center gap-2 py-2 transition-colors duration-150 ease-in-out active:text-muted-foreground",a),...n,children:s})});r5.displayName="MobileMenuOption";let r4=e=>{let{project:t,hasSupabaseConfig:s,isLoadingSecurityWarnings:a,securityWarnings:l}=e,{openSettings:n}=(0,ej.r)(),{customDomains:r}=sR({projectId:null==t?void 0:t.id,enabled:!0});return(0,p.jsxs)("div",{className:"my-4 flex flex-col gap-2",children:[(null==t?void 0:t.url)?(0,p.jsx)(r5,{asChild:!0,children:(0,p.jsxs)("a",{href:null==t?void 0:t.url,target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(ee.Z,{name:"language"}),(0,sS.P)(t.url),(0,p.jsx)(ee.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground"})]})}):(0,p.jsxs)(r5,{children:[(0,p.jsx)(ee.Z,{name:"language"}),(0,p.jsxs)("p",{className:"font-medium",children:[null==t?void 0:t.name,".lovable.app"]})]}),null==r?void 0:r.map((e,t)=>(0,p.jsx)("div",{className:"flex items-center px-4 py-0.5",children:(0,p.jsx)(s_.Z,{domain:e,showRemove:!1,showIcon:!0},t)},t)),(0,p.jsxs)(r5,{onClick:()=>n("domains"),children:[(0,p.jsx)(ee.Z,{name:"add"}),"Custom domains"]}),s&&(0,p.jsx)(sU,{isLoadingSecurityWarnings:null!=a&&a,securityWarnings:null!=l?l:null,project:t})]})},r6=e=>{var t,s;let{children:a}=e,[l,n]=(0,g.useState)(!1),{setView:r}=(0,nv.zp)(),i=()=>{n(!1)},[o,c]=(0,g.useState)(!1),d=(0,$.iZ)(e=>e.project),u=(0,$.iZ)(e=>e.projectId),m=!!(null==d?void 0:null===(t=d.supabase_project_config)||void 0===t?void 0:t.supabase_project_id),{securityWarnings:h,isLoadingWarnings:x,hasSupabaseErrors:f,handleSecurityReview:v,isSendingSecurityReview:b,isSecurityReviewDisabled:j,securityReviewDisabledReason:y}=(0,sL.N)({projectId:u,supabaseProjectId:null==d?void 0:null===(s=d.supabase_project_config)||void 0===s?void 0:s.supabase_project_id,setIsOpen:n,setShowPublishConfirmDialog:c,shouldFetchSecurityWarnings:l}),{errorMessage:w,isBuildError:N,failedDialogOpen:E,setFailedDialogOpen:k,handlePublish:C,handlePublishAnyway:_,publishMutation:S}=sz({projectId:u,securityWarnings:h,setShowPublishConfirmDialog:c}),T=(0,e_.wf)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(rV.yo.Root,{license:"commercial",presented:l,onPresentedChange:n,children:[(0,p.jsx)(rV.yo.Trigger,{asChild:!0,children:a}),(0,p.jsx)(rV.yo.Portal,{children:(0,p.jsxs)(rV.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(rV.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(rV.yo.Content,{className:"h-auto rounded-t-2xl p-4",children:[(0,p.jsx)(rV.TX.Root,{children:(0,p.jsx)(rV.yo.Handle,{children:"Close menu"})}),(0,p.jsx)(rV.yo.Title,{children:(null==d?void 0:d.url)?"Update":"Publish"}),(0,p.jsx)(rV.yo.Description,{className:"text-muted-foreground",children:(null==d?void 0:d.url)?"Update your project to make your changes live.":"Publish your project to make it visible for others on the internet."}),(0,p.jsx)(r4,{project:d,hasSupabaseConfig:m,isLoadingSecurityWarnings:x,securityWarnings:null!=h?h:void 0}),T&&(0,p.jsx)(sC,{project:d}),(0,p.jsxs)("div",{className:"mt-8 flex items-center gap-2",children:[!f&&(0,p.jsx)(sw.b,{showTooltip:!!y,tooltipContent:y,className:"w-full",children:(0,p.jsxs)(J.z,{variant:"secondary",onClick:()=>{r(nv.$.CHAT),v(),i()},disabled:j,loading:b,className:"relative h-10 w-full gap-1.5 text-base",children:["Review Security ",(0,p.jsx)(sE.L,{className:"text-sm"})]})}),(0,p.jsx)(J.z,{variant:f?"secondary":"affirmative",onClick:C,disabled:x,loading:S.isPending,className:"h-10 w-full text-base",children:(null==d?void 0:d.url)?"Update":"Publish"}),f&&(0,p.jsx)(sw.b,{showTooltip:!!y,tooltipContent:y,className:"w-full",children:(0,p.jsxs)(J.z,{variant:"affirmative",onClick:()=>{r(nv.$.CHAT),v(),i()},disabled:j,loading:b,className:"relative h-10 w-full gap-1.5 text-base",children:["Review Security ",(0,p.jsx)(sE.L,{className:"text-sm"})]})})]}),(0,p.jsx)(rV.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"})]})]})})]}),(0,p.jsx)(sg,{open:E,onOpenChange:k,errorMessage:w,isBuildError:N}),(0,p.jsx)(sN,{open:o,onOpenChange:c,onPublishAnyway:_,onReviewIssues:v,isReviewDisabled:j,isReviewLoading:b,reviewDisabledReason:y})]})},r3=eF.E.create(J.z),r8=()=>{let{activeView:e,consoleContentType:t}=(0,O.Sl)(e=>({activeView:e.activeView,consoleContentType:e.consoleContentType})),s=(0,P.aK)(e=>e.edits),a=(0,O.Sl)(e=>e.activeEditId),l=a?s[a]:null,{openSettings:n}=(0,ej.r)();return"preview"===e?(0,p.jsx)(r9,{}):"console"===e&&"snapshot-preview"===t?(0,p.jsx)(r7,{activeEdit:l}):(0,p.jsx)(r3,{variant:"outline",size:"mobile-round",onClick:()=>n(),initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(ee.Z,{name:"settings"})},"settings-button")},r7=e=>{let{activeEdit:t}=e,{setView:s}=(0,nv.zp)(),{exitConsole:a}=(0,O.pE)(),l=(0,sX.C)(),n=(0,A.bk)(e=>e.isSomeRevertMutationPending),{mutate:r,isPending:i}=(0,sY.I)({onSuccess:a}),o=(0,nv.gu)(e=>e.isPreviewDocked);return(0,p.jsx)(r3,{variant:o?"outline":"secondary",size:"mobile-round",className:(0,eo.cn)("animate-text-shimmer px-0 text-lg text-affirmative-primary hover:bg-secondary focus-visible:bg-secondary active:bg-secondary",!o&&"!shadow-modal",o&&"!shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},disabled:!t||l||n||i,onClick:()=>{r({edit:t}),s(nv.$.CHAT)},initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(ee.Z,{name:"restart_alt",className:i?"animate-spin-reverse":""})},"restore-button")},r9=()=>{let e=(0,nv.gu)(e=>e.isPreviewDocked);return(0,p.jsx)(r6,{children:(0,p.jsx)(r3,{variant:e?"outline":"secondary",size:"mobile-round",className:(0,eo.cn)("px-0 text-lg text-affirmative-primary hover:bg-secondary focus-visible:bg-secondary active:bg-secondary",!e&&"!shadow-modal",e&&"!shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(ee.Z,{name:"language"})},"publish-button")})},ie=()=>{let{view:e}=(0,nv.gu)(e=>e),{setView:t}=(0,nv.zp)(),s=(0,g.useRef)(null),a=(0,nv.gu)(e=>e.isPreviewDocked);return(0,p.jsxs)(eF.E.div,{ref:s,className:(0,eo.cn)("relative grid h-10 flex-1 grid-cols-2 rounded-full bg-muted text-lg",e===nv.$.PREVIEW&&!a&&"shadow-modal",a&&"shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,type:"spring",bounce:0},children:[(0,p.jsx)("div",{onClick:()=>t(nv.$.CHAT),className:(0,eo.cn)("relative flex h-full cursor-pointer items-center justify-center rounded-full px-4"),"data-testid":"mobile-view-chat-button",children:(0,p.jsx)("span",{className:"pointer-events-none relative z-10 select-none",children:"Chat"})}),(0,p.jsx)("div",{onClick:()=>t(nv.$.PREVIEW),className:(0,eo.cn)("relative flex h-full cursor-pointer items-center justify-center rounded-full px-4"),"data-testid":"mobile-view-preview-button",children:(0,p.jsx)("span",{className:"pointer-events-none relative z-10 select-none",children:"Preview"})}),(0,p.jsx)(eF.E.div,{className:"absolute inset-y-[2px] w-1/2 rounded-full bg-background shadow-md","data-testid":"mobile-view-pill","data-view":e,initial:{left:e===nv.$.CHAT?"2px":"calc(50% - 2px)"},animate:{left:e===nv.$.CHAT?"2px":"calc(50% - 2px)"},transition:{type:"spring",duration:.4,bounce:0},layoutId:"mobile-view-switcher-pill",drag:"x",dragConstraints:s,dragElastic:0,dragMomentum:!0,dragTransition:{bounceStiffness:80,bounceDamping:10},dragSnapToOrigin:!0,onDragEnd:(e,a)=>{if(!s.current)return;let l=a.offset.x;Math.abs(l)>40&&(l>0?t(nv.$.PREVIEW):t(nv.$.CHAT))}},"pill-".concat(e))]},"mobile-view-switcher")},it=()=>(0,p.jsxs)("div",{className:"absolute inset-0 translate-y-[30%] [&>div]:absolute [&>div]:inset-0",style:{bottom:"calc(-1 * env(safe-area-inset-bottom))"},children:[(0,p.jsx)("div",{style:{zIndex:2,WebkitBackdropFilter:"blur(1px)",backdropFilter:"blur(1px)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 12.5%, rgb(255, 255, 255) 37.5%, rgba(255, 255, 255, 0) 50%)"}}),(0,p.jsx)("div",{style:{zIndex:3,WebkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 12.5%, rgb(255, 255, 255) 37.5%, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 62.5%)"}}),(0,p.jsx)("div",{style:{WebkitBackdropFilter:"blur(4px)",backdropFilter:"blur(4px)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 37.5%, rgb(255, 255, 255) 50%, rgb(255, 255, 255) 62.5%, rgba(255, 255, 255, 0) 75%)"}}),(0,p.jsx)("div",{style:{zIndex:5,WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 50%, rgb(255, 255, 255) 62.5%, rgb(255, 255, 255) 75%, rgba(255, 255, 255, 0) 87.5%)",WebkitBackdropFilter:"blur(8px)",backdropFilter:"blur(8px)"}})]}),is=eF.E.create(J.z),ia=()=>{let{view:e}=(0,nv.gu)(e=>e),{setView:t}=(0,nv.zp)(),{setShowConsole:s,exitConsole:a}=(0,O.pE)(),{openSettings:l}=(0,ej.r)(),n=(0,nv.gu)(e=>e.isPreviewDocked),r=(0,O.Sl)(e=>e.consoleContentType);return"preview"===(0,O.Sl)(e=>e.activeView)||"snapshot-preview"===r||e===nv.$.CHAT||null===r?(0,p.jsxs)("div",{className:(0,eo.cn)("relative z-10 -mx-px flex w-[calc(100%+2px)] flex-col gap-2 rounded-t-2xl border-l border-r border-t bg-background p-4",e===nv.$.PREVIEW&&"gap-2 rounded-none bg-transparent transition-colors duration-150 ease-in-out",!n&&e===nv.$.PREVIEW&&"border-none"),children:[!n&&(0,p.jsx)(it,{}),(0,p.jsx)(rK,{view:e}),(0,p.jsxs)("div",{className:"z-20 flex w-full items-center justify-between gap-2",children:[(0,p.jsx)("div",{className:"flex justify-start gap-2",children:(0,p.jsxs)(eZ.M,{children:[e===nv.$.CHAT&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(rq,{children:(0,p.jsx)(is,{variant:"outline",size:"mobile-round",initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(ee.Z,{name:"add"})})})}),e===nv.$.PREVIEW&&(0,p.jsx)(rQ,{})]})}),(0,p.jsx)(ie,{}),(0,p.jsx)("div",{className:"flex justify-end gap-2",children:(0,p.jsxs)(eZ.M,{children:[e===nv.$.CHAT&&(0,p.jsx)(r1,{children:(0,p.jsx)(is,{variant:"outline",size:"mobile-round",onClick:()=>l(),initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(ee.Z,{name:"settings"})},"settings-button")}),e===nv.$.PREVIEW&&(0,p.jsx)(r8,{})]})})]})]}):(0,p.jsx)(il,{consoleContentType:r,setView:t,exitConsole:a})},il=e=>{let{consoleContentType:t,setView:s,exitConsole:a}=e;return(0,p.jsxs)("div",{className:"relative -mx-px flex w-[calc(100%+2px)] items-center justify-between overflow-hidden rounded-t-2xl border-x border-t bg-background px-4 py-4",children:[(0,p.jsx)(J.z,{variant:"outline",onClick:()=>{s(nv.$.CHAT),a()},size:"mobile-round",children:(0,p.jsx)(ee.Z,{name:"chevron_left"})}),(0,p.jsxs)("p",{className:"absolute left-1/2 -translate-x-1/2 whitespace-nowrap text-center font-medium",children:["Viewing ",O.vD[t]]})]})},ir=e=>{let{onSelect:t}=e;return(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,p.jsx)(ii,{value:"system",label:"System",icon:"contrast",onSelect:t}),(0,p.jsx)(ii,{value:"light",label:"Light",icon:"light_mode",onSelect:t}),(0,p.jsx)(ii,{value:"dark",label:"Dark",icon:"dark_mode",onSelect:t})]})},ii=e=>{let{value:t,label:s,icon:a,onSelect:l}=e,{theme:n,setTheme:r}=(0,tl.F)(),i=e=>{("light"===e||"dark"===e||"system"===e)&&(r(e),null==l||l())};return(0,p.jsxs)("div",{className:(0,eo.cn)("flex cursor-pointer flex-col items-center justify-center gap-2 rounded-xl border border-input bg-background p-4 active:bg-muted-active",n===t&&"border-primary"),onClick:()=>i(t),children:[(0,p.jsx)(ee.Z,{name:a}),(0,p.jsx)("p",{children:s})]})},io=e=>{let{children:t}=e,{authUser:s}=(0,b.Eu)(),{theme:a}=(0,tl.F)(),[l,n]=(0,g.useState)(!1),r=(0,eM.hO)(e=>e.projectWorkspace),i=!!(s&&r&&(null==s?void 0:s.uid)===(null==r?void 0:r.owner_id)),o=(0,$.iZ)(e=>e.project),{canEdit:c}=(0,_.t)(),[d,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)("initial"),{openSettings:x}=(0,ej.r)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(rV.yo.Root,{license:"commercial",presented:l,onPresentedChange:e=>{n(e),h("initial")},className:"flex min-w-0",children:[(0,p.jsx)(rV.yo.Trigger,{asChild:!0,children:t}),(0,p.jsx)(rV.yo.Portal,{children:(0,p.jsxs)(rV.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(rV.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(rV.yo.Content,{className:"relative flex h-auto min-h-[20vh] flex-col overflow-hidden rounded-t-2xl",children:[(0,p.jsx)(rV.TX.Root,{children:(0,p.jsx)(rV.yo.Handle,{children:"Close menu"})}),(0,p.jsxs)("div",{className:"relative flex-1 overflow-hidden rounded-t-2xl",children:[(0,p.jsxs)(eF.E.div,{className:"rounded-t-2xl bg-background p-4",initial:{x:"0%"},animate:{x:"initial"===m?"0%":"-20%"},transition:{duration:.4,type:"spring",bounce:.1},children:[c&&r&&(0,p.jsx)(eP.H,{workspace:r,isOwnerOfWorkspace:i}),(0,p.jsxs)("div",{className:"flex flex-col gap-1 py-4",children:[c&&(0,p.jsxs)(r5,{onClick:()=>{n(!1),x("project")},children:[(0,p.jsx)(ee.Z,{name:"settings"}),(0,p.jsx)("p",{children:"Project settings"})]}),c&&o&&(0,p.jsxs)(r5,{onClick:()=>{n(!1),u(!0)},children:[(0,p.jsx)(ee.Z,{name:"edit"}),(0,p.jsx)("span",{children:"Rename project"})]}),(0,p.jsxs)(r5,{onClick:()=>h("appearance"),children:[(0,p.jsx)(ee.Z,{name:"contrast"}),(0,p.jsx)("span",{children:"Appearance"}),(0,p.jsxs)("div",{className:"ml-auto flex items-center gap-1 text-muted-foreground",children:[(0,p.jsx)("span",{className:"capitalize",children:a}),(0,p.jsx)(ee.Z,{name:"chevron_right"})]})]})]})]}),(0,p.jsxs)(eF.E.div,{className:"absolute inset-0 flex flex-col gap-4 rounded-t-2xl bg-muted p-4",initial:{x:"100%"},animate:{x:"appearance"===m?"0%":"100%"},transition:{duration:.4,type:"spring",bounce:.1},children:[(0,p.jsxs)("div",{className:"relative flex w-full justify-center",children:[(0,p.jsxs)("button",{className:"absolute left-0 top-0 flex items-center gap-1 duration-150 ease-in-out active:text-muted-foreground",onClick:()=>h("initial"),children:[(0,p.jsx)(ee.Z,{name:"chevron_left"}),(0,p.jsx)("span",{children:"Back"})]}),(0,p.jsx)("p",{className:"text-center font-medium",children:"Appearance"})]}),(0,p.jsx)(ir,{onSelect:()=>h("initial")})]})]}),(0,p.jsx)(rV.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"})]})]})})]}),o&&(0,p.jsx)(ev.i,{project:o,isOpen:d,onClose:()=>u(!1)})]})},ic=e=>{let{canEdit:t=!0,isLoadingPermissions:s=!1}=e,a=(0,$.iZ)(e=>e.project),l=!!(null==a?void 0:a.is_supabase_enabled)||!!(null==a?void 0:a.supabase_project_config);return(0,p.jsxs)("div",{className:"relative z-10 flex h-12 w-full shrink-0 items-center justify-between gap-4 bg-background pr-4",children:[(0,p.jsx)(J.z,{variant:"ghost",asChild:!0,className:"h-full hover:bg-transparent focus-visible:bg-transparent active:bg-transparent",children:(0,p.jsx)(tG.default,{href:"/",children:(0,p.jsx)(ee.Z,{name:"chevron_left"})})}),(0,p.jsx)(io,{children:(0,p.jsxs)("h1",{className:"absolute left-1/2 top-1/2 flex min-w-0 max-w-[50vw] -translate-x-1/2 -translate-y-1/2 items-center gap-1 truncate text-lg font-medium",children:[(null==a?void 0:a.name)?(0,p.jsx)("span",{className:"truncate",children:a.name}):(0,p.jsx)(eU.O,{className:"h-4 w-36"}),(0,p.jsx)(ee.Z,{name:"chevron_right",className:"rotate-90"})]})}),(0,p.jsx)(id,{canEdit:t,isLoadingPermissions:s,isSupabaseEnabled:l})]})},id=e=>{let{canEdit:t,isLoadingPermissions:s,isSupabaseEnabled:a}=e,{setIsRemixDialogOpen:l}=(0,$.d2)(),{isAuthenticated:n}=(0,b.Eu)(),r=(0,f.useRouter)(),i=(0,g.useCallback)(()=>{if(!n){r.push("/login?redirect=".concat(window.location.pathname));return}l(!0)},[n,r,l]);return s?(0,p.jsx)("div",{className:"h-4 w-10"}):t?(0,p.jsx)(sm,{hasUnsavedChanges:!1}):(0,p.jsx)(J.z,{className:"flex items-center gap-1",onClick:i,disabled:!(t||!a),size:"sm",children:"Remix"})},iu=e=>{let{children:t,projectId:s}=e,{view:a}=(0,nv.gu)(e=>e),l=(0,$.iZ)(e=>e.project),n=(0,nv.gu)(e=>e.isPreviewDocked),{setIsPreviewDocked:r}=(0,nv.zp)();(0,g.useEffect)(()=>{window.addEventListener("message",e=>{"SCROLLABLE"===e.data.type&&r(!1)})},[r]);let[i,o]=(0,g.useState)(!1),{canEdit:c,isLoading:d}=(0,_.t)();return((0,g.useEffect)(()=>{a===nv.$.PREVIEW&&o(!0)},[a]),c)?(0,p.jsxs)("div",{className:"flex h-dvh min-h-0 max-w-[100vw] flex-1 flex-col overflow-hidden md:hidden",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[(0,p.jsxs)("div",{className:(0,eo.cn)("relative min-h-0 flex-1"),children:[(0,p.jsxs)(eF.E.div,{animate:{x:a===nv.$.CHAT?0:"-100vw"},transition:{duration:.5,type:"spring",bounce:.15},className:(0,eo.cn)("absolute inset-0 flex min-h-0 max-w-[100vw] flex-1 flex-col will-change-transform",a!==nv.$.CHAT&&"pointer-events-none"),"aria-hidden":a!==nv.$.CHAT,tabIndex:a!==nv.$.CHAT?-1:0,inert:a!==nv.$.CHAT,children:[(0,p.jsx)(ic,{}),t]},nv.$.CHAT),(i||a===nv.$.PREVIEW)&&(0,p.jsx)(eF.E.div,{initial:{x:"100vw"},animate:{x:a===nv.$.PREVIEW?0:"100vw"},transition:{duration:.5,type:"spring",bounce:.15},className:(0,eo.cn)("absolute inset-0 flex max-w-[100vw] flex-1 flex-col overflow-y-auto overflow-x-hidden will-change-transform",a!==nv.$.PREVIEW&&"pointer-events-none",n?"h-auto":"h-dvh"),"aria-hidden":a!==nv.$.PREVIEW,tabIndex:a!==nv.$.PREVIEW?-1:0,inert:a!==nv.$.PREVIEW,children:(0,p.jsx)(rm,{projectId:s})},nv.$.PREVIEW)]}),(0,p.jsx)(rR.t,{children:(0,p.jsx)(ia,{})}),l&&(0,p.jsx)(ry,{project:l}),(0,p.jsx)(rS,{})]}):(0,p.jsx)(im,{projectId:s,isLoadingPermissions:d})},im=e=>{let{projectId:t,isLoadingPermissions:s}=e,a=(0,$.iZ)(e=>e.project);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"relative flex h-dvh min-h-0 max-w-[100vw] flex-1 flex-col overflow-hidden md:hidden",children:[(0,p.jsx)(ic,{canEdit:!1,isLoadingPermissions:s}),(0,p.jsx)("div",{className:(0,eo.cn)("absolute inset-0 flex h-dvh flex-1 flex-col"),children:(0,p.jsx)(rm,{projectId:t})})]}),a&&(0,p.jsx)(ry,{project:a}),(0,p.jsx)(rS,{})]})};var ip=s(52089);function ih(){let e=(0,W.D)(),{refreshPreview:t}=(0,eI.My)(),{errors:s}=(0,ip.hT)({projectId:e}),a=(0,A.bk)(e=>e.isSendChatMessageMutationPending),l=(0,g.useRef)(!1);(0,g.useEffect)(()=>{a?s&&s.length>0&&(l.current=!0):(l.current&&t(),l.current=!1)},[s,t,a])}var ix=s(84350),ig=s(78844),iv=s(38706);function ib(e){let{open:t,onOpenChange:s}=e,a=(0,iv.T_)("SupabaseReauthDialog"),l=(0,W.v)(),{handleConnect:n}=(0,ig.hb)(l||"");return(0,p.jsx)(Q.Vq,{open:t,onOpenChange:s,children:(0,p.jsxs)(Q.cZ,{size:"md",children:[(0,p.jsxs)(Q.fK,{children:[(0,p.jsx)(Q.$N,{children:a("title")}),(0,p.jsx)(Q.Be,{children:a("description")})]}),(0,p.jsx)("div",{className:"mt-4 flex flex-col gap-4",children:(0,p.jsx)(J.z,{onClick:()=>{s(!1),n()},className:"w-full",children:a("button.reauthenticate")})})]})})}var ij=s(72253),iy=s(79804);let iw=e=>{var t;let{children:s}=e,a=(0,$.iZ)(e=>e.projectId);ih();let l=(0,h.NL)(),n=(0,sX.C)(),{canEdit:r,isProjectAdmin:i}=(0,_.t)(),o=(0,s6.mo)({projectId:a,onRepoInaccessible:()=>{l.setQueryData(iy.V.repoAccessibility({projectId:a,userProjectPermissions:{admin:i,edit:r}}).queryKey,()=>({accessibility:m.accessibility.REPO_NOT_ACCESSIBLE}))}}),{userData:c}=(0,M.SE)(),[d,u]=(0,g.useState)(!1),x=(0,$.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.supabase_project_config}),f=(0,$.iZ)(e=>e.project),v=(0,ij.S)({workspaceId:null!==(t=null==f?void 0:f.workspace_id)&&void 0!==t?t:""}),b=(0,g.useCallback)(async e=>{var t,s,l;let{body:n,options:r}=e;null==r||null===(t=r.clear)||void 0===t||t.call(r),S.LJ.capture(R.SL.CHAT.MESSAGE_SENT,{project_id:a,selected_element:(null===(s=n.selected_elements)||void 0===s?void 0:s.length)||null});let i=null==x?void 0:x.supabase_organization_id,c=null==v?void 0:null===(l=v.supabaseOrganizations)||void 0===l?void 0:l.find(e=>e.id===i);if(x&&c&&!c.has_analytics_scope){u(!0);return}await o.mutateAsync({body:n,restore:null==r?void 0:r.restore,clear:null==r?void 0:r.clear})},[null==f?void 0:f.workspace_id,a,o,x,null==v?void 0:v.supabaseOrganizations]);return(0,p.jsxs)(ix.x,{onSendChatMessage:b,hasActiveLock:n,children:[(0,p.jsx)(ib,{open:d,onOpenChange:u}),s]})},iN="joinedViaInviteLink";function iE(e){var t;let{children:s}=e,{project_id:a}=(0,f.useParams)(),l=(0,f.useSearchParams)(),n=null!==(t=null==l?void 0:l.get("messageId"))&&void 0!==t?t:void 0;return(0,p.jsx)(E.qG,{localStorageKey:a,children:(0,p.jsx)($.jI,{projectId:a,children:(0,p.jsx)(k.m,{children:(0,p.jsx)(eM.c8,{children:(0,p.jsx)(Y.h,{projectId:a,children:(0,p.jsx)(ec.f6,{children:(0,p.jsx)(nv.eP,{children:(0,p.jsx)(l7.cb,{children:(0,p.jsx)(e2.NE,{children:(0,p.jsx)(tn.TO,{projectId:a,children:(0,p.jsx)(A.vw,{children:(0,p.jsx)(O.BV,{children:(0,p.jsx)(P.aM,{projectId:a,messageId:n,children:(0,p.jsx)(eI.wF,{children:(0,p.jsx)(ik,{children:s})})})})})})})})})})})})})})})}function ik(e){let{children:t}=e,s=(0,$.iZ)(e=>e.projectId),a=(0,f.useSearchParams)(),l=(0,f.useRouter)(),n=(0,f.usePathname)(),r=(0,$.iZ)(e=>e.project),i=(0,g.useRef)(new Set),o=(0,h.NL)(),{authUser:c}=(0,b.Eu)(),d=()=>{let e=new URLSearchParams(a.toString());e.delete(iN);let t=e.toString(),s=t?"".concat(n,"?").concat(t):n;l.replace(s)},{mutate:u}=(0,x.D)({mutationFn:async e=>(0,N.SJ)().put("/projects/".concat(e,"/collaborators/accept-invite")),onSuccess:()=>{i.current.has(s)||v.Am.success("You've been added to \"".concat(null==r?void 0:r.name,'"'),{description:"You now have access to this project"}),i.current.add(s),d()},onError:e=>{(0,w.Eo)(e)},onSettled:()=>{o.invalidateQueries({queryKey:C.iZ.collaborators(s)})}});return(0,g.useEffect)(()=>{let e=a.get(iN);if(!c&&e){l.replace("/login");return}e&&r&&!i.current.has(s)&&u(s)},[a,s,n,l,r,u,c]),!function(e){let{projectId:t}=e,{canEdit:s}=(0,_.t)(),{setIsSendChatMessageMutationPending:a}=(0,A.Xr)(),{setShouldShowTipsAndTricksOnDevServerStart:l}=(0,O.pE)(),{updateConsoleStateOnStreaming:n}=(0,D.k)({autoSwitchToCode:!1}),{createChatRequestPerformanceMeasurer:r}=(0,U.t)(),{updateMessage:i,setLatestStreamedMessage:o,snapshot:{getUserMessageCount:c,getLastUserMessage:d}}=(0,P.mx)(),{playAudioOnGenerationComplete:u}=F(),{handleChatStreamingError:m}=(0,L.Z)(),p=(0,g.useRef)(null),h=(0,g.useRef)(!1),x=(0,g.useRef)(""),f=(0,g.useRef)(!1),v=(0,g.useCallback)(e=>{if("message"!==e.type){T.logging.error("received_unknown_chat_sse",{event_type:e.type,event_data:e.data});return}let s=e.data;p.current!=s.message_id&&(x.current="",h.current=!1),p.current=s.message_id;let m=!h.current&&!s.is_final,g=h.current&&s.is_final;if(h.current=!s.is_final,m&&(a(!0),x.current="",f.current=!1),g){var v,b;a(!1),o(void 0),l(!1),x.current="";let{measureTimeToLastToken:e}=r({projectId:t});e();let s=1>=c(),n=null!==(b=null===(v=d())||void 0===v?void 0:v.chatOnly)&&void 0!==b&&b;s&&S.ZP.capture(R.SL.CREATION.DONE_AND_RETAINED_VIEW,{project_id:t}),f.current||u({isCreation:s,isChatOnly:n});return}x.current+=s.content;let j={id:s.message_id,content:x.current,created_at:s.created_at,role:I.r.role.AI,tag:I.r.tag.INSTANT_MODE_MESSAGE,status:"running",stopped:!1,thinking_time_ms:s.thinking_time_ms,time_to_first_token_ms:s.time_to_first_token_ms,graph_id:s.graph_id,exclude_from_history:!1},y={...j,stopped:!!j.stopped,status:"running"};o(y);let w=(0,z.AR)(y);w&&("aiMessage"===w.type||"userMessage"===w.type)&&i(j.id,w,!0),n(j)},[o,n,a,l,r,t,c,d,u,i]);(0,g.useEffect)(()=>{let e=new AbortController,a=async()=>{let s=(0,N.SJ)();try{await s.getWithStreaming({url:"/projects/".concat(t,"/latest-message"),onMessage:v,signal:e.signal,reconnectOptions:{onReconnect:()=>{h.current=!1}}})}catch(e){var a,l;e instanceof Error&&"AbortError"===e.name&&(f.current=!0),m(e,{lastUserMessageId:null!==(l=null===(a=d())||void 0===a?void 0:a.id)&&void 0!==l?l:""})}};return s&&a(),()=>{f.current=!0,e.abort()}},[s,t])}({projectId:s}),el(),(0,p.jsx)(j.$,{projectId:s,children:(0,p.jsx)(tQ,{projectId:s,children:(0,p.jsx)(iC,{children:t})})})}let iC=e=>{let{children:t}=e,s=(0,$.iZ)(e=>e.projectId),{startLiveModeInBackground:a}=(0,eI.My)(),{canEdit:l}=(0,_.t)();ih();let n=(0,y.Z)("md");return(0,g.useEffect)(()=>{l&&a()},[a,l]),(0,p.jsx)(iw,{children:(0,p.jsx)(to.P,{children:n?(0,p.jsx)(iu,{projectId:s,children:t}):(0,p.jsx)(rT,{projectId:s,children:t})})})}},56613:function(e,t,s){"use strict";s.d(t,{I_:function(){return u},PanelStoreProvider:function(){return c},SE:function(){return d},k6:function(){return m}});var a=s(57437),l=s(2265),n=s(59625),r=s(33699),i=s(37545);let o=(0,l.createContext)(null);function c(e){let{initialPanelSizes:t,children:s}=e,n=(0,l.useRef)();return n.current||(n.current=(0,r.b)(t)),(0,a.jsx)(o.Provider,{value:n.current,children:s})}function d(e){let t=(0,l.useContext)(o);if(!t)throw Error("usePanelStore must be used within a PanelStoreProvider");return(0,n.oR)(t,e)}let u=()=>{let{width:e}=(0,i.Z)();return e?325/e*100:20},m=()=>{let{width:e}=(0,i.Z)();return e?600/e*100:60}},33699:function(e,t,s){"use strict";s.d(t,{DEFAULT_SIDEBAR_SIZE:function(){return n},b:function(){return l}});var a=s(59625);let l=e=>(0,a.Ue)(t=>({panelSizes:e||[n,100-n],updatePanelSizes:e=>t({panelSizes:e})})),n=30},95670:function(e,t,s){"use strict";var a=s(57437),l=s(33145),n=s(27648),r=s(55721),i=s(57346),o=s(94508);t.Z=e=>{let{title:t,iconName:s,imageSrc:c,onClick:d,internalHref:u,externalHref:m,className:p,iconClassName:h}=e,x=(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(i.Z,{name:s,className:"shrink-0 text-foreground ".concat(h)}),c&&(0,a.jsx)(l.default,{alt:"icon",src:c,width:"14",height:"14"}),(0,a.jsx)("span",{className:"truncate text-primary",children:t})]});return(0,a.jsx)(r.Xi,{className:(0,o.cn)("",p),asChild:!0,children:u?(0,a.jsx)(n.default,{href:u,children:x}):m?(0,a.jsxs)("a",{href:m,target:"_blank",rel:"noopener noreferrer",children:[x,(0,a.jsx)(i.Z,{name:"arrow_outward",className:"ml-auto h-4 w-4 text-foreground"})]}):(0,a.jsx)("div",{onClick:()=>{d&&d()},children:x})})}},61011:function(e,t,s){"use strict";var a=s(57437),l=s(2265),n=s(62869),r=s(26110);t.Z=e=>{let{title:t="Remove",targetName:s,descriptionTemplate:i="Are you sure you want to remove {name}? They will no longer have access.",confirmButtonText:o="Remove",cancelButtonText:c="Cancel",onConfirm:d,onCancel:u}=e,[m,p]=(0,l.useState)(!1),h=async()=>{p(!0);try{await d()}finally{p(!1)}},x=i.replace("{name}",s);return(0,a.jsxs)(r.cZ,{size:"sm",children:[(0,a.jsxs)(r.fK,{children:[(0,a.jsx)(r.$N,{children:t}),(0,a.jsx)(r.Be,{children:x})]}),(0,a.jsxs)(r.cN,{className:"gap-2 sm:justify-end",children:[(0,a.jsx)(n.z,{variant:"outline",onClick:u,disabled:m,children:c}),(0,a.jsx)(n.z,{variant:"destructive",onClick:h,disabled:m,loading:m,children:m?"Removing...":o})]})]})}},9259:function(e,t,s){"use strict";s.d(t,{R:function(){return i}});var a=s(57437),l=s(2265),n=s(95186),r=s(94508);let i=l.forwardRef((e,t)=>{let{value:s,onChange:i,min:o=0,max:c=100,step:d=1,className:u,inputClassName:m,leftIconClassName:p,scrubSensitivity:h=.5,direction:x="horizontal",icon:f,leftIcon:g,disabled:v=!1,...b}=e,[j,y]=l.useState(s.toString()),[w,N]=l.useState(!1),E=l.useRef(!1),k=l.useRef(0),C=l.useRef(0),_=l.useRef(parseFloat(j)||o),S=l.useMemo(()=>{if(!Number.isFinite(d))return 0;let e=d.toString().split(".")[1];return e?e.length:0},[d]);function T(e){v||0!==e.button||(N(!0),E.current=!0,k.current=e.clientX,C.current=e.clientY,_.current=parseFloat(j)||o,document.addEventListener("pointermove",R),document.addEventListener("pointerup",I))}function R(e){if(!E.current)return;let t=e.clientX-k.current,s=-e.clientY+C.current,a=_.current+("horizontal"===x?t:s)*d*h;y((a=parseFloat(Math.max(o,Math.min(Math.round(a/d)*d,c)).toFixed(S))).toString()),i(a)}function I(){N(!1),E.current=!1,document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",I)}let D=()=>{y(o.toString()),i(o)},P=e=>{let t=parseFloat(e);return isNaN(t)?null:t};return l.useEffect(()=>{y(s.toString())},[s]),(0,a.jsxs)("div",{className:(0,r.cn)("relative w-fit",u,{"opacity-50":v}),children:[g&&(0,a.jsx)("div",{className:(0,r.cn)("absolute inset-y-0 left-0 flex select-none items-center px-2 text-muted-foreground",p,"horizontal"===x?"cursor-ew-resize":"cursor-ns-resize"),onPointerDown:T,children:g}),(0,a.jsx)(n.I,{ref:t,type:"text",className:(0,r.cn)("pr-0 [appearance:textfield] active:cursor-none disabled:opacity-100 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none","horizontal"===x?"hover:cursor-ew-resize":"hover:cursor-ns-resize",g?"pl-8":"",m),disabled:v,step:d,value:j,onChange:function(e){let t=e.target.value;if(""===t){y("");return}if(isNaN(Number(t)))return;y(t);let s=P(t);null!==s&&i(s)},onBlur:function(){(null===P(j)||""===j)&&D()},onPointerDown:T,...b}),!!w&&(0,a.jsx)("div",{className:(0,r.cn)("fixed inset-0","horizontal"===x?"cursor-ew-resize":"cursor-ns-resize")})]})});i.displayName="NumericScrubber"},5103:function(e,t,s){"use strict";s.d(t,{f:function(){return n}});var a=s(52558),l=s(71759);function n(){let{authUser:e}=(0,a.Eu)(),t=(0,l.hO)(e=>e.projectWorkspace),s=(0,l.hO)(e=>e.memberships);return{projectWorkspace:t,isMemberOfWorkspace:s.some(t=>t.user_id===(null==e?void 0:e.uid)),workspaceMemberships:s}}},23866:function(e,t,s){"use strict";s.d(t,{u:function(){return l}});var a=s(2265);let l=()=>{let[e,t]=(0,a.useState)(!1),l=(0,a.useCallback)(async()=>{try{let{scan:e}=await Promise.all([s.e(4768),s.e(7511)]).then(s.bind(s,61620));e({enabled:!0,showToolbar:!0,animationSpeed:"fast"})}catch(e){console.error("Failed to initialize React Scan:",e)}},[]),n=(0,a.useCallback)(async()=>{try{let{setOptions:e}=await Promise.all([s.e(4768),s.e(7511)]).then(s.bind(s,61620));e({enabled:!1,showToolbar:!1})}catch(e){console.error("Failed to disable React Scan:",e)}},[]),r=(0,a.useCallback)(()=>{t(e=>!e)},[]);return(0,a.useEffect)(()=>(e?l():n(),()=>{}),[e,l,n]),{isEnabled:e,toggleReactScan:r}}},50968:function(e,t,s){"use strict";s.d(t,{V:function(){return l}});var a=s(2265);let l=()=>{let[e,t]=(0,a.useState)(!1),l=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,a.useCallback)(async()=>{try{let e=new(await s.e(7243).then(s.t.bind(s,57243,23))).default;e.showPanel(1),e.dom.style.position="fixed",e.dom.style.left="0",e.dom.style.top="0",e.dom.style.zIndex="10000",document.body.appendChild(e.dom),l.current=e;let t=()=>{l.current&&(l.current.update(),n.current=requestAnimationFrame(t))};n.current=requestAnimationFrame(t)}catch(e){console.error("Failed to initialize stats.js:",e)}},[]),i=(0,a.useCallback)(()=>{var e,t;n.current&&(cancelAnimationFrame(n.current),n.current=null),(null===(t=l.current)||void 0===t?void 0:null===(e=t.dom)||void 0===e?void 0:e.parentNode)&&(document.body.removeChild(l.current.dom),l.current=null)},[]),o=(0,a.useCallback)(()=>{t(e=>!e)},[]);return(0,a.useEffect)(()=>(e?r():i(),i),[e,r,i]),{isEnabled:e,toggleStats:o}}},15345:function(e){e.exports={editor:"CodeEditor_editor__SnrZP"}}},function(e){e.O(0,[9427,2946,4358,7481,9990,5878,8310,6401,5002,7150,2910,3579,2972,4438,4240,9692,1351,6732,9291,441,1770,2078,996,7075,6241,7648,5165,237,6873,2373,1447,4755,5598,236,7446,8433,5354,6087,2287,9131,8544,7595,4596,8394,3210,557,9019,8996,4864,991,2971,6432,1744],function(){return e(e.s=49383)}),_N_E=e.O()}]);